<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>有趣的流体小知识（四）——激波在固壁上的反射问题</title>
    <link href="/2024/01/08/Shock_Reflection/"/>
    <url>/2024/01/08/Shock_Reflection/</url>
    
    <content type="html"><![CDATA[<h1 id="有趣的流体小知识四激波在固壁上的反射问题">有趣的流体小知识（四）——激波在固壁上的反射问题</h1><div class="note note-success">            <p>很久没有更新流体专栏啦，这份笔记分享的是一个关于<strong>激波</strong>的气体动力学问题，虽小但有趣。关于激波的有趣知识，可以关注萌萌战队的精彩科普，每日激波（1/1）走起（手动狗头）。欢迎各位<strong>点赞、收藏、转发！</strong></p>          </div><h2 id="一典型的激波固壁反射问题">一、典型的激波固壁反射问题</h2><p>在战场上，一枚手雷在士兵的掩体（墙面）边爆炸，此时士兵若不采取卧倒规避，则非常容易被爆炸引起在掩体反射的冲击波所伤害，而且通常反射的冲击波更强。低空作超声速飞行的战机，在地面引起的声爆震耳欲聋，房屋窗户难逃一劫。另外，在高速风洞、激波管实验中，激波的固壁反射也是需要格外注意的安全问题……</p><p>我们想要回答：<strong>为什么激波在固壁反射后，强度会急剧增加？</strong></p><p>如图 <a href="#fig1">1</a> ，考虑一道入射激波在固壁上反射，现求反射前后壁面上压强的变化（<span class="math inline">\(p_{1} \rightarrow p_{3}\)</span>），已知入射激波前（反射激波后）速度 <span class="math inline">\(u_{2}\)</span>，压强 <span class="math inline">\(p_{2}\)</span>，密度 <span class="math inline">\(\rho_{2}\)</span>；入射与反射激波运动速度分别为 <span class="math inline">\(N_{i}, \; N_{r}\)</span>；入射激波后（反射激波前）区域气体速度为零，即 <span class="math inline">\(u_{1} = u_{3} = 0\)</span>。</p><p><span id="fig1"></span></p><p><img src="/2024/01/08/Shock_Reflection/1.png" label="001" style="zoom:50%;"></p><center><font size="2.5"> 图 1 激波在固壁上的反射问题示意图 </font></center><p><br></p><h2 id="二详细推导过程">二、详细推导过程</h2><h3 id="rankine-hugoniot-r-h-条件">1、Rankine-Hugoniot (R-H) 条件</h3><p>首先写出激波（强间断）处的 Rankine-Hugoniot (R-H) 条件 <span class="math display">\[\begin{align}\rho_{-} v_{-} &amp; = \rho_{+} v_{+} \label{eq001} \tag{1}\\\rho_{-} v_{-}^{2} + p_{-} &amp; = \rho_{+} v_{+}^{2} + p_{+} \label{eq002} \tag{2}\\(\rho_{-} e_{-} + \frac{1}{2} \rho_{-} v_{-}^{2} + p_{-}) v_{-} &amp; = (\rho_{+} e_{+} + \frac{1}{2} \rho_{+} v_{+}^{2} + p_{+}) v_{+} \label{eq003} \tag{3}\\\end{align}\]</span> 其中，下标带 "-" 量和带 "+" 量分别代表通过激波前后的物理量，<span class="math inline">\(\rho\)</span> 为密度，<span class="math inline">\(p\)</span> 为压强，<span class="math inline">\(e\)</span> 为比内能，<span class="math inline">\(v\)</span> 代表气流参考激波的相对速度（即以激波为参考系观察到的气流速度），满足以下关系式</p><p><span class="math display">\[\begin{align}v_{-} = u_{-} - U \label{eq004} \tag{4}\\v_{+} = u_{+} - U \label{eq005} \tag{5}\end{align}\]</span> 这里 <span class="math inline">\(u_{-}\)</span> 与 <span class="math inline">\(u_{+}\)</span> 分别代表激波前后气流速度的绝对值，<span class="math inline">\(U\)</span> 为激波行进速度.</p><p>下面寻找通过激波前后的物理量变化规律。</p><h3 id="推导-prandtl-关系式">2、推导 Prandtl 关系式</h3><p>由式 (3) / (1) 可得 <span class="math display">\[H = e_{-} + \frac{p_{-}}{\rho_{-}} + \frac{1}{2} v_{-}^{2} = e_{+} + \frac{p_{+}}{\rho_{+}} + \frac{1}{2} v_{+}^{2} \label{eq006} \tag{6}\]</span> 即通过激波前后比总焓 <span class="math inline">\(H = h + v^{2} / 2\)</span> 不变，其中 <span class="math inline">\(h\)</span> 为比焓。由于以下关系式（理想可压缩流的 Bernoulli 积分） <span class="math display">\[H = h + \frac{1}{2} v^{2} = \frac{a^{2}}{\gamma - 1} + \frac{1}{2} v^{2} = \frac{1}{2} \frac{\gamma + 1}{\gamma - 1} a_{\ast}^{2} \label{eq007} \tag{7}\]</span> 其中，<span class="math inline">\(a\)</span> 为声速，<span class="math inline">\(a_{\ast}\)</span> 为临界声速。则激波两侧的临界声速 <span class="math inline">\(a_{\ast}\)</span> 也相同，且有 <span class="math display">\[\begin{align}\rho_{+} a_{\ast}^{2} &amp; = \frac{\gamma - 1}{\gamma + 1} \left( 2 \rho_{+} e_{+} + 2 p_{+} + \rho_{+} v_{+}^{2} \right) \\&amp; = \frac{\gamma - 1}{\gamma + 1} \left( \frac{2 p_{+}}{\gamma - 1} + 2 p_{+} + \rho_{+} v_{+}^{2} \right) \\&amp; = \frac{\gamma - 1}{\gamma + 1} \left( \rho_{+} v_{+}^{2} + p_{+}\right) + p_{+}\end{align} \label{eq008} \tag{8}\]</span></p><p>同理，有 <span class="math display">\[\rho_{-} a_{\ast}^{2} = \frac{\gamma - 1}{\gamma + 1} \left( \rho_{-} v_{-}^{2} + p_{-}\right) + p_{-} \label{eq009} \tag{9}\]</span> 由式 (8) 减 (9)，并结合式 (2)，可得 <span class="math display">\[a_{\ast}^{2} = \frac{p_{+} - p_{-}}{\rho_{+} - \rho_{-}} \label{eq010} \tag{10}\]</span> 又由 R-H 条件中的式 (1) (2) 可得 <span class="math display">\[\begin{align}\rho_{-} v_{-}^{2} &amp; = \rho_{+} v_{-} v_{+} \label{eq011} \tag{11} \\\rho_{+} v_{+}^{2} &amp; = \rho_{-} v_{-} v_{+} \label{eq012} \tag{12} \\p_{+} - p_{-} &amp; = \rho_{-} v_{-}^{2} - \rho_{+} v_{+}^{2} \label{eq013} \tag{13}\end{align}\]</span> 将式 (11) (12) 代入式 (13)，可得 <span class="math display">\[v_{-} v_{+} = \frac{p_{+} - p_{-}}{\rho_{+} - \rho_{-}} \label{eq014} \tag{14}\]</span> 联立式 (10) (14) 易知 <span class="math display">\[v_{-} v_{+} = a_{\ast}^{2} \label{eq015} \tag{15}\]</span> 若定义速度系数 <span class="math inline">\(\lambda = v / a_{\ast}\)</span>，则激波前后的速度系数满足关系式 <span class="math display">\[\lambda_{-} \lambda_{+} = 1 \label{eq016} \tag{16}\]</span> 由上式可知，当 <span class="math inline">\(\lambda_{-} &gt; 1, \; \lambda_{+} &lt; 1\)</span>，等价于 <span class="math inline">\(Ma_{-} &gt; 1, \; Ma_{+} &lt; 1\)</span>，说明跨越激波时，<span class="math inline">\(p, \rho, s\)</span> 增加，速度 <span class="math inline">\(v\)</span> 减小。波前气流相对激波速度为超声速，波后为亚声速.</p><p>式 (15) 即为 Prandtl 关系式。</p><h3 id="推导激波前后的压强比与波前马赫数的关系式">3、推导激波前后的压强比与波前马赫数的关系式</h3><p>下面推导激波前后的压强比 <span class="math inline">\(p_{+} / p_{-}\)</span> 与波前马赫数 <span class="math inline">\(Ma_{-}\)</span> 的关系式。</p><p>这里我们从 <span class="math inline">\(\rho_{+} / \rho_{-}\)</span> 间接推导 <span class="math inline">\(p_{+} / p_{-}\)</span>，当然还有其他方法，具体可参考教材。</p><p>用 <span class="math inline">\(h\)</span> 除式 (5)，可得 <span class="math display">\[\frac{H}{h} = \frac{\frac{1}{2} \frac{\gamma + 1}{\gamma - 1} a_{\ast}^{2}}{\frac{1}{\gamma - 1} a^{2}} = \frac{\gamma + 1}{2} \left(\frac{a_{\ast}}{a}\right)^{2} \label{eq017} \tag{17}\]</span> 并结合等熵关系式可得 <span class="math display">\[\frac{H}{h} = \frac{T_{0}}{T} = 1 + \frac{v^{2}}{2 h} = 1 + \frac{\gamma - 1}{2} Ma^{2} \label{eq018} \tag{18}\]</span> 联立式 (17) (18) 可得 <span class="math display">\[\frac{a_{\ast}}{a} = \left[\frac{2}{\gamma + 1} \left(1 + \frac{\gamma - 1}{2} Ma^{2}\right)\right] = \left[\frac{2 + (\gamma - 1) Ma^{2}}{\gamma + 1}\right]^{\frac{1}{2}} \label{eq019} \tag{19}\]</span> 由速度系数 <span class="math inline">\(\lambda\)</span> 的定义可得 <span class="math display">\[\lambda = \frac{v}{a_{\ast}} = \frac{v}{a} \frac{a}{a_{\ast}} = Ma \left[\frac{2 + (\gamma - 1) Ma^{2}}{\gamma + 1}\right]^{- \frac{1}{2}} = \left[\frac{(\gamma + 1) Ma^2}{2 + (\gamma - 1) Ma^{2}}\right]^{\frac{1}{2}} \label{eq020} \tag{20}\]</span> 故应用式 (1) (15) (20)，可得激波前后的密度之比与 <span class="math inline">\(Ma_{-}\)</span> 的关系为 <span class="math display">\[\frac{\rho_{+}}{\rho_{-}} = \frac{v_{-}}{v_{+}} = \frac{v_{-}^{2}}{v_{-}v^{+}} = \frac{v_{-}^{2}}{a_{\ast}^{2}} = \lambda_{-}^{2} = \frac{(\gamma + 1) Ma_{-}^{2}}{2 + (\gamma - 1) Ma_{-}^{2}} \label{eq021} \tag{21}\]</span> 再根据由 R-H 条件的 (1) (2) 式推导得到的式 (13) <span class="math display">\[\begin{align}p_{+} - p_{-} &amp; = \rho_{-} v_{-}^{2} - \rho_{+} v_{+}^{2} \\&amp; = \rho_{-} v_{-} \left(v_{-} - v_{+}\right) \\&amp; = \rho_{-} v_{-}^{2} \left(1 - \frac{v_{+}}{v_{-}}\right)\end{align} \label{eq022} \tag{22}\]</span> 用 <span class="math inline">\(p_{-}\)</span> 除上式 (22) 可得 <span class="math display">\[\begin{align}\frac{p_{+} - p_{-}}{p_{-}} &amp; = \frac{\gamma \rho_{-} v_{-}^2}{\gamma p_{-}} \left(1 - \frac{v_{+}}{v_{-}}\right) \\&amp; = \frac{\gamma v_{-}^{2}}{a_{-}^{2}} \left(1 - \frac{v_{+}}{v_{-}}\right) \\&amp; = \gamma Ma_{-}^{2} \left(1 - \frac{v_{+}}{v_{-}}\right)\end{align} \label{eq023} \tag{23}\]</span> 将式 (21) 代入式 (23) ，整理可得 <span class="math display">\[\frac{p_{+}}{p_{-}} = 1 + \frac{2 \gamma}{\gamma + 1} \left(Ma_{-}^{2} - 1\right) \label{eq024} \tag{24}\]</span></p><h3 id="推导区域-②-气流速度满足的方程">4、推导区域 ② 气流速度满足的方程</h3><p>下面推导入射激波波前与反射激波波后气流速度 <span class="math inline">\(u_{2}\)</span> 满足的关系（对应相同区域②）。</p><p>联立总焓关系式 (5) 与 Prandtl 关系式 (15) 可得 <span class="math display">\[v_{-} v_{+} = a_{\ast}^{2} = \frac{\gamma - 1}{\gamma + 1} v_{-}^{2} + \frac{2}{\gamma + 1} a_{-}^{2} = \frac{\gamma - 1}{\gamma + 1} v_{+}^{2} + \frac{2}{\gamma + 1} a_{+}^{2} \label{eq025} \tag{25}\]</span> 引入简单关系式 <span class="math display">\[\mu^{2} = \frac{\gamma - 1}{\gamma + 1} \label{eq026} \tag{26}\]</span></p><p>则式 (25) 可写为 <span class="math display">\[v_{-} v_{+} = a_{\ast}^{2} = \mu^{2} v_{-}^{2} + (1 - \mu^{2}) a_{-}^{2} = \mu^{2} v_{+}^{2} + (1 - \mu^{2}) a_{+}^{2} \label{eq027} \tag{27}\]</span> 可变形为以下方程 <span class="math display">\[(1 - \mu^{2}) v_{-}^{2} + (v_{+} - v_{-}) v_{-} - (1 - \mu^{2}) a_{-}^{2} = 0 \label{eq028} \tag{28}\]</span> 注意到，在上式中应用关系式 (4) (5) 可得 <span class="math display">\[(1 - \mu^{2}) \left(u_{-} - U\right)^{2} + (u_{+} - u_{-}) (u_{-} - U) - (1 - \mu^{2}) a_{-}^{2} = 0 \label{eq029} \tag{29}\]</span> 两边同除 <span class="math inline">\((1 - \mu^{2}) \neq 0\)</span> 可得 <span class="math display">\[\left(u_{-} - U\right)^{2} + \frac{(u_{+} - u_{-}) (u_{-} - U)}{(1 - \mu^{2}) } - a_{-}^{2} = 0 \label{eq030} \tag{30}\]</span> 下面回到原激波反射问题。</p><p><em>a</em>) 对于入射激波情形，</p><p>"-" ：激波前区域② ：已知 <span class="math inline">\(p_{2}, \; \rho_{2}, \; u_{2}, \; a_{2} = \sqrt{\gamma p_{2} / \rho_{2}}\)</span>；</p><p>"+" ：激波后区域① ：已知 <span class="math inline">\(u_{1} = 0\)</span>，未知 <span class="math inline">\(p_{1}, \; \rho_{1}, \; a_{1}\)</span>；</p><p>激波速度（以向右为正方向）：<span class="math inline">\(U = N_{i} &gt; 0\)</span>。</p><p>将激波前后参数代入式 (29) 可得方程 <span class="math display">\[\left(u_{2} - N_{i}\right)^{2} - \frac{u_{2}}{1 - \mu^{2}} \left(u_{2} - N_{i}\right) - a_{2}^{2} = 0 \label{eq031} \tag{31}\]</span></p><p><em>b</em>) 对于反射激波情形，</p><p>"-" ：激波前区域② ：已知 <span class="math inline">\(p_{2}, \; \rho_{2}, \; u_{2}, \; a_{2} = \sqrt{\gamma p_{2} / \rho_{2}}\)</span>；</p><p>"+" ：激波后区域③ ：已知 <span class="math inline">\(u_{3} = 0\)</span>，未知 <span class="math inline">\(p_{3}, \; \rho_{3}, \; a_{3}\)</span>；</p><p>激波速度（以向右为正方向）：<span class="math inline">\(U = N_{r} &lt; 0\)</span>。</p><p>类似地可得 <span class="math display">\[\left(u_{2} - N_{r}\right)^{2} - \frac{u_{2}}{1 - \mu^{2}} \left(u_{2} - N_{r}\right) - a_{2}^{2} = 0 \label{eq032} \tag{32}\]</span> 由式 (31) (32) 可得：<span class="math inline">\((u_{2} - N_{i}), \; (u_{2} - N_{r})\)</span> 为同一个二次方程的两个根。</p><p>不妨设 <span class="math inline">\(Ma_{i} = (u_{2} - N_{i}) / a_{2}, \; Ma_{r} = (u_{2} - N_{r}) / a_{2}\)</span> 分别代表入射、反射激波前区域马赫数，则 <span class="math inline">\(Ma_{i}, \; Ma_{r}\)</span> 为以下二次方程的两个不同实根 <span class="math display">\[Ma^{2} - \frac{u_{2}}{(1 - \mu^{2}) a_{2}} \cdot Ma - 1 = 0 \label{eq033} \tag{33}\]</span> 则两根满足 <span class="math display">\[Ma_{i} \cdot Ma_{r} = -1 \label{eq034} \tag{34}\]</span> ### 5、最终解：激波反射压强比</p><p>应用通过激波前后的压强比与波前马赫数之间的关系式 (24) 可得 <span class="math display">\[\begin{align}\frac{p_{1}}{p_{2}} &amp; = 1 + \frac{2 \gamma}{\gamma + 1} \left(Ma_{i}^{2} - 1\right) = (1 + \mu^{2}) Ma_{i}^{2} - \mu^{2} \label{eq035} \tag{35}\\\frac{p_{3}}{p_{2}} &amp; = 1 + \frac{2 \gamma}{\gamma + 1} \left(Ma_{r}^{2} - 1\right) = (1 + \mu^{2}) Ma_{r}^{2} - \mu^{2} \label{eq036} \tag{36}\end{align}\]</span> 根据式 (32)，联立上面两式 (33) (34) 可得 <span class="math display">\[\frac{p_{3}}{p_{2}} = \frac{(1 + 2 \mu^{2}) - \mu^{2} \frac{p_{1}}{p_{2}}}{\frac{p_{1}}{p_{2}} + \mu^{2}} = \frac{(1 + 2 \mu^{2} \frac{p_{2}}{p_{1}} - \mu^{2}}{\mu^{2} \frac{p_{2}}{p_{1}} + 1} \label{eq037} \tag{37}\]</span> 则有关系式 <span class="math display">\[\frac{p_{3} - p_{2}}{p_{2} - p_{1}} = \frac{\frac{p_{3}}{p_{2}} - 1}{1 - \frac{p_{1}}{p_{2}}} = \frac{\frac{(1 + 2 \mu^{2}) - \mu^{2} \frac{p_{1}}{p_{2}})}{\frac{p_{1}}{p_{2}} + \mu^{2}} - 1}{1 - \frac{p_{1}}{p_{2}}} = \frac{1 + \mu^{2}}{\frac{p_{1}}{p_{2}} + \mu^{2}} = \frac{2 \gamma}{(\gamma + 1) \frac{p_{1}}{p_{2}} + (\gamma - 1)} \label{eq038} \tag{38}\]</span> 或 <span class="math display">\[\frac{p_{3} - p_{1}}{p_{2} - p_{1}} = \frac{(p_{3} - p_{2}) + (p_{2} - p_{1})}{p_{2} - p_{1}} = 1 + \frac{p_{3} - p_{2}}{p_{2} - p_{1}} = 1 + \frac{1 + \mu^{2}}{\frac{p_{1}}{p_{2}} + \mu^{2}} = 1 + \frac{2 \gamma}{(\gamma + 1) \frac{p_{1}}{p_{2}} + (\gamma - 1)} \label{eq039} \tag{39}\]</span> ## 三、极端情况分析与解释</p><p><em>a</em>) 若入射激波很强，即有 <span class="math inline">\(p_{2} / p_{1} \gg 1\)</span>，则有近似关系式 <span class="math display">\[\frac{p_{3}-p_{1}}{p_{2}-p_{1}} \sim 1+\frac{2 \gamma}{\gamma-1}=2+\frac{1}{\mu^{2}}=\left\{\begin{array}{ll}8, &amp; \text { for } \gamma = 1.4 \\13, &amp; \text { for } \gamma = 1.2 \\23, &amp; \text { for } \gamma = 1.1\end{array}\right. \label{eq040} \tag{40}\]</span> 可见激波经过壁面反射后，静止区域③的压强相比初始状态①有巨大提升，<strong>压强可达到原始的 8 倍</strong>！<strong>这就解释了为什么强激波在固壁上的反射非常危险。</strong></p><p><em>b</em>) 若入射激波很弱，即有 <span class="math inline">\(p_{2} / p_{1} \sim 1\)</span>，则有近似关系式 <span class="math display">\[\frac{p_{3} - p_{1}}{p_{2} - p_{1}} \sim 2 \label{eq041} \tag{41}\]</span> 结果与声波反射情况结果一致。由于 <span class="math inline">\(p_{2} \approx p_{1}\)</span>，即有 <span class="math inline">\(p_{3} \approx p_{1}\)</span>，此时反射前后压强几乎不变。</p><hr><p>以上就是本文全部内容，如有疑问，敬请批评指正，欢迎关注与留言！</p><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2024/01/08</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>流体小白学习笔记（二）——可压缩流体基本方程组的无量纲化</title>
    <link href="/2022/08/11/NS_Note_Nondimensionalization/"/>
    <url>/2022/08/11/NS_Note_Nondimensionalization/</url>
    
    <content type="html"><![CDATA[<h1 id="流体小白学习笔记二可压缩流体基本方程组的无量纲化">流体小白学习笔记（二）——可压缩流体基本方程组的无量纲化</h1><div class="note note-success">            <p>紧接上篇笔记，欢迎小伙伴们点赞、收藏、转发！O(∩_∩)O</p>          </div><p>本文旨在介绍流体力学研究中的一把“利器”——<strong>无量纲化</strong>。</p><p>对流体力学有所了解的小伙伴一定都听说过雷诺数、马赫数、普朗特数这些所谓“无量纲数”的概念。那么，你知道这些数是如何被人们发现并定义的吗？这些数的价值和意义何在？读完本文，相信你能够找到答案！</p><h2 id="一量纲无量纲化与量纲分析">一、量纲、无量纲化与量纲分析</h2><p><strong>量纲（dimension）</strong>是一个广泛的科学概念，在数学、物理、化学、计算机等各个学科具有重要意义。在数学上，量纲代表系统的自由度（degree of freedom），表示系统的维度大小，例如：线段的量纲为 1（dimension of one, 1D），欧几里得空间（Euclidean space）属于二维平面（2D），立方体、圆柱、球属于三维空间（3D）；在物理上，除空间量纲与时间量纲外，更广泛的量纲形成了一个抽象的参数空间，例如：七个基本物理量的量纲包括质量 <span class="math inline">\(\mathcal{M}\)</span>，长度 <span class="math inline">\(\mathcal{L}\)</span>，时间 <span class="math inline">\(\mathcal{T}\)</span>，热力学温度 <span class="math inline">\(\mathcal{\Theta}\)</span>，电流 <span class="math inline">\(\mathcal{I}\)</span>，光强 <span class="math inline">\(\mathcal{C}\)</span> 和物质的量 <span class="math inline">\(\mathcal{N}\)</span>。任何物理量的量纲均可采用基本物理量量纲通过组合得到，例如：密度 <span class="math inline">\(\rho\)</span> 的量纲为 <span class="math inline">\([\rho] = \mathcal{M} \mathcal{L}^{-3}\)</span>，对应国际标准单位（<em>SI</em>）为 <span class="math inline">\(\text{kg} \cdot \text{m}^{-3}\)</span>；压强 <span class="math inline">\(p\)</span> 的量纲为 <span class="math inline">\([p] = \mathcal{M} \mathcal{L}^{-1} \mathcal{T}^{-2}\)</span>，对应 <em>SI</em> 为 <span class="math inline">\(\text{kg} \cdot \text{m}^{-1} \cdot s^{-2}\)</span>。上述 <span class="math inline">\([\cdot]\)</span> 代表取中括号内变量的量纲。</p><p>容易得到以下关于物理学量纲的两条基本定律成立：</p><ul><li><strong>量纲一致性定律：</strong>每个在方程中相加的量的量纲必须一致。这也是验证方程是否成立的先决步骤。</li><li><strong>量纲的幂次定律：</strong>任何物理量的量纲公式都是基本量纲幂次单项式的形式，即满足物理量 <span class="math inline">\([X] = \mathcal{M}^{A} \mathcal{L}^{B} \mathcal{T}^{C} \mathcal{\Theta}^{D} \mathcal{I}^{E} \mathcal{C}^{F} \mathcal{N}^{G}\)</span>。</li></ul><p><strong>无量纲化（nondimensionalization）</strong>指通过适当的变量替换，从包含物理量的系统中部分或全部去除物理维度，使得变换后的系统中的部分或全部变量的量纲为 1。该过程可以简化具有复杂物理量的问题，并完成对关键物理信息的参数化。在一些物理系统中，<strong>缩放（scaling）</strong>与无量纲化意义相同，相对于系统原始变量，某些经过适当缩放的无量纲单位更容易进行测量与分析，而这些单位正是系统的固有属性，反映出系统的本质特征与内在规律。</p><p>无量纲化通常用以简化复杂的微分方程，当然这一过程也可以针对物理系统而不基于特定方程开展，这就是所谓<strong>量纲分析（dimensional analysis）</strong><a href="#refer-anchor-1"><sup>[1]</sup></a>，这两者密切相关。量纲分析旨在分析与探求系统中多个物理量之间的关联，是研究物理问题的基本方法和有力武器，也促生了众多奠基性的物理学理论成果。限于篇幅，有关量纲分析及其相关故事，例如著名的白金汉 <span class="math inline">\(\pi\)</span> 定理（<em>Buckingham</em> <span class="math inline">\(\pi\)</span> theorem）<a href="#refer-anchor-2"><sup>[2]</sup></a>、泰勒（<em>G. I. Taylor</em>）仅凭照片估计原子弹当量等<a href="#refer-anchor-3"><sup>[3]</sup></a>，在此不再详述。有兴趣的小伙伴可以参阅相关资料与文献 ~</p><h2 id="二为什么要进行无量纲化无量纲数是什么">二、为什么要进行无量纲化？无量纲数是什么？</h2><p>有的小伙伴可能会问：<em>我们生活中实际的物理系统都是有量纲的，因此能够直观感知质量、长度、时间等物理量的大小，也容易比较不同系统物理量之间的差异，而无量纲化似乎将系统变得抽象了，那么为什么还要对系统进行无量纲化呢？</em></p><p>对于物理研究而言，对系统进行无量纲化能够带来以下好处：</p><ul><li><strong>无量纲化可以恢复并揭示系统的特征属性。</strong>例如，对于一个简谐运动系统，若原始系统蕴含固有的谐振频率、时间常数等信息，则通过无量纲化可以恢复这些值，揭示系统的动力学特点。</li><li><strong>无量纲化可以减少系统中所考虑变量的数量，</strong>有利于直观比较各贡献项的相对大小，从而揭示系统的关键参数，方便进行简化。</li><li><strong>无量纲后变量的量纲为 1，因此其数值与所选用的单位制无关</strong>，采用纯数表示，便于进行对比。</li><li><strong>最重要的是，无量纲化能够获得描述系统特征的无量纲数，利用无量纲数可以定义系统相似准则。</strong>若确定两系统中控制某一过程的无量纲数相同，则可认为在此过程中两系统动力学规律相似。</li></ul><p>例如，在流体力学研究中，对于基本方程组进行无量纲化，不仅可以简化方程形式，还能够获得众多无量纲数，而这些无量纲数通常具有深刻的物理意义，能够反映复杂流体系统的本质。因此，人们在流体力学各个范式的研究中，常常关注并采用无量纲方程形式，同时非常重视各个无量纲数的作用。<strong>一个个无量纲数，看似简单，但常常具有“四两拨千斤”的威力！</strong></p><p>下面笔者以流体力学中的可压缩流体基本方程组为例，阐述对该方程组无量纲化的详细过程及其结果分析。</p><h2 id="三可压缩流体方程组无量纲化流程">三、可压缩流体方程组无量纲化流程</h2><h3 id="有量纲的流体基本方程组">有量纲的流体基本方程组</h3><p>对于流体系统的无量纲化过程，其推导基础是有量纲形式的流体力学基本方程组。有关流体力学基本方程组的数学表达、物理含义及几种常见的变形形式，可以参考笔者本专栏的前一篇文章<strong><em>《流体小白学习笔记（一）——流体力学基本方程组》</em></strong>。首先给出有量纲的可压缩流体基本方程组，作为后续进行无量纲化的基础。</p><p>写成应力矢量形式的流体力学基本方程组为 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t}+\nabla \cdot(\rho \mathbf{u})=0, &amp; \text { 连续方程 } \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=\rho \boldsymbol{F}+\nabla \cdot \boldsymbol{P}, &amp; \text { 运动方程 } \\\rho \frac{\mathrm{D} e}{\mathrm{D} t}=\boldsymbol{P}: \boldsymbol{S}+ \nabla \cdot(\kappa \nabla T)+\rho \dot{q}, &amp; \text { 能量方程 } \\\boldsymbol{P}=-p \boldsymbol{I} + \boldsymbol{\Pi}=-p \boldsymbol{I}+2 \mu\left[\boldsymbol{S}-\frac{1}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right]+\mu^{\prime} (\nabla \cdot \mathbf{u}) \mathbf{I}, &amp; \text { 本构方程 } \\p=f(\rho, T), &amp; \text { 状态方程 }\end{array}\right. \label{eq001} \tag{1}\end{align}\]</span> 上述方程组中各运算符号规则、变量含义及其英文表达以及热力学经验式（如 <em>Sutherland</em> 公式等）在专栏前文已有详细表述，在此不再重复给出。将本构方程代入运动方程与能量方程分别进行化简，考虑流动介质为完全气体，斯托克斯假设成立（即有 <span class="math inline">\(\mu^{\prime} = 0\)</span>），且忽略流体体积力项 <span class="math inline">\(F\)</span> 与内部体积热源项 <span class="math inline">\(\dot{q}\)</span>，即可得到微分形式的可压缩流体基本方程组 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t}+\nabla \cdot(\rho \mathbf{u})=0, &amp; \text { 连续方程 } \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=-\nabla p + \nabla \cdot (2 \mu \boldsymbol{S}) - \frac{2}{3} \nabla(\mu(\nabla \cdot \mathbf{u})), &amp; \text { 运动方程 }  \\\rho c_{p}\frac{\mathrm{D} T}{\mathrm{D} t} = \frac{\mathrm{D} p}{\mathrm{D} t} + \nabla \cdot(\kappa \nabla T) + \Phi &amp; \text { 能量方程 } \\\boldsymbol{P}=-p \boldsymbol{I} + \boldsymbol{\Pi}=-p \boldsymbol{I}+2 \mu\left[\boldsymbol{S}-\frac{1}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right], &amp; \text { 本构方程 } \\p = \rho R T, &amp; \text { 状态方程 }\end{array}\right. \label{eq002} \tag{2}\end{align}\]</span> 注意到 <span class="math inline">\(\nabla \cdot \boldsymbol{I} = \frac{\partial \delta_{i j}}{\partial x_{j}} = \frac{\partial}{\partial x_{i}} = \nabla\)</span>。容易证明，耗散函数 <span class="math inline">\(\Phi\)</span> 的表达式满足 <span class="math display">\[\begin{align}\Phi = 2 \mu \boldsymbol{S} : \boldsymbol{S} - \frac{2}{3} \mu(\nabla \cdot \mathbf{u})^{2}\end{align} = \frac{1}{2 \mu} \boldsymbol{\Pi} : \boldsymbol{\Pi}  \label{eq003} \tag{3}\]</span> 将变形速率张量 <span class="math inline">\(\boldsymbol{S}\)</span> 与偏应力张量 <span class="math inline">\(\boldsymbol{\Pi}\)</span> 采用速度矢量 <span class="math inline">\(\mathbf{u}\)</span> 或张量形式表示，即有 <span class="math display">\[\begin{align}\boldsymbol{S} &amp; = \frac{1}{2} \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T}\right] = \frac{1}{2} \left(\frac{\partial u_{i}}{\partial x_{j}} + \frac{\partial u_{j}}{\partial x_{i}}\right) \label{eq004} \tag{4} \\\boldsymbol{\Pi} &amp; = 2 \mu\left[\boldsymbol{S}-\frac{1}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right] = \mu \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right] = \mu \left(\frac{\partial u_{i}}{\partial x_{j}} + \frac{\partial u_{j}}{\partial x_{i}} - \frac{2}{3} \frac{\partial u_{k}}{\partial x_{k}} \delta_{i j}\right) \label{eq005} \tag{5} \\\end{align}\]</span> 将张量 <span class="math inline">\(\eqref{eq004}\)</span> 与 <span class="math inline">\(\eqref{eq005}\)</span> 的原始矢量形式代入式 <span class="math inline">\(\eqref{eq003}\)</span> ，再代入方程组 <span class="math inline">\(\eqref{eq002}\)</span> 中，并展开物质导数与本构方程，可得<strong>有量纲的可压缩流体基本方程组</strong> <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho^{\ast}}{\partial t^{\ast}}+\nabla^{\ast} \cdot(\rho^{\ast} \mathbf{u}^{\ast})=0, &amp; \text { 连续方程 } \\\rho^{\ast} \left[\frac{\partial \mathbf{u}^{\ast}}{\partial t^{\ast}} + (\mathbf{u}^{\ast} \cdot \nabla^{\ast}) \mathbf{u}^{\ast} \right] = - \nabla p^{\ast} + \nabla \cdot \left[\mu^{\ast} \left((\nabla^{\ast} \mathbf{u}^{\ast}) + (\nabla^{\ast} \mathbf{u}^{\ast})^{T} - \frac{2}{3} (\nabla^{\ast} \cdot \mathbf{u}^{\ast}) \boldsymbol{I}\right) \right], &amp; \text { 运动方程 }  \\\rho^{\ast} c_{p} \left[\frac{\partial T^{\ast}}{\partial t^{\ast}} + (\mathbf{u}^{\ast} \cdot \nabla^{\ast}) T^{\ast} \right] = \left[\frac{\partial p^{\ast}}{\partial t^{\ast}} + (\mathbf{u}^{\ast} \cdot \nabla^{\ast}) p^{\ast} \right] + \nabla^{\ast} \cdot(\kappa^{\ast} \nabla^{\ast} T^{\ast}) \\\quad \quad \quad \quad \quad \quad \quad + \frac{\mu^{\ast}}{2}\left[(\nabla^{\ast} \mathbf{u}^{\ast}) + (\nabla^{\ast} \mathbf{u}^{\ast})^{T} - \frac{2}{3} (\nabla^{\ast} \cdot \mathbf{u}^{\ast}) \boldsymbol{I} \right] : \left[(\nabla^{\ast} \mathbf{u}^{\ast}) + (\nabla^{\ast} \mathbf{u}^{\ast})^{T} - \frac{2}{3} (\nabla^{\ast} \cdot \mathbf{u}^{\ast}) \boldsymbol{I} \right] &amp; \text { 能量方程 } \\\boldsymbol{P}^{\ast}=-p^{\ast} \boldsymbol{I} + \boldsymbol{\Pi}^{\ast}=-p^{\ast} \boldsymbol{I} + \mu^{\ast} \left[(\nabla^{\ast} \mathbf{u}^{\ast}) + (\nabla^{\ast} \mathbf{u}^{\ast})^{T} - \frac{2}{3} (\nabla^{\ast} \cdot \mathbf{u}^{\ast}) \boldsymbol{I} \right], &amp; \text { 本构方程 } \\p^{\ast} = \rho^{\ast} R T^{\ast}, &amp; \text { 状态方程 }\end{array}\right. \label{eq006} \tag{6}\end{align}\]</span></p><p>上述方程组中上标带 <span class="math inline">\(\ast\)</span> 号的物理量为有量纲变量。</p><h3 id="方程组无量纲化流程">方程组无量纲化流程</h3><p>对一个物理系统（一般以微分方程组形式出现）进行无量纲化并提取特征无量纲数的一般流程如下：</p><ul><li>引入参考特征量（有量纲），如特征长度 <span class="math inline">\(L^{\ast}\)</span>、特征速度 <span class="math inline">\(U^{\ast}\)</span>、特征时间 <span class="math inline">\(t^{\ast}\)</span>、物理变量 <span class="math inline">\(\rho^{\ast}, \; p^{\ast}, \; T^{\ast}, \; \mu^{\ast}, \; \kappa^{\ast}\)</span> 的参考量等；</li><li>将原始方程组中的有量纲变量，根据参考特征量及其组合进行无量纲化（注意：无量纲方式通常不是唯一的），获得无量纲变量；</li><li>将无量纲变量代回原始方程组，整理并化简形式；</li><li>分析无量纲方程组中出现的参考特征量组合项，定义无量纲数，并分析其物理意义；</li><li>将各个无量纲数代回方程组中，重新整理方程形式，最终得到无量纲化的方程组。</li></ul><p>下面对上述可压缩流体基本方程组 <span class="math inline">\(\eqref{eq006}\)</span> 进行无量纲化，无量纲后的各物理量上标不带 <span class="math inline">\(\ast\)</span> 号。</p><p>首先引入与流场相关的各参考特征量。引入特征长度 <span class="math inline">\(L^{\ast}\)</span>、特征速度 <span class="math inline">\(U_{\infty}^{\ast}\)</span>、特征时间 <span class="math inline">\(t_{\infty}^{\ast} = L^{\ast} / U_{\infty}^{\ast}\)</span>、特征密度 <span class="math inline">\(\rho_{\infty}^{\ast}\)</span>、特征温度 <span class="math inline">\(T_{\infty}^{\ast}\)</span>、特征动力粘度 <span class="math inline">\(\mu_{\infty}^{\ast}\)</span>、特征导热系数 <span class="math inline">\(\kappa_{\infty}^{\ast}\)</span>，下标带 <span class="math inline">\(\infty\)</span> 的物理量为远场的流场变量。各无量纲变量形式如下 <span class="math display">\[x = \frac{x^{\ast}}{L^{\ast}}, \quad y = \frac{y^{\ast}}{L^{\ast}}, \quad z = \frac{z^{\ast}}{L^{\ast}}, \quad \nabla = L^{\ast} \nabla^{\ast}, \quad t = \frac{t^{\ast}}{t_{\infty}} = \frac{U_{\infty}^{\ast}}{L^{\ast}} t^{\ast}, \\\rho = \frac{\rho^{\ast}}{\rho_{\infty}^{\ast}}, \quad p = \frac{p^{\ast}}{\rho_{\infty}^{\ast} U_{\infty}^{\ast 2}}, \quad \mathbf{u} = \frac{\mathbf{u}^{\ast}}{U_{\infty}^{\ast}}, \quad T = \frac{T^{\ast}}{T_{\infty}^{\ast}}, \quad \mu = \frac{\mu^{\ast}}{\mu_{\infty}^{\ast}}, \quad \kappa = \frac{\kappa^{\ast}}{\kappa_{\infty}^{\ast}}\label{eq007} \tag{7}\]</span> 需要说明的是，对于原始变量参考特征量的构造，通常其组合形式与缩放系数不是唯一的，可能有多种方式。例如对于压强 <span class="math inline">\(p\)</span> 的变换也可采用 <span class="math inline">\(p = p^{\ast} / (\rho_{\infty}^{\ast} U_{\infty}^{\ast 2} / 2)\)</span>，在此之所以不构造系数 <span class="math inline">\(\frac{1}{2}\)</span>，是便于后续进行无量纲数的定义与分析。但是，无论采用何种无量纲变换形式，都必须满足组合特征量的量纲与原始变量对应。</p><p>将上述各无量纲变量形式代入有量纲的流体基本方程组，进一步整理与简化即可得到无量纲基本方程组，具体过程如下：</p><ul><li><p><strong>无量纲连续方程（nondimensional continuity equation）</strong></p><p>将无量纲变量 <span class="math inline">\(\eqref{eq007}\)</span> 代入有量纲的连续方程 <span class="math display">\[\frac{\partial (\rho_{\infty}^{\ast} \rho)}{\partial \left(\frac{L^{\ast}}{U_{\infty}^{\ast}} t\right)} + \frac{1}{L^{\ast}} \nabla \cdot (\rho_{\infty}^{\ast} \rho U_{\infty}^{\ast} \mathbf{u}) = 0 \label{eq008} \tag{8}\]</span> 方程两边同乘 <span class="math inline">\(L^{\ast} / \rho_{\infty}^{\ast} U_{\infty}^{\ast}\)</span>，化简可得 <span class="math display">\[\frac{\partial \rho}{\partial t} + \nabla \cdot(\rho \mathbf{u}) = 0 \label{eq009} \tag{9}\]</span> 可以观察到，连续方程的有量纲与无量纲形式相同，本质是体积微元内满足质量守恒，未引入特征无量纲数。</p></li><li><p><strong>无量纲运动方程（nondimensional momentum equations）</strong></p><p>将无量纲变量 <span class="math inline">\(\eqref{eq007}\)</span> 代入有量纲的运动方程 <span class="math display">\[\begin{align}\begin{split}\rho_{\infty}^{\ast} \rho &amp; \left[\frac{\partial (U_{\infty}^{\ast} \mathbf{u})}{\partial (\frac{L^{\ast}}{U_{\infty}^{\ast}} t)} + \left(U_{\infty}^{\ast} \mathbf{u} \cdot \frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u})\right] = \\&amp; - \frac{1}{L^{\ast}} \nabla \left[(\rho_{\infty}^{\ast} U_{\infty}^{\ast}) p\right] \\&amp; + \frac{1}{L^{\ast}} \nabla \cdot \left \{ \mu_{\infty}^{\ast} \mu \left[ \left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u}) + \left(\left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u})\right)^{T} - \frac{2}{3} \left(\frac{1}{L^{\ast}} \nabla\right) \cdot (U_{\infty}^{\ast} \mathbf{u}) \boldsymbol{I}\right] \right \}\end{split}\end{align}\label{eq010} \tag{10}\]</span> 方程两边同乘 <span class="math inline">\(L^{\ast} / \rho_{\infty}^{\ast} U_{\infty}^{\ast 2}\)</span>，化简可得 <span class="math display">\[\rho\left[\frac{\partial \mathbf{u}}{\partial t} + (\mathbf{u} \cdot \nabla) \mathbf{u} \right] = - \nabla p + \frac{\mu_{\infty}^{\ast}}{\rho_{\infty}^{\ast} U_{\infty}^{\ast} L^{\ast}}\nabla \cdot \left[\mu \left((\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I}\right) \right] \label{eq011} \tag{11}\]</span></p><p>定义基于流场特征长度 <span class="math inline">\(L^{\ast}\)</span> 的无量纲的自由来流<strong>雷诺数（Reynolds number）</strong> <span class="math display">\[\operatorname{Re}_{\infty} = \frac{\rho_{\infty}^{\ast} U_{\infty}^{\ast} L^{\ast}}{\mu_{\infty}^{\ast}} \label{eq012} \tag{12}\]</span> 将该无量纲数 <span class="math inline">\(\eqref{eq012}\)</span> 代入方程 <span class="math inline">\(\eqref{eq011}\)</span> 进一步整理无量纲运动方程为 <span class="math display">\[\rho\left[\frac{\partial \mathbf{u}}{\partial t} + (\mathbf{u} \cdot \nabla) \mathbf{u} \right] = - \nabla p + \frac{1}{\operatorname{Re}_{\infty}}\nabla \cdot \left[\mu \left((\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I}\right) \right] \label{eq013} \tag{13}\]</span> 观察方程 <span class="math inline">\(\eqref{eq013}\)</span> 可知，考虑忽略体积力项的可压缩流动，无量纲运动方程仅包含一个无量纲数 <span class="math inline">\(\operatorname{Re}_{\infty}\)</span>，<strong>其物理意义为自由来流惯性力与粘性力之比</strong>。容易知道，若当地（local）雷诺数较小时，流动的粘性效应占主要地位；反之，若当地雷诺数很大，例如趋于无穷时，流动的粘性效应可以忽略，此时惯性力占主导。</p></li><li><p><strong>无量纲能量方程（nondimensional energy equation）</strong></p><p>将无量纲变量 <span class="math inline">\(\eqref{eq007}\)</span> 代入有量纲的能量方程 <span class="math display">\[\begin{align}\begin{split}(\rho_{\infty}^{\ast} \rho) c_{p}^{\ast} &amp; \left[\frac{\partial (T_{\infty}^{\ast} T)}{\partial \left(\frac{L^{\ast}}{U_{\infty}^{\ast}} t\right)} + \left(U_{\infty}^{\ast} \mathbf{u} \cdot \frac{1}{L^{\ast}} \nabla\right) (T_{\infty}^{\ast} T)\right] \\= &amp; \left[\frac{\partial (\rho_{\infty}^{\ast} U_{\infty}^{\ast 2} \cdot p)}{\partial \left(\frac{L^{\ast}}{U_{\infty}^{\ast}} t\right)} + \left(U_{\infty}^{\ast} \mathbf{u} \cdot \frac{1}{L^{\ast}} \nabla\right) (\rho_{\infty}^{\ast} U_{\infty}^{\ast 2} \cdot p)\right] + \frac{1}{L^{\ast}} \nabla \cdot \left[\kappa_{\infty}^{\ast} \kappa \left(\frac{1}{L^{\ast}} \nabla (T_{\infty}^{\ast} T)\right)\right] \\+ &amp; \frac{1}{2} (\mu_{\infty}^{\ast} \mu) \left \{ \left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u}) + \left[\left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u}) \right]^{T} - \frac{2}{3} \left(\frac{1}{L^{\ast}} \nabla\right) \cdot (U_{\infty}^{\ast} \mathbf{u}) \boldsymbol{I} \right \} \\&amp; \quad \quad \quad \; : \left \{ \left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u}) + \left[\left(\frac{1}{L^{\ast}} \nabla\right) (U_{\infty}^{\ast} \mathbf{u}) \right]^{T} - \frac{2}{3} \left(\frac{1}{L^{\ast}} \nabla\right) \cdot (U_{\infty}^{\ast} \mathbf{u}) \boldsymbol{I} \right \}\end{split}\end{align}\label{eq014} \tag{14}\]</span> 方程两边同乘 <span class="math inline">\(L^{\ast} / c_{p}^{\ast} \rho_{\infty}^{\ast} U_{\infty}^{\ast} T_{\infty}^{\ast}\)</span>，化简可得 <span class="math display">\[\begin{align}\begin{split}\rho \left[\frac{\partial T}{\partial t} + (\mathbf{u} \cdot \nabla) T \right] &amp; = \frac{U_{\infty}^{\ast}}{c_{p} T_{\infty}^{\ast}} \left[\frac{\partial p}{\partial t} + (\mathbf{u} \cdot \nabla) p \right] + \left(\frac{\mu_{\infty}^{\ast}}{\rho_{\infty}^{\ast} U_{\infty}^{\ast} L^{\ast}}\right) \cdot \left(\frac{\kappa_{\infty}^{\ast}}{c_{p}^{\ast} \mu_{\infty}^{\ast}}\right) \nabla\cdot(\kappa\nabla T) \\&amp; + \frac{\mu}{2} \left(\frac{\mu_{\infty}^{\ast}}{\rho_{\infty}^{\ast} U_{\infty}^{\ast} L^{\ast}}\right) \cdot \left(\frac{U_{\infty}^{\ast 2}}{c_{p}^{\ast} T_{\infty}^{\ast}}\right) \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right] \\&amp; \quad \quad \quad \quad \quad \quad \quad \quad \quad \quad \quad \quad \; \;: \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right]\end{split}\end{align}\label{eq015} \tag{15}\]</span></p><p>定义以下两个新无量纲数：自由来流<strong>马赫数（Mach number）</strong>与<strong>普朗特数（Prandtl number）</strong> <span class="math display">\[\begin{align}\operatorname{Ma}_{\infty} &amp; = \frac{U_{\infty}^{\ast}}{a_{\infty}^{\ast}}, \label{eq016} \tag{16}\\\operatorname{Pr} &amp; = \frac{\nu_{\infty}^{\ast}}{\alpha_{\infty}^{\ast}} = \frac{\frac{\mu_{\infty}^{\ast}}{\rho_{\infty}^{\ast}}}{\frac{\kappa_{\infty}^{\ast}}{c_{p}^{\ast} \rho_{\infty}^{\ast}}} = \frac{c_{p}^{\ast} \mu_{\infty}^{\ast}}{\kappa_{\infty}^{\ast}} \label{eq017} \tag{17}\end{align}\]</span></p><p>其中，<strong>马赫数是流体可压缩性的度量</strong>，一般认为 <span class="math inline">\(\operatorname{Ma} &lt; 0.3\)</span> 时流体不可压缩。流动速度可按照马赫数范围进行分类 <span class="math display">\[\begin{align}\begin{array}{l} \left\{\begin{matrix} \begin{split}\operatorname{Ma} &lt; 0.8,  &amp; \quad \text{Subsonic} \\0.8 &lt; \operatorname{Ma} &lt; 1.2, &amp; \quad \text{Transonic} \\1.2 &lt; \operatorname{Ma} &lt; 5.0, &amp; \quad \text{Supersonic} \\\operatorname{Ma} &gt; 5.0, &amp;  \quad \text{Hypersonic}\end{split}\end{matrix}\right.    \end{array} \end{align}\label{eq018} \tag{18}\]</span> <strong>普朗特数的物理意义为动量扩散率与热扩散率的相对大小</strong>，若 <span class="math inline">\(\operatorname{Pr} \ll 1\)</span>，则在流体的能量传递过程中，热扩散占主导；若 <span class="math inline">\(\operatorname{Pr} \gg 1\)</span>，则动量扩散占主导。气体的普朗特数一般接近 1（空气 <span class="math inline">\(\operatorname{Pr} \approx 0.7\)</span>），说明在气体的能量传递过程中动量扩散与热扩散的量级接近。</p><p>注意到，方程 <span class="math inline">\(\eqref{eq015}\)</span> 中的 <span class="math inline">\(U_{\infty}^{\ast 2} / c_{p}^{\ast} T_{\infty}^{\ast}\)</span> 项满足以下关系式 <span class="math display">\[\frac{U_{\infty}^{\ast 2}}{c_{p}^{\ast} T_{\infty}^{\ast}} = \frac{U_{\infty}^{\ast 2}}{\frac{1}{\gamma - 1} \gamma R T_{\infty}^{\ast}} = (\gamma - 1) \cdot \frac{U_{\infty}^{\ast 2}}{a_{\infty}^{\ast 2}} = (\gamma - 1) \operatorname{Ma}_{\infty}^{2} \label{eq019} \tag{19}\]</span></p><p>观察方程 <span class="math inline">\(\eqref{eq015}\)</span> 中的各项系数的组合形式，将上述关系式 <span class="math inline">\(\eqref{eq019}\)</span> 以及三个无量纲数 <span class="math inline">\(\eqref{eq012}, \eqref{eq016}, \eqref{eq017}\)</span> 代入该方程可得 <span class="math display">\[\begin{align}\begin{split}\rho \left[\frac{\partial T}{\partial t} + (\mathbf{u} \cdot \nabla) T \right] &amp; = (\gamma - 1) \operatorname{Ma}_{\infty}^{2}\left[\frac{\partial p}{\partial t} + (\mathbf{u} \cdot \nabla) p \right] + \frac{1}{\operatorname{Re} \operatorname{Pr}} \nabla\cdot(\kappa\nabla T) \\&amp; + \frac{(\gamma - 1) \operatorname{Ma}_{\infty}^{2} \mu}{2 \operatorname{Re}_{\infty}} \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right] \\&amp; \quad \quad \quad \quad \quad \quad \quad \;: \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right]\end{split}\end{align}\label{eq020} \tag{20}\]</span></p><p>以上无量纲方程 <span class="math inline">\(\eqref{eq020}\)</span> 包含三个无量纲数 <span class="math inline">\(\operatorname{Ma}_{\infty}, \; \operatorname{Re}_{\infty}, \; \operatorname{Pr}\)</span>。若保证这些无量纲数相同时，两个系统中能量传递的特征与规律一致。</p></li><li><p><strong>无量纲状态方程（nondimensional equation of state）与内能、焓的无量纲表达式</strong></p><p>将无量纲变量 <span class="math inline">\(\eqref{eq007}\)</span> 代入有量纲的状态方程 <span class="math display">\[\rho_{\infty}^{\ast} U_{\infty}^{\ast 2} \cdot p = (\rho_{\infty}^{\ast} \rho) R^{\ast} (T_{\infty}^{\ast} T) \label{eq021} \tag{21}\]</span> 方程两边同乘 <span class="math inline">\(1 / (\rho_{\infty}^{\ast} U_{\infty}^{\ast 2})\)</span> 可得 <span class="math display">\[p = \frac{R^{\ast} T_{\infty}^{\ast}}{U_{\infty}^{\ast 2}} \rho T = \frac{\rho T}{\frac{\gamma U_{\infty}^{\ast 2}}{\gamma R^{\ast} T_{\infty}^{\ast}}} = \frac{\rho T}{\gamma \frac{U_{\infty}^{\ast 2}}{a_{\infty}^{\ast 2}}} = \frac{\rho T}{\gamma \operatorname{Ma}_{\infty}^{2}} \label{eq022} \tag{22}\]</span> 上式 <span class="math inline">\(\eqref{eq022}\)</span> 即为无量纲的状态方程，可以观察到，无量纲后的气体常数为 <span class="math inline">\(R = 1 / (\gamma \operatorname{Ma}_{\infty}^{2})\)</span>，则内能与焓的无量纲表达式分别如下 <span class="math display">\[\begin{align}e &amp; = c_{v} T = \frac{1}{\gamma (\gamma - 1) \operatorname{Ma}_{\infty}^{2}} T \label{eq023} \tag{23}\\h &amp; = c_{p} T = e + \frac{p}{\rho} = \frac{1}{(\gamma - 1) \operatorname{Ma}_{\infty}^{2}} T \label{eq024} \tag{24}\end{align}\]</span> 由此可见，相比有量纲表达式，无量纲的状态方程与热力学变量仅改变了常系数值，而形式不变。</p></li><li><p><strong>无量纲萨瑟兰公式（nondimensional Sutherland's formula）</strong></p><p>定义无量纲萨瑟兰温度 <span class="math inline">\(C_{s} = S / T_{\infty}^{\ast}\)</span>，将无量纲变量 <span class="math inline">\(\eqref{eq007}\)</span> 代入有量纲公式（见专栏前文公式 (4)），可得无量纲公式 <span class="math display">\[\mu = T^{\frac{3}{2}} \left(\frac{1 + C_{s}}{T + C_{s}}\right) \label{eq025} \tag{25}\]</span></p></li></ul><h3 id="公式汇总与说明">公式汇总与说明</h3><p>综上推导，由方程 <span class="math inline">\(\eqref{eq009}, \eqref{eq013}, \eqref{eq020}, \eqref{eq022}\)</span>，可汇总得<strong>无量纲的可压缩流体基本方程组</strong>如下 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t} + \nabla \cdot(\rho \mathbf{u}) = 0, &amp; \text { 无量纲连续方程 } \\\rho\left[\frac{\partial \mathbf{u}}{\partial t} + (\mathbf{u} \cdot \nabla) \mathbf{u} \right] = - \nabla p + \frac{1}{\operatorname{Re}_{\infty}}\nabla \cdot \left[\mu \left((\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I}\right) \right] , &amp; \text { 无量纲运动方程 }  \\\begin{split}\rho \left[\frac{\partial T}{\partial t} + (\mathbf{u} \cdot \nabla) T \right] &amp; = (\gamma - 1) \operatorname{Ma}_{\infty}^{2}\left[\frac{\partial p}{\partial t} + (\mathbf{u} \cdot \nabla) p \right] + \frac{1}{\operatorname{Re}_{\infty} \operatorname{Pr}} \nabla\cdot(\kappa\nabla T) \\&amp; + \frac{(\gamma - 1) \operatorname{Ma}_{\infty}^{2} \mu}{2 \operatorname{Re}} \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right] \\&amp; \quad \quad \quad \quad \quad \quad \quad \;: \left[(\nabla \mathbf{u}) + (\nabla \mathbf{u})^{T} - \frac{2}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right]\end{split} &amp; \text { 无量纲能量方程 } \\p = \frac{\rho T}{\gamma \operatorname{Ma}_{\infty}^{2}}, \quad e = c_{v} T = \frac{1}{\gamma (\gamma - 1) \operatorname{Ma}_{\infty}^{2}} T, \quad h = c_{p} T = \frac{1}{(\gamma - 1) \operatorname{Ma}_{\infty}^{2}} T  &amp; \text { 无量纲的状态方程、内能、焓 }\end{array}\right. \label{eq026} \tag{26}\end{align}\]</span> 以上所有流场变量均不带上标 <span class="math inline">\(\ast\)</span>，表示均为已进行无量纲化后的变量形式，便于与原始有量纲上标带 <span class="math inline">\(\ast\)</span> 的变量区分。</p><p>值得注意的是，上述无量纲基本方程组中引入的三个无量纲数 <span class="math inline">\(\operatorname{Ma}_{\infty}, \; \operatorname{Re}_{\infty}, \; \operatorname{Pr}\)</span>，在物理上能够清晰地反映有关流体惯性运动、粘性运动与能量传递的特征。<strong>实际上，特征无量纲数是整个系统的关键。可以说，理解了无量纲数的物理图景，也就抓住了流体系统的本质。</strong>对于流体基本方程组开展无量纲化的过程，本质是通过一种合理的尺度“缩放”，找到不同流体系统的共同特征与内在联系。</p><p>另外，流体的理论、实验与计算研究中也广泛采用无量纲方程形式。在许多经典的流体力学理论与解答中，对于不同流体方程的无量纲化通常是一种“规范流程”，更常作为理论分析的首个步骤，不可或缺。若两个具有相似边界条件的流体系统中无量纲数保持一致，则两系统具有动力学相似性，可认为流动规律相似，这也是风洞实验的基本原理与必需条件。同时，在通过 CFD 数值模拟各种流动时，也常求解无量纲化的流体力学基本方程组，这种做法既能够简化编程框架、降低数据前处理难度，也在一定程度上提升了计算的稳定性与鲁棒性。</p><h2 id="结语">结语</h2><p>大家一定注意到，作为对方程组进行无量纲化获得的惊喜“硕果”，无量纲数大多数以人名命名。不管是以发现者命名，还是为纪念相关研究的伟大人物，所有无量纲数的背后，都凝结着人们的智慧与心血，都记录着振奋人心的传奇故事。事实上，在流体力学研究的璀璨星河中，许多未知的无量纲数仍在等待被学者们挖掘与探索，等待发挥它们的重要价值。</p><hr><p>以上就是本文全部内容，如有疑问，敬请大家批评指正！</p><p>相应文章也将发布在我的 <a href="https://www.zhihu.com/column/c_1477306597446213634">知乎专栏</a> 上。后续我会不定期更新本博客与专栏，欢迎大家关注！</p><hr><h2 id="参考文献">参考文献</h2><div id="refer-anchor-1"></div><ul><li>[1] Dimensional analysis https://en.wikipedia.ahmu.cf/wiki/Dimensional_analysis</li></ul><div id="refer-anchor-2"></div><ul><li>[2] Buckingham π theorem <a href="https://en.wikipedia.ahmu.cf/wiki/Buckingham_π_theorem">https://en.wikipedia.ahmu.cf/wiki/Buckingham_%CF%80_theorem</a></li></ul><div id="refer-anchor-3"></div><ul><li>[3] G. I. Taylor https://en.wikipedia.ahmu.cf/wiki/G._I._Taylorhttps://en.wikipedia.ahmu.cf/wiki/Buckingham</li></ul><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/08/11</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>流体小白学习笔记（一）——流体力学基本方程组</title>
    <link href="/2022/07/07/NS_Note_BasicEqns/"/>
    <url>/2022/07/07/NS_Note_BasicEqns/</url>
    
    <content type="html"><![CDATA[<h1 id="流体小白学习笔记一流体力学基本方程组">流体小白学习笔记（一）——流体力学基本方程组</h1><h2 id="前言">前言</h2><div class="note note-success">            <p>前排提示：大量公式预警 ~ 本文干货多多，欢迎小伙伴们点赞、收藏、转发！O(∩_∩)O</p>          </div><p>流体力学是一门古老而优美的学科。艺术家们描绘的流转星空、奔腾江河，科学家们研究的跳跃液滴、飞舞浪花，工程师们设计的大型飞机、运载火箭……在日常生活与工业生产中，随处可见流体力学的身影。描述流动规律，捕捉流体特征，解决流动难题，成为流体力学工作者们的毕生追求。</p><p><strong>流体力学基本方程组，是整座流体力学大厦的基石。</strong>理解并熟记基本方程组的数学表达与物理含义，是开展流体力学理论、实验和计算等各项研究的基础。</p><p>本文旨在给出流体力学基本方程组完整清晰的数学表达，包括流体力学领域最基本、最重要的控制方程——纳维-斯托克斯（Navier-Stokes, N-S）方程的具体形式，同时给出基本方程组的几种常见的变形与简化形式。相比其他类似科普文章，本文给出了更加详细的公式说明，适合相关专业人员阅读与收藏。</p><h2 id="流体力学基本方程组的数学表达1">流体力学基本方程组的数学表达<a href="#refer-anchor-1"><sup>[1]</sup></a></h2><p>根据<strong>质量守恒定律</strong>、<strong>动量定理</strong>、<strong>能量守恒定律</strong>以及<strong>黏性规律</strong>，能够导出关于运动流体所需满足的三大基本方程：连续性方程（continuity equation）、运动方程（momentum equations）、能量方程（energy equation）。这些方程再加上本构方程（constitutive equations）、状态方程（equation of state, EOS）以及内能（internal energy）和熵（entropy）的表达式，便构成了流体力学的基本方程组。</p><p>下面直接给出微分形式的流体力学基本方程组。写成<strong>应力矢量（stress vector）形式</strong>的流体力学基本方程组为 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t}+\nabla \cdot(\rho \mathbf{u})=0, &amp; \text { 连续性方程 } \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=\rho \boldsymbol{F}+\nabla \cdot \boldsymbol{P}, &amp; \text { 运动方程 } \\\rho \frac{\mathrm{D} e}{\mathrm{D} t}=\boldsymbol{P}: \boldsymbol{S}+ \nabla \cdot(\kappa \nabla T)+\rho \dot{q}, &amp; \text { 能量方程 } \\\boldsymbol{P}=-p \boldsymbol{I} + \boldsymbol{\Pi}=-p \boldsymbol{I}+2 \mu\left(\boldsymbol{S}-\frac{1}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right)+\mu^{\prime} (\nabla \cdot \mathbf{u}) \mathbf{I}, &amp; \text { 本构方程 } \\p=f(\rho, T), &amp; \text { 状态方程 }\end{array}\right. \label{eq001} \tag{1}\end{align}\]</span> 或写成应力张量（stress tensor）形式为 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t} + \frac{\partial(\rho u_{i})}{\partial x_{i}} = 0,\\\rho \frac{\mathrm{D} u_{i}}{\mathrm{D} \mathbf{t}} = \rho F_{i} + \frac{\partial p_{i j}}{\partial x_{j}},\\\rho \frac{\mathrm{D} e}{\mathrm{D} \mathbf{t}} = p_{i j} s_{j i} + \frac{\partial}{\partial x_{i}}(\kappa \frac{\partial T}{\partial x_{i}}) + \rho \dot{q},\\p_{i j} = - p \delta_{i j} + \pi_{i j} = - p \delta_{i j} + 2 \mu \left(s_{i j} - \frac{1}{3} s_{k k} \delta_{i j} \right) +\mu^{\prime}s_{k k} \delta_{i j},\\p = f(\rho, T),\\\end{array}\right. \label{eq002} \tag{2}\end{align}\]</span> 其中，<span class="math inline">\(i, j = 1, 2, 3\)</span>；速度矢量为 <span class="math inline">\(\mathbf{u} = [u,v,w]^{T}\)</span>，<span class="math inline">\(\boldsymbol{F}\)</span> 为体积力项（volumetric force term），<span class="math inline">\(\boldsymbol{P}\)</span> 为应力张量（stress tensor），<span class="math inline">\(\boldsymbol{\Pi}\)</span> 为偏应力张量（deviatoric stress tensor），<span class="math inline">\(\boldsymbol{S}\)</span> 为变形速率张量（tensor of deformation rate, symmetric），<span class="math inline">\(\boldsymbol{I}\)</span> 为单位矩阵（identity matrix），<span class="math inline">\(\dot{q}\)</span> 为热源项，其代表由于辐射或其他原因在单位时间内传入单位质量流体的热量；<span class="math inline">\(\rho\)</span> 为密度，<span class="math inline">\(p\)</span> 为压强，<span class="math inline">\(T\)</span> 为热力学温度； <span class="math inline">\(\mu\)</span> 为剪切或动力黏性系数（shear / dynamic viscosity），也称为第一粘性系数（first coefficient of viscosity），<span class="math inline">\(\mu^{\prime}\)</span> 为体积或膨胀粘度（volume / bulk viscosity），<span class="math inline">\(\kappa\)</span> 为导热系数（thermal conductivity），这三个系数均与温度 <span class="math inline">\(T\)</span> 有关，且体积或膨胀粘度 <span class="math inline">\(\mu^{\prime}\)</span> 满足 <span class="math display">\[\begin{align}\mu^{\prime} = \lambda + \frac{2}{3} \mu \label{eq003} \tag{3}\end{align}\]</span> 其中，<span class="math inline">\(\lambda\)</span> 为第二黏性系数（second coefficient of viscosity）。若斯托克斯假设（Stoke's assumption）成立，则有 <span class="math inline">\(\mu^{\prime} = 0\)</span>，而动力黏性系数 <span class="math inline">\(\mu\)</span> 可利用萨瑟兰公式（Sutherland's formula）进行估计，有以下关系式 <span class="math display">\[\begin{align}\mu=\mu_{\text{ref}}\left(\frac{T}{T_{\text{ref}}}\right)^{\frac{3}{2}} \frac{T_{\text{ref}}+S}{T+S} \label{eq004} \tag{4}\end{align}\]</span> 其中，<span class="math inline">\(T_{\text{ref}}\)</span> 为参考温度，<span class="math inline">\(\mu_{\text{ref}}\)</span> 为参考温度下的动力黏性系数，<span class="math inline">\(S\)</span> 为 Sutherland 温度。若考虑标准状态下的气体，则有 <span class="math inline">\(T_{\text{ref}} = T_{0} = 273.15 \; \text{K}\)</span>，<span class="math inline">\(\mu_{\text{ref}} = \mu_{0} = 1.716 \times 10^{- 5} \;\text{kg} \cdot \text{m}^{-1} \cdot \text{s}^{-1}\)</span>，<span class="math inline">\(S = 110.4 \; \text{K}\)</span>。若考虑流动介质为完全气体（perfect gas），则状态方程与内能和焓的表达式可表示为 <span class="math display">\[\begin{align}p &amp; = \rho R T \label{eq005} \tag{5} \\e &amp; = c_{v} T \label{eq006} \tag{6} \\h &amp; = c_{p} T \label{eq007} \tag{7}\end{align}\]</span> 其中，式 <span class="math inline">\(\eqref{eq005}\)</span> 为状态方程；式 <span class="math inline">\(\eqref{eq006}\)</span> 中 <span class="math inline">\(e\)</span> 为单位质量流体的内能，式 <span class="math inline">\(\eqref{eq007}\)</span> 中 <span class="math inline">\(h\)</span> 为单位质量流体的焓（enthalpy），并满足热力学关系式 <span class="math inline">\(h = e +p / \rho\)</span>；<span class="math inline">\(c_{v}\)</span> 为定容比热（specific heat capacity at constant volume），<span class="math inline">\(c_{p}\)</span> 为定压比热（specific heat capacity at constant pressure），<span class="math inline">\(R\)</span> 为气体常数，一般取 <span class="math inline">\(287 \; \text{J} \cdot \text{kg}^{-1} \cdot \text{K}^{-1}\)</span>。当流体温度不太高时，可近似认为 <span class="math inline">\(c_{v}, c_{p}\)</span> 为常数，满足 <span class="math display">\[\begin{align}c_{v} = \frac{1}{\gamma - 1} R \label{eq008} \tag{8} \\c_{p} = \frac{\gamma}{\gamma - 1} R \label{eq009} \tag{9}\end{align}\]</span> 其中，<span class="math inline">\(\gamma = c_{v} / c_{p}\)</span> 称为比热比（specific heat capacity ratio）或绝热指数，对于空气 <span class="math inline">\(\gamma \approx 1.4\)</span>。。另外，引入运动黏性系数（kinematic viscosity）<span class="math inline">\(\nu\)</span>，热扩散系数（thermal diffusivity）<span class="math inline">\(\alpha\)</span>，两者均可采用前述变量表示为如下形式 <span class="math display">\[\begin{align}\nu &amp; = \frac{\mu}{\rho} \label{eq010} \tag{10}\\\alpha &amp; = \frac{\kappa}{c_{p} \rho} \label{eq011} \tag{11}\end{align}\]</span> 综上所述，列出的基本方程组 <span class="math inline">\(\eqref{eq001}\)</span> 由 12 个方程组成（包括 1 个连续性方程、3 个运动方程、1 个能量方程、6 个本构方程、1 个状态方程），可以用来确定 <span class="math inline">\(\mathbf{u}, p, \rho, T, p_{xx}, p_{yy}, p_{zz}, p_{xy}, p_{yz}, p_{zx}\)</span> 这 12 个未知数，且增加的热力学变量内能或焓都有额外的温度关联式成立。由此可见，该微分形式的流体力学基本方程组是封闭的，理论上可以直接求解。</p><p>现考虑基本方程组 <span class="math inline">\(\eqref{eq001}\)</span> 的另一种形式，若将本构方程代入运动方程与能量方程，则可消去应力张量 <span class="math inline">\(\boldsymbol{P}\)</span> 。首先考虑 <span class="math inline">\(\eqref{eq001}\)</span> 运动方程中的最后一项（应力散度项），有 <span class="math display">\[\begin{align}\nabla \cdot \boldsymbol{P} &amp;=\frac{\partial p_{i j}}{\partial x_{j}}=\frac{\partial}{\partial x_{j}}\left[-p \delta_{i j}+2 \mu\left(s_{i j}-\frac{1}{3} s_{k k} \delta_{i j}\right)+\mu^{\prime} s_{k k} \delta_{i j}\right] \\&amp;=-\frac{\partial p}{\partial x_{i}}+\frac{\partial}{\partial x_{j}}\left[2 \mu\left(s_{i j}-\frac{1}{3} s_{k k} \delta_{i j}\right)\right]+\frac{\partial}{\partial x_{j}}\left(\mu^{\prime} s_{k k} \delta_{i j}\right) \quad \quad \text{（张量形式）}\\&amp;=-\nabla p+2 \nabla \cdot(\mu \boldsymbol{S})-\frac{2}{3} \nabla(\mu(\nabla \cdot \mathbf{u}))+\nabla\left(\mu^{\prime}(\nabla \cdot \mathbf{u})\right) \quad \quad \; \; \;\text{（矢量形式）} \\ \end{align} \label{eq012} \tag{12}\]</span> 其中，<span class="math inline">\(\nabla \cdot \boldsymbol{P}\)</span> 表示为单位体积上应力张量的散度，物理含义是与面力等效的体力分布函数。将式 <span class="math inline">\(\eqref{eq012}\)</span> 代入式 <span class="math inline">\(\eqref{eq001}\)</span> 中的运动方程可得 <span class="math display">\[\begin{align}\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=\rho \boldsymbol{F}-\nabla p+2 \nabla \cdot(\mu \boldsymbol{S})-\frac{2}{3} \nabla(\mu(\nabla \cdot \mathbf{u}))+\nabla\left(\mu^{\prime}(\nabla \cdot \mathbf{u})\right) \label{eq013} \tag{13}\end{align}\]</span> 由上文可知，第一与第二动力黏性系数 <span class="math inline">\(\mu\)</span> 与 <span class="math inline">\(\mu^{\prime}\)</span> 一般依赖于温度 <span class="math inline">\(T\)</span>，但若考虑温差很小的流场，则可近似认为两个黏性系数为常数，此时上式可进一步化为 <span class="math display">\[\begin{align}\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=\rho \boldsymbol{F}-\nabla p + \mu \Delta \mathbf{u} + \left(\mu^{\prime} + \frac{1}{3} \mu\right) \nabla (\nabla \cdot \mathbf{u}) \label{eq014} \tag{14}\end{align}\]</span></p><p>其次，考虑 <span class="math inline">\(\eqref{eq001}\)</span> 中能量方程右式第一项（应力功率项），有</p><p><span class="math display">\[\begin{align}\boldsymbol{P} : \boldsymbol{S} &amp; = p_{i j} s_{j i} = \left[- p \delta_{i j} + 2 \mu \left(s_{i j} - \frac{1}{3} s_{k k} \delta_{i j} \right) +\mu^{\prime}s_{k k} \delta_{i j}\right] s_{j i} \\&amp; = - p s_{k k} + 2 \mu \left(s_{i j} s_{j i} - \frac{1}{3} s_{k k}^{2}\right) + \mu^{\prime} s_{k k}^{2}  \quad \quad \quad \quad \quad \quad \quad \quad \quad \text{（张量形式）}\\&amp; = - p (\nabla \cdot \mathbf{u}) + 2 \mu \left(\boldsymbol{S} : \boldsymbol{S} - \frac{1}{3} (\nabla \cdot \mathbf{u})^{2}\right) + \mu^{\prime} (\nabla \cdot \mathbf{u})^{2} \\&amp; = - p (\nabla \cdot \mathbf{u}) + 2 \mu \boldsymbol{S} : \boldsymbol{S} + \left(\mu^{\prime} - \frac{2}{3} \mu\right) (\nabla \cdot \mathbf{u})^{2} \quad \quad \quad \quad \quad \quad \text{（矢量形式）} \end{align} \label{eq015} \tag{15}\]</span> 其中，<span class="math inline">\(\boldsymbol{P} : \boldsymbol{S}\)</span> 代表应力张量与变形速度张量的并矢，物理含义是由于流体变形后，应力（面力）所做的功的功率，其由三部分组成：第一部分是 <span class="math inline">\(- p (\nabla \cdot \mathbf{u})\)</span> ，代表当流体体积有相对膨胀或压缩时压强 <span class="math inline">\(p\)</span> 所做的功的功率；第二部分是 <span class="math inline">\(2 \mu \boldsymbol{S} : \boldsymbol{S} - 2 \mu (\nabla \cdot \mathbf{u})^{2}/3\)</span>，代表由剪切黏性在单位时间内所耗散的机械能；第三部分是 <span class="math inline">\(\mu^{\prime} (\nabla \cdot \mathbf{u})^{2}\)</span>，代表流体在膨胀时黏性在单位时间内所耗散的机械能。由黏性所耗散的机械能全部转化为热能，这是一个不可逆过程。令 <span class="math display">\[\begin{align}\Phi = 2 \mu \boldsymbol{S} : \boldsymbol{S} + \left(\mu^{\prime} - \frac{2}{3} \mu\right) (\nabla \cdot \mathbf{u})^{2} \label{eq016} \tag{16}\end{align}\]</span> 上式中的 <span class="math inline">\(\Phi\)</span> 称为耗散函数（dissipation function），其表征由于流体黏性而耗散的机械能。将式 <span class="math inline">\(\eqref{eq016}\)</span> 代入式 <span class="math inline">\(\eqref{eq015}\)</span> 可得 <span class="math display">\[\begin{align}\boldsymbol{P} : \boldsymbol{S} = - p (\nabla \cdot \mathbf{u}) + \Phi \label{eq017} \tag{17}\end{align}\]</span> 再将上式 <span class="math inline">\(\eqref{eq017}\)</span> 代入 <span class="math inline">\(\eqref{eq001}\)</span> 中的能量方程可得 <span class="math display">\[\begin{align}\rho \frac{\mathrm{D} e}{\mathrm{D} t} + p (\nabla \cdot \mathbf{u})= \Phi+ \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \label{eq018} \tag{18}\end{align}\]</span> 利用 <span class="math inline">\(\eqref{eq001}\)</span> 中的连续性方程可得 <span class="math display">\[\begin{align}p (\nabla \cdot \mathbf{u}) = - \frac{p}{\rho} \frac{\mathrm{D} \rho}{\mathrm{D} t} = \rho p \frac{\mathrm{D}}{\mathrm{D} t} \left(\frac{1}{\rho}\right) \label{eq019} \tag{19}\end{align}\]</span> 于是有 <span class="math display">\[\begin{align}\rho \left[\frac{\mathrm{D} e}{\mathrm{D} t} + p \frac{\mathrm{D}}{\mathrm{D} t} \left(\frac{1}{\rho}\right)\right] = \Phi+ \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \label{eq020} \tag{20}\end{align}\]</span> 根据热力学第二定律（second law of thermodynamics）可得 <span class="math display">\[\begin{align}T \mathrm{d}s = \mathrm{d} e + p \mathrm{d} \tau = \mathrm{d} e + p \mathrm{d} \left(\frac{1}{\rho}\right) = \mathrm{d} h - \frac{1}{\rho} \mathrm{d} p \label{eq021} \tag{21}\end{align}\]</span> 其中，<span class="math inline">\(s\)</span> 为热力学定义的熵，<span class="math inline">\(\tau = 1 / \rho\)</span> 为单位质量流体的体积。则式 <span class="math inline">\(\eqref{eq020}\)</span> 可改写为 <span class="math display">\[\begin{align}\rho \frac{\mathrm{D} h}{\mathrm{D} t} = \frac{\mathrm{D} p}{\mathrm{D} t} + \Phi + \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \label{eq022} \tag{22}\end{align}\]</span> 或 <span class="math display">\[\begin{align}\rho T \frac{\mathrm{D} s}{\mathrm{D} t} = \Phi + \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \label{eq023} \tag{23}\end{align}\]</span> 因此，根据式 <span class="math inline">\(\eqref{eq013}, \eqref{eq022}\)</span> ，可进一步化简微分形式的流体力学基本方程组，最终得到 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t}+\nabla \cdot(\rho \mathbf{u})=0, &amp; \text { 连续性方程 } \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t}=\rho \boldsymbol{F}-\nabla p+2 \nabla \cdot(\mu \boldsymbol{S})-\frac{2}{3} \nabla(\mu(\nabla \cdot \mathbf{u}))+\nabla\left(\mu^{\prime}(\nabla \cdot \mathbf{u})\right) \\\; \; \; \overset{\mu, \;\mu^{\prime} = \text{const.}}{=}\rho \boldsymbol{F}-\nabla p + \mu \Delta \mathbf{u} + \left(\mu^{\prime} + \frac{1}{3} \mu\right) \nabla (\nabla \cdot \mathbf{u}), &amp; \text { 运动方程（Navier-Stokes 方程） } \\\rho \frac{\mathrm{D} h}{\mathrm{D} t} = \frac{\mathrm{D} p}{\mathrm{D} t} + \Phi + \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \\or \quad \rho T \frac{\mathrm{D} s}{\mathrm{D} t} = \Phi + \nabla \cdot(\kappa \nabla T)+\rho \dot{q}, &amp; \text { 能量方程 } \\\boldsymbol{P}=-p \boldsymbol{I} + \boldsymbol{\Pi}=-p \boldsymbol{I}+2 \mu\left(\boldsymbol{S}-\frac{1}{3} (\nabla \cdot \mathbf{u}) \boldsymbol{I} \right)+\mu^{\prime} (\nabla \cdot \mathbf{u}) \mathbf{I}, &amp; \text { 本构方程 } \\p=f(\rho, T), &amp; \text { 状态方程 }\end{array}\right. \label{eq024} \tag{24}\end{align}\]</span> 其中，耗散函数 <span class="math inline">\(\Phi\)</span> 由式 <span class="math inline">\(\eqref{eq016}\)</span> 确定。求解该封闭方程组时，可分步求解：首先不考虑本构方程，求解 <span class="math inline">\(\mathbf{u}, p, \rho, T\)</span>；再将各流动变量代入本构方程中，即可得到应力张量的各个分量。方程组 <span class="math inline">\(\eqref{eq024}\)</span> 中的运动方程即称为<strong>纳维-斯托克斯（Navier-Stokes, N-S）方程，这是流体力学领域最基本、最重要的控制方程，其本质是牛顿第二定律的一种变形</strong>。</p><h2 id="几种常见的变形与简化形式">几种常见的变形与简化形式</h2><p>下面给出微分形式的流体力学基本方程组的几种变形与简化形式。</p><p><strong>黏性不可压缩流体情形</strong></p><p>考虑流体处于不可压缩状态（一般认为流动马赫数 <span class="math inline">\(Ma &lt; 0.3\)</span>），则有 <span class="math inline">\(\mathrm{D} \rho / \mathrm{D}t = 0\)</span>；由于流速较低时温差较小，一般可认为 <span class="math inline">\(\mu\)</span> 为常数，此时基本方程组变为 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\nabla \cdot \mathbf{u} = 0 \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t} = \rho \boldsymbol{F}-\nabla p + \mu \Delta \mathbf{u} \\\rho \frac{\mathrm{D} h}{\mathrm{D} t} = \frac{\mathrm{D} p}{\mathrm{D} t} + \Phi + \nabla \cdot(\kappa \nabla T)+\rho \dot{q} \\\boldsymbol{P}=-p \boldsymbol{I}+2 \mu \boldsymbol{S} \\p = \rho R T\end{array}\right. \label{eq025} \tag{25}\end{align}\]</span> 其中，运动方程、能量方程与本构方程已经采用连续性方程得到的无散条件（<span class="math inline">\(\nabla \cdot \mathbf{u} = 0\)</span>）进行化简。这里注意区分以下定义：</p><ul><li><strong>不可压缩流体</strong>指的是流体微团的密度在随体运动中保持不变，即其随体导数为零，流体微团体积不变，而当地密度与流场密度梯度有可能发生变化；</li><li>定常（<span class="math inline">\(\partial / \partial t = 0\)</span>）、不可压缩（<span class="math inline">\(\mathrm{D} \rho / \mathrm{D}t = 0\)</span>）流体满足 <span class="math inline">\(\mathbf{u} \cdot \nabla \rho = u_{i} \cdot \partial \rho/ \partial x_{i} = 0\)</span>；</li><li>均匀（<span class="math inline">\(\partial \rho/ \partial x_{i} = 0\)</span>）、不可压缩（<span class="math inline">\(\mathrm{D} \rho / \mathrm{D}t = 0\)</span>）的流体密度为常数，即有 <span class="math inline">\(\rho = \text{const.}\)</span>。</li></ul><p><strong>理想不可压缩流体情形（不可压缩型欧拉方程，imcompressible Euler equation）</strong></p><p>考虑流体为理想或无黏（<span class="math inline">\(\mu = 0\)</span>）且不可压缩的，则可进一步化简式 <span class="math inline">\(\eqref{eq025}\)</span> 得到 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\nabla \cdot \mathbf{u} = 0 \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t} = \rho \boldsymbol{F}-\nabla p \\\end{array}\right. \label{eq026} \tag{26}\end{align}\]</span> <strong>理想可压缩流体情形（可压缩型欧拉方程，compressible Euler equation）</strong></p><p>考虑流体为理想绝热，即等熵（isentropic）的完全气体，此时基本方程组变为 <span class="math display">\[\begin{align}\left\{\begin{array}{ll}\frac{\partial \rho}{\partial t}+\nabla \cdot(\rho \mathbf{u})=0 \\\rho \frac{\mathrm{D} \mathbf{u}}{\mathrm{D} t} = \rho \boldsymbol{F}-\nabla p \\\frac{\mathrm{D} s}{\mathrm{D} t} = 0 \quad or \quad \frac{\mathrm{D}}{\mathrm{D} t} \left(\frac{p}{\rho^{\gamma}}\right) = 0 \\p = \rho R T\end{array}\right. \label{eq027} \tag{27}\end{align}\]</span> <strong>特别适用于计算流体力学（Computational Fluid Dynamics, CFD）的守恒型（conservation）控制方程形式</strong><a href="#refer-anchor-2"><sup>[2]</sup></a></p><p><em>以下内容部分参考 John D. Anderson, JR. 《计算流体力学入门》2.10节。</em>守恒型的控制方程，包括连续性方程、动量方程、能量方程均可以表示成统一的形式，有助于简化和组织给定计算程序的逻辑结构。注意，守恒型控制方程的左端都有一个散度项（divergence），其涉及某些物理量的通量（flux），例如：</p><ul><li>质量通量（mass flux）： <span class="math inline">\(\rho \mathbf{u}\)</span>；</li><li><span class="math inline">\(x, y, z\)</span> 方向上的动量通量（momentum flux in <span class="math inline">\(x, y, z\)</span> - direction）：<span class="math inline">\(\rho u \mathbf{u}, \rho v \mathbf{u}, \rho w \mathbf{u}\)</span>；</li><li>总能（内能 + 动能）通量（total energy flux）：<span class="math inline">\(\rho \left(e + V^{2} / 2\right) \mathbf{u}\)</span>，其中 <span class="math inline">\(V = \left | \mathbf{u} \right |\)</span> 为速度矢量大小；</li></ul><p>则可将基本方程组中的守恒型控制方程表示为统一的形式，在正交直角坐标系（三维）下，可由以下式子给出 <span class="math display">\[\begin{align}\frac{\partial \mathbf{U}}{\partial t} + \frac{\partial \mathbf{F}_{1}}{\partial x} + \frac{\partial \mathbf{F}_{2}}{\partial y} + \frac{\partial \mathbf{F}_{3}}{\partial z} = \mathbf{J} + \frac{\partial \mathbf{F}_{V1}}{\partial x} + \frac{\partial \mathbf{F}_{V2}}{\partial y} + \frac{\partial \mathbf{F}_{V3}}{\partial z} \label{eq028} \tag{28}\end{align}\]</span> 其中，<span class="math inline">\(\mathbf{F}_{1}, \mathbf{F}_{2}, \mathbf{F}_{3}\)</span> 代表无黏通量项（inviscid flux）； <span class="math inline">\(\mathbf{F}_{V1}, \mathbf{F}_{V2}, \mathbf{F}_{V3}\)</span> 代表黏性通量项（viscid flux）；<span class="math inline">\(\mathbf{J}\)</span> 代表源项（若体积力和热源被忽略，则该项为零）；<span class="math inline">\(\mathbf{U}\)</span> 为解向量，采用列向量表示的各项表达式如下： <span class="math display">\[\begin{align}\mathbf{U} &amp; =\begin{bmatrix}\rho \\\rho u \\\rho v \\\rho w \\\rho \left(e + \frac{V^{2}}{2}\right)\end{bmatrix}^{\mathrm{T}} \label{eq029} \tag{29}\\\mathbf{F}_{1} &amp; =\begin{bmatrix}\rho u \\\rho u^{2} + p \\\rho v u \\\rho w u \\\left[\rho \left(e + \frac{V^{2}}{2}\right) + p\right] u\end{bmatrix}^{\mathrm{T}} \label{eq030} \tag{30} \\\mathbf{F}_{2} &amp; =\begin{bmatrix}\rho v \\\rho u v \\\rho v^{2} + p \\\rho w v \\\left[\rho \left(e + \frac{V^{2}}{2}\right) + p\right] v\end{bmatrix}^{\mathrm{T}} \label{eq031} \tag{31} \\\mathbf{F}_{3} &amp; =\begin{bmatrix}\rho w \\\rho u w \\\rho v w \\\rho w^{2} + p \\\left[\rho \left(e + \frac{V^{2}}{2}\right) + p\right]w\end{bmatrix}^{\mathrm{T}} \label{eq032} \tag{32}\\\mathbf{F}_{V1} &amp; =\begin{bmatrix}0 \\\pi_{1 1} \\\pi_{1 2} \\\pi_{1 3} \\u \pi_{1 1} + v \pi_{1 2} + w \pi_{1 3} + \kappa \frac{\partial T}{\partial x}\end{bmatrix}^{\mathrm{T}} \label{eq033} \tag{33} \\\mathbf{F}_{V2} &amp; =\begin{bmatrix}0 \\\pi_{2 1} \\\pi_{2 2} \\\pi_{2 3} \\u \pi_{2 1} + v \pi_{2 2} + w \pi_{2 3} + \kappa \frac{\partial T}{\partial y}\\\end{bmatrix}^{\mathrm{T}} \label{eq034} \tag{34} \\\mathbf{F}_{V3} &amp; =\begin{bmatrix}0 \\\pi_{3 1} \\\pi_{3 2} \\\pi_{3 3} \\u \pi_{3 1} + v \pi_{3 2} + w \pi_{3 3} + \kappa \frac{\partial T}{\partial z}\end{bmatrix}^{\mathrm{T}} \label{eq035} \tag{35} \\\mathbf{J} &amp; =\begin{bmatrix}0 \\\rho f_{x} \\\rho f_{y} \\\rho f_{z} \\\rho (u f_{x} + v f_{y} + w f_{z}) + \rho \dot{q}\end{bmatrix}^{\mathrm{T}} \label{eq036} \tag{36} \\\end{align}\]</span> 其中，单位质量流体的内能 <span class="math inline">\(e\)</span> 可根据式 <span class="math inline">\(\eqref{eq006}\)</span> 计算，系统状态方程为 <span class="math inline">\(\eqref{eq005}\)</span>；偏应力项 <span class="math inline">\(\pi_{i j} = 2 \mu \left(s_{i j} - \frac{1}{3} s_{k k} \delta_{i j} \right) +\mu^{\prime}s_{k k} \delta_{i j}\)</span>，若考虑斯托克斯假设成立，则有 <span class="math inline">\(\mu^{\prime} = 0\)</span>，故偏应力张量各分量在正交直角坐标系下的表达式为 <span class="math display">\[\begin{align}\pi_{1 1} &amp; = 2 \mu \frac{\partial u}{\partial x} - \frac{2}{3} \mu \left(\frac{\partial u}{\partial x} + \frac{\partial v}{\partial y} + \frac{\partial w}{\partial z}\right) \label{eq037} \tag{37} \\\pi_{2 2} &amp; = 2 \mu \frac{\partial v}{\partial y} - \frac{2}{3} \mu \left(\frac{\partial u}{\partial x} + \frac{\partial v}{\partial y} + \frac{\partial w}{\partial z}\right) \label{eq038} \tag{38} \\\pi_{3 3} &amp; = 2 \mu \frac{\partial w}{\partial z} - \frac{2}{3} \mu \left(\frac{\partial u}{\partial x} + \frac{\partial v}{\partial y} + \frac{\partial w}{\partial z}\right) \label{eq039} \tag{39} \\\pi_{1 2} = \pi_{2 1} &amp; = \mu \left(\frac{\partial v}{\partial x} + \frac{\partial u}{\partial y}\right) \label{eq040} \tag{40} \\\pi_{2 3} = \pi_{3 2} &amp; = \mu \left(\frac{\partial w}{\partial y} + \frac{\partial v}{\partial z}\right) \label{eq041} \tag{41} \\\pi_{3 1} = \pi_{1 3} &amp; = \mu \left(\frac{\partial u}{\partial z} + \frac{\partial w}{\partial x}\right) \label{eq042} \tag{42} \\\end{align}\]</span> 将式 <span class="math inline">\(\eqref{eq029} \sim \eqref{eq036}\)</span> 各通量项的每一项代入式 <span class="math inline">\(\eqref{eq028}\)</span> 并相加，便可以重构整个流体力学基本方程组。注意，该非定常流动方程组考虑了流体的黏性与可压缩性。</p><p>在进行数值模拟时，若将整个流场进行网格离散，并给定边界条件与初始条件，则可以首先求得上述无黏通量与黏性通量中的各个分量，再通过时间推进方式数值求解得到每一个网格点的解向量 <span class="math inline">\(\mathbf{U} = [U_{1}, U_{2}, U_{3}, U_{4}, U_{5}]^{\mathrm{T}}\)</span>，并最终能够很容易地得到该时刻该网格点上的原始变量 <span class="math inline">\([\rho, u, v, w, e]^{\mathrm{T}}\)</span>，即有 <span class="math display">\[\begin{align}\rho &amp; = U_{1} \label{eq043} \tag{43} \\u &amp; = \frac{U_{2}}{U_{1}} \label{eq044} \tag{44} \\v &amp; = \frac{U_{3}}{U_{1}} \label{eq045} \tag{46} \\w &amp; = \frac{U_{4}}{U_{1}} \label{eq047} \tag{47} \\e &amp; = \frac{U_{5}}{U_{1}} - \frac{u^{2} + v^{2} + w^{2}}{2} \label{eq048} \tag{48}\end{align}\]</span> 迭代以上过程，直到各个网格处的流场变量收敛至预期值，最终能够获得整个流场变量信息。</p><p>值得注意的是，以上基本方程组均是有量钢的，而实际在通过 CFD 数值模拟各种流动时，常采用求解无<strong>量纲化的流体力学基本方程组</strong>，以提升计算的稳定性与鲁棒性。</p><p><strong><em>有关可压缩 Navier-Stokes 方程组无量纲化过程详见本专栏中的后续文章，敬请期待！</em></strong></p><hr><p>以上就是本文全部内容，如有疑问，敬请大家批评指正！</p><p>相应文章也将发布在我的 <a href="https://www.zhihu.com/column/c_1477306597446213634">知乎专栏</a> 上。后续我会不定期更新本博客与专栏，欢迎大家关注！</p><hr><h2 id="参考文献">参考文献</h2><div id="refer-anchor-1"></div><ul><li>[1] 吴望一. 流体力学 上册[M]. 北京大学出版社, 1982.</li></ul><div id="refer-anchor-2"></div><ul><li>[2] John D. Anderson, JR. 计算流体力学入门[M]. 清华大学出版社, 2010.</li></ul><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/07/07</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>湍流数据同化程序（DATF）使用说明 v1.0</title>
    <link href="/2022/06/24/DATF/"/>
    <url>/2022/06/24/DATF/</url>
    
    <content type="html"><![CDATA[<h1 id="郑重声明">郑重声明</h1><div class="note note-warning">            <p><font color="red"><strong>请注意：本程序测试平台采用 In-house CFD codes，无法开源，故用户需要自己提供主程序端口，本程序仅提供湍流数据同化框架。</strong></font></p><p><font color="red"><strong>本仓库中的所有关于数据同化核心代码全部由作者原创，遵守 MIT License 协议。任何形式的转发引用请务必注意标明出处！请尊重作者劳动成果！</strong></font></p>          </div><hr><div class="note note-success">            <p><font color="blue"><strong>本仓库为西北工业大学航空学院 2021 届本科毕业设计论文《翼型绕流的数据同化方法研究》源程序</strong></font></p><p><font color="blue"><strong>该论文获得 2021 年全国高校航空航天类专业本科毕业设计成果交流会个人项目一等奖。</strong></font></p>          </div><h1 id="data-assimilation-program-for-turbulent-flows-datf-version-1.0-v1.0">Data assimilation program for turbulent flows (DATF) Version 1.0 (v1.0)</h1><h1 id="程序介绍">0 程序介绍</h1><p><strong>程序名称：Data assimilation program for turbulent flows (DATF) 湍流数据同化程序</strong></p><p>**Github 仓库：[点我传送 O(∩_∩)O ~](https://github.com/pkufzh/DATF_Release)**</p><p><strong>作者：北京大学工学院 2021 级博士生，西北工业大学航空学院 2017 级本科生 冯铮浩</strong></p><p><strong>联系邮箱：pkufzh@stu.pku.edu.cn</strong></p><h1 id="程序整体框架">1 程序整体框架</h1><p>​ 本文介绍基于广义滤波方法的湍流数据同化通用程序，主要由前处理模块、同化算法模块与后处理模块三部分组成。程序提供了实验数据与求解器外部接口，预期可用于融合实验与计算结果的实时流场状态估计。目前程序整体框架为 MATLAB（主要用于实现流程算法）与外部计算流体力学（CFD）程序或软件（主要用于调用求解）的组合模式，程序框架初步搭建完毕，各子程序与函数已完成封装，可根据需求便捷修改参数后，快速启动同化算例，且能实现单核 CFD 求解器并行窗口运行。程序整体框架如图 1-1 所示。</p><p><img src="/2022/06/24/DATF/Framework.png" alt="img" style="zoom: 50%;"></p><center><font size="3.5"> 图 1-1 基于广义滤波同化方法的通用程序框架示意图 </font></center><h1 id="程序概况">2 程序概况</h1><p>​ 本湍流数据同化程序概况如图 2-1 所示。下面对程序包含的文件与文件夹及其功能进行介绍。</p><p>​ <strong>源代码存放目录：Release_DATF_ETKF_Airfoil_Beta</strong></p><p><img src="/2022/06/24/DATF/Program Description.png" alt="img" style="zoom:80%;"></p><center><font size="3.5"> 图 2-1 湍流数据同化程序概况 </font></center><p>​ 在以下运行环境中，MATLAB主程序 + 封装CFD求解器 算例测试通过：</p><ul><li>操作系统：<em>Windows 10 64-bit</em>；</li><li>数值软件：<em>MATLAB R2017a</em> (及以上版本均可)；</li><li>CFD 求解器：如 GFSI 、风雷、 CFL3D 等按照一定规则修改后可直接植入。<strong>注意：本程序测试平台采用 In-house CFD codes，无法开源，故用户需要自己提供主程序端口，本程序仅提供湍流数据同化框架。</strong></li></ul><h2 id="数据同化主程序">2.1 数据同化主程序</h2><ul><li><p><font color="red"><strong><em>DA_EnKF_ETKF_Parallel_Common.m</em></strong></font></p><p><strong>数据同化主程序。</strong>功能：利用广义滤波方法，结合实验数据，实现对翼型绕流等算例的数据同化。</p><p>本程序的同化算法可根据算例特点，选用集合卡尔曼滤波（EnKF）或集合变换卡尔曼滤波（ETKF）。</p></li></ul><h2 id="辅助子函数">2.2 辅助子函数</h2><ul><li><p><font color="#FF00FF"><strong><em>State_Ensem_Gen_Parellel_Common_Beta_BL.m</em></strong></font></p><p><strong>（主要函数）</strong>功能：实现数据同化集合成员的初始化（并窗口运行）</p></li><li><p><font color="#FF00FF"><strong><em>State_Ensem_Renew_Parellel_Common_Beta_BL.m</em></strong></font></p><p><strong>（主要函数）</strong>功能：实现数据同化内迭代过程的预测步（并窗口运行）</p></li><li><p><font color="#FF00FF"><strong><em>State_Ensem_Recal_New_Common_Beta_BL.m</em></strong></font></p><p><strong>（主要函数）</strong>功能：实现数据同化流场重计算</p></li><li><p><font color="#87CEFA"><strong><em>DA_Extension_Airfoil_Interpolation.m</em></strong></font></p><p>功能：（翼型）外形（输出）插值函数</p></li><li><p><font color="#87CEFA"><strong><em>DA_Extension_NonAirfoil_Interpolation.m</em></strong></font></p><p>功能：（非翼型）算例外形（输出）插值函数</p></li><li><p><font color="#87CEFA"><strong><em>DA_Va_Airfoil_Ref_Adjustment_and_Visulization.m</em></strong></font></p><p>功能：（翼型）对计算压力系数曲线节点编号进行梳理，并实时输出当前同化轮次压力分布曲线</p></li><li><p><font color="#87CEFA"><strong><em>DA_Extension_NonAirfoil_Interpolation.m</em></strong></font></p><p>功能：（非翼型）对计算压力系数曲线节点编号进行梳理，并实时输出当前同化轮次压力分布曲线</p></li><li><p><font color="#87CEFA"><strong><em>Region_Beta_Dots_Selected.m</em></strong></font></p><p>功能：在开启区域数据同化后，对所选定区域内的网格单元进行平面随机采样</p></li><li><p><font color="#87CEFA"><strong><em>shadedplot.m</em></strong></font></p><p>功能：辅助绘制包络阴影区域 ## 2.3 外部数据 &amp; 封装CFD求解器</p></li><li><p><font color="blue"><strong><em>文件夹：Input_Data</em></strong></font></p><p>用于存放实验数据文件，包括翼型表面压力系数分布、边界层速度型等，以及翼型外形数据文件。</p></li><li><p><font color="blue"><strong><em>文件夹：Program_CFD_Base</em></strong></font></p><p>用于存放封装后的 CFD 求解器，包括 Input 输入参数文件夹，Output 输出结果文件夹，CFD 头文件文件夹， 网格转换程序，求解主程序，以及批处理文件等。</p></li></ul><h1 id="程序说明">3 程序说明</h1><h2 id="参数设置与前处理模块">3.1 参数设置与前处理模块</h2><h3 id="主要功能说明">3.1.1 主要功能说明</h3><p>​ 本模块主要功能是对集合成员与同化流程进行设置。根据算例具体要求，在设置集合成员部分，能够指定集合成员变量、集合成员数量、集合扰动区间；在设置同化流程部分，能够指定状态变量、设计同化区域、选择同化算法、设置程序并行，另外本模块可对整个湍流数据同化流程的关键参数进行调整与控制。</p><h3 id="详细代码说明">3.1.2 详细代码说明</h3><p>​ 下面对参数设置与前处理模块进行详细代码说明。通常，对于一个新的数据同化算例，只需要修改该部分输入参数即可。</p><ul><li><strong><font color="red">设置全局续算开关</font></strong><ul><li>可默认 flag_da_xusuan = 0 不开启续算，则程序从全部初始化状态开始计算。若开启续算，即 flag_da_xusuan = 2，则需要指定同化中断轮次 - <em>p</em>，跳过集合成员初始化阶段，开始续算。</li></ul></li></ul><p><em>对应程序段：</em></p><figure class="highlight matlab"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">%% 设置同化程序全局续算开关</span><br>flag_da_xusuan=<span class="hljs-number">0</span>; <span class="hljs-comment">% 设置是否进行全同化程序续算</span><br>                  <span class="hljs-comment">% 0 - 不开启续算；</span><br>                  <span class="hljs-comment">% 1 - 开启中断续算，可导入任意中断后保存.mat文件后自由调整同化参数，开始进行续算；</span><br>                  <span class="hljs-comment">% 2 - 直接定位至指定同化轮数 p 的保存文件，开始续算；</span><br><span class="hljs-comment">%% 初始化操作</span><br><span class="hljs-comment">% 若不开启续算，则清理所有工作区变量</span><br><span class="hljs-keyword">if</span> (flag_da_xusuan==<span class="hljs-number">0</span>)<br>    clear all<br>    clc<br>    clf<br>    close all<br>    flag_da_xusuan=<span class="hljs-number">0</span>;<br>    p=<span class="hljs-number">0</span>; <span class="hljs-comment">% 初始化同化轮数 p</span><br><span class="hljs-keyword">elseif</span> (flag_da_xusuan==<span class="hljs-number">2</span>)<br>    clear all<br>    flag_da_xusuan=<span class="hljs-number">2</span>;<br>    p=<span class="hljs-number">1</span>; <span class="hljs-comment">% 定位至指定同化轮数 p，继续同化</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><ul><li><strong><font color="red">设置主要文件交互与并行相关参数</font></strong></li><li>通常仅需根据算例修改 <strong><em>savename</em></strong> 字符串，重命名结果根文件夹即可，其他各路径名称可保持默认。</li><li>在根文件夹下，存放所有结果文件，其中 <strong><em>DA_CompInfo_Brief.dat</em></strong> 保存同化过程的所有提示信息。</li><li>由于可能采用的 CFD 程序仅能调用单线程进行计算，故本程序通过实现多窗口运行，来同时计算多个集合成员状态，以提升计算效率。实际可根据工作机线程数，设置并行线程/分组数 <strong><em>PPNS</em></strong>。需要注意的是：这种处理方式并不是真正实现程序并行（例如：mpi / OpenMP），同时考虑多开程序，会导致内存占用较大、线程切换效率损失较高，故推荐设置的并行线程 / 分组数为总线程数的50%~75%。</li></ul><p><em>对应程序段：</em></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% ------------  设置主要文件交互与并行相关参数 START ------------ %</span><br><br><span class="hljs-comment">% 设置数据交互路径</span><br>savename=<span class="hljs-string">&#x27;Results_20210604_Case_S809_AoA_12.2_Nmax_120_P_199_DA_58_Beta&#x27;</span>;<br>ddir_recal=(<span class="hljs-string">&#x27;Program_NWind2D_Parallel_Recal&#x27;</span>);  <span class="hljs-comment">% 设置重计算路径</span><br>ddir_post=(<span class="hljs-string">&#x27;Program_NWind2D_Parallel_Post&#x27;</span>);    <span class="hljs-comment">% 设置结果后处理路径</span><br>new_output_folder=[<span class="hljs-string">&#x27;.\&#x27;</span>,savename,<span class="hljs-string">&#x27;\&#x27;</span>];<br><br><span class="hljs-comment">% 若不开启续算开关，则直接建立新文件夹，保存计算结果</span><br><span class="hljs-keyword">if</span> (flag_da_xusuan==<span class="hljs-number">0</span>)<br>    mkdir(new_output_folder);<br>    mkdir([<span class="hljs-string">&#x27;.\Output_Figures\&#x27;</span>,savename]);<br><span class="hljs-keyword">end</span><br><span class="hljs-comment">% 若开启指定续算开关：直接定位至指定同化轮数 p 的保存文件，开始续算（注意：指定同化轮数必须已经计算完毕）；</span><br><span class="hljs-keyword">if</span> (flag_da_xusuan==<span class="hljs-number">2</span>)<br>    load([new_output_folder,savename,<span class="hljs-string">&#x27;_S_Va_pre_restart_&#x27;</span>,num2str(p,<span class="hljs-string">&#x27;%03d&#x27;</span>),<span class="hljs-string">&#x27;.mat&#x27;</span>]);<br><span class="hljs-keyword">end</span><br><span class="hljs-comment">% 重启/续算模块设置完毕</span><br><br>targetPath=new_output_folder;<br>initPath=<span class="hljs-string">&#x27;Init_Ensemble_Member&#x27;</span>;<br><br><span class="hljs-comment">% 打开记录程序信息文件</span><br>fid_info=fopen([new_output_folder,<span class="hljs-string">&#x27;DA_CompInfo_Brief.dat&#x27;</span>],<span class="hljs-string">&#x27;w+&#x27;</span>);<br>fid_all=fopen([new_output_folder,<span class="hljs-string">&#x27;DA_CompInfo_Detailed.dat&#x27;</span>],<span class="hljs-string">&#x27;w+&#x27;</span>);<br><br><span class="hljs-comment">% 设置并行线程/分组数（可根据工作机线程设置）</span><br>PPNS=<span class="hljs-number">4</span>;<br><br><span class="hljs-comment">% -------------  设置主要文件交互与并行相关参数 END ------------- %</span><br></code></pre></td></tr></table></figure><ul><li><strong><font color="red">设置生成初始集合成员相关参数</font></strong></li><li>设置初始扰动变量模块：定义变量名称 <strong><em>turbName</em></strong> （可设置为湍流常数、马赫数 Ma、迎角 AoA等）；指定输入参数文件的相对路径 FilePath 、修改行数 ModiLine 、修改格式 ModiFormat ；指定初始扰动变量扰动区间。</li><li>利用拉丁超立方抽样方法进行初始扰动变量采样。</li><li>设置目标同化变量模块：定义变量名称 <strong><em>targetName</em></strong>（可设置为涡粘系数、马赫数 Ma、迎角 AoA等）；说明目标同化变量类型 TypeTurb 与 TypeDA 。</li><li>设置同化观测变量模块：定义变量名称 <strong><em>refName</em></strong>（可设置为压力系数分布 Cp、摩擦阻力系数分布 Cf、边界层速度型 BL等）。<ul><li>若目标观测变量为 Cp, Cf, yplus：设置参与同化过程的翼型数据点编号，建立同化数据点序号数组 <strong><em>num_da_arr</em></strong>，可根据重点区域进行标志。</li><li>若目标观测变量为边界层速度型，则需要指定边界层站位数量、导入各站位观测信息（<span class="math inline">\(y /c\)</span> , <span class="math inline">\(u / u_{ref}\)</span>）、各站位处边界层同化位置。</li></ul></li></ul><p><em>对应程序段：</em></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% -------------  设置主要文件交互与并行相关参数 END ------------- %</span><br><br><span class="hljs-comment">% -------------  设置生成初始集合成员相关参数 START ------------- %</span><br><br><span class="hljs-comment">% 定义集合成员最大数量（注意：实际的 N_new ≤ N）</span><br>N_max=<span class="hljs-number">120</span>;<br><br><span class="hljs-comment">% ----------  指定初始扰动变量、目标同化变量、同化观测变量模块 START ---------- %</span><br><br><span class="hljs-comment">% ① 指定初始扰动变量模块（目前默认为单变量扰动）</span><br><span class="hljs-comment">% 算例标准状态设置</span><br><span class="hljs-comment">% 定义初始扰动变量名称、文件路径、修改行数、修改格式（均用数组表示，一一对应）</span><br><span class="hljs-comment">% 初始扰动变量名称</span><br>S_Va_turb_Name=[<span class="hljs-string">&quot;Cb1&quot;</span>,<span class="hljs-string">&quot;Sigma&quot;</span>,<span class="hljs-string">&quot;Cv1&quot;</span>,<span class="hljs-string">&quot;CKS&quot;</span>];<br><span class="hljs-comment">% S_Va_turb_Name=[&quot;Beta&quot;];</span><br>S_Va_turb_CharName=char(S_Va_turb_Name);<br><span class="hljs-comment">% 初始扰动变量类型：0 - 常数变量及其组合；1 - 空间分布变量</span><br>S_Va_turb_Type=<span class="hljs-number">0</span>;<br><span class="hljs-comment">% 初始扰动变量个数</span><br>S_Va_turb_Num=<span class="hljs-built_in">length</span>(S_Va_turb_Name);<br><span class="hljs-comment">% 初始扰动变量文件路径（省略运行程序根目录）</span><br><span class="hljs-comment">% S_Va_turb_FilePath_raw=char(&#x27;\Input\InputNS.dat&#x27;,&#x27;\Input\InputNS.dat&#x27;,&#x27;\Input\InputTurb.dat&#x27;);</span><br><span class="hljs-comment">% S_Va_turb_FilePath=strip(S_Va_turb_FilePath_raw,&#x27;right&#x27;);</span><br>S_Va_turb_FilePath=[<span class="hljs-string">&quot;\Input\InputSAconst.dat&quot;</span>,<span class="hljs-string">&quot;\Input\InputSAconst.dat&quot;</span>,<span class="hljs-string">&quot;\Input\InputSAconst.dat&quot;</span>,<span class="hljs-string">&quot;\Input\InputSAconst.dat&quot;</span>];<br><span class="hljs-comment">% 初始扰动变量修改行数（对应文件内）</span><br>S_Va_turb_ModiLine=[<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>];<br><span class="hljs-comment">% 初始扰动变量修改格式（对应文件内）</span><br>S_Va_turb_ModiFormat=[<span class="hljs-string">&quot;%-16.5f&quot;</span>,<span class="hljs-string">&quot;%-16.5f&quot;</span>,<span class="hljs-string">&quot;%-16.5f&quot;</span>,<span class="hljs-string">&quot;%-16.5f&quot;</span>];<br><span class="hljs-comment">% 初始扰动变量扰动区间</span><br><span class="hljs-comment">% 设置扰动方式：0 - 绝对值上下扰动；1 - 比例上下扰动（例如：设置50代表扰动区间为标准值的[50%,150%]）</span><br>S_Va_turb_way=[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>];<br>S_Va_turb_Std=[<span class="hljs-number">0.1355</span>,(<span class="hljs-number">2</span>/<span class="hljs-number">3</span>),<span class="hljs-number">7.1</span>,<span class="hljs-number">0.41</span>];  <span class="hljs-comment">% 初始扰动变量标准值</span><br>S_Va_turb_Det_base_lower=[<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>];  <span class="hljs-comment">% 初始扰动变量下区间</span><br>S_Va_turb_Det_base_upper=[<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>];  <span class="hljs-comment">% 初始扰动变量上区间</span><br><br>S_Va_turb_Det_real_lower=S_Va_turb_Det_base_lower;<br>S_Va_turb_Det_real_upper=S_Va_turb_Det_base_upper;<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span>=<span class="hljs-number">1</span>:<span class="hljs-built_in">length</span>(S_Va_turb_Std)<br>    <span class="hljs-comment">% 若采用比例上下扰动方式</span><br>    <span class="hljs-keyword">if</span> (S_Va_turb_way(<span class="hljs-built_in">i</span>)==<span class="hljs-number">1</span>)<br>        S_Va_turb_Det_real_lower(<span class="hljs-built_in">i</span>)=S_Va_turb_Std(<span class="hljs-built_in">i</span>)*(S_Va_turb_Det_base_lower(<span class="hljs-built_in">i</span>)/<span class="hljs-number">100</span>);<br>        S_Va_turb_Det_real_upper(<span class="hljs-built_in">i</span>)=S_Va_turb_Std(<span class="hljs-built_in">i</span>)*(S_Va_turb_Det_base_upper(<span class="hljs-built_in">i</span>)/<span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br>S_Va_turb_min=S_Va_turb_Std-S_Va_turb_Det_real_lower;<br>S_Va_turb_max=S_Va_turb_Std+S_Va_turb_Det_real_upper;<br><span class="hljs-comment">% 利用拉丁超立方进行初始扰动变量采样</span><br>Va_min=S_Va_turb_min;<br>Va_max=S_Va_turb_max;<br><span class="hljs-comment">% 初始同化变量个数</span><br>PN=<span class="hljs-built_in">length</span>(Va_min);<br>S_Va_coef=lhsdesign(N_max,PN);<br><span class="hljs-comment">% 生成N*P列扰动变量向量</span><br>S_Va_init=(<span class="hljs-built_in">ones</span>(N_max,<span class="hljs-number">1</span>)*Va_min)+S_Va_coef.*(<span class="hljs-built_in">ones</span>(N_max,<span class="hljs-number">1</span>)*(Va_max-Va_min));<br>S_Va_init_ave=<span class="hljs-built_in">mean</span>(S_Va_init);<br><br><span class="hljs-comment">% ② 指定目标同化变量模块</span><br><span class="hljs-comment">% 全部目标同化变量名称</span><br>S_Va_target_Name=[<span class="hljs-string">&quot;TMu&quot;</span>];<br><span class="hljs-comment">% S_Va_target_Name=[&quot;Beta&quot;];</span><br>S_Va_target_CharName=char(S_Va_target_Name);<br><span class="hljs-comment">% 全部目标同化变量数量</span><br>S_Va_target_Num=<span class="hljs-built_in">length</span>(S_Va_target_Name);<br><span class="hljs-comment">% 判断目标同化变量类型①（TypeTurb）：k - 是第k个初始扰动变量或分布（k~=0）；0 - 非初始扰动变量</span><br><span class="hljs-comment">% 注：若目标同化变量非初始扰动变量，则需要在更新步将值改为原始 STD 值</span><br>S_Va_target_TypeTurb=[<span class="hljs-number">0</span>];<br><span class="hljs-comment">% 判断目标同化变量类型②（TypeDA）：1 - 单（值）同化变量；2 - 流场（多值）同化变量</span><br>S_Va_target_TypeDA=[<span class="hljs-number">2</span>];<br><span class="hljs-comment">% 目标单值同化（且为初始扰动）的变量个数为 PT；流场（多值）同化变量个数 PS，即</span><br><span class="hljs-comment">% 例如在本算例中，如欲同化马赫数 Ma、迎角 AoA、全（部分）流场涡粘 TMu，则 PT = 2；</span><br><span class="hljs-comment">%                   欲仅同化迎角 AoA、全（部分）流场涡粘 TMu，则 PT = 1；</span><br><span class="hljs-comment">% PT=sum((S_Va_target_TypeTurb&gt;0) &amp; (S_Va_target_TypeDA==1));</span><br>PT=sum((S_Va_target_TypeDA==<span class="hljs-number">1</span>));<br>PS=sum((S_Va_target_TypeDA==<span class="hljs-number">2</span>));<br><span class="hljs-comment">% 标记初始扰动变量中同时满足[为目标同化]和[单值]的变量（e.g. &quot;Ma&quot; &quot;AoA&quot;），并保存在S_Va_target_NonTurb数组</span><br>Lia=<span class="hljs-built_in">ismember</span>(S_Va_turb_Name,S_Va_target_Name);<br>S_Va_turb_target=double(Lia);<br><br><span class="hljs-comment">% ③ 指定同化观测变量模块</span><br><span class="hljs-comment">% 全部同化观测变量名称</span><br>S_Va_ref_Name=[<span class="hljs-string">&quot;Cp&quot;</span>];<br><span class="hljs-comment">% S_Va_ref_Name=[&quot;BL&quot;];</span><br>S_Va_ref_CharName=char(S_Va_ref_Name);<br><span class="hljs-comment">% 全部同化观测变量数量</span><br>S_Va_ref_Num=<span class="hljs-built_in">length</span>(S_Va_ref_Name);<br><br><span class="hljs-comment">% 若目标观测变量为Cp,Cf,yplus    </span><br>    <span class="hljs-comment">% 设置参与同化过程的翼型数据点编号</span><br>    <span class="hljs-comment">% num_da_min=1;    % 取样最小值</span><br>    <span class="hljs-comment">% num_da_max=97;  % 取样最大值</span><br>    <span class="hljs-comment">% num_da_gap=2;    % 取样间隔</span><br>    <span class="hljs-comment">% 建立同化数据点序号数组</span><br>    <span class="hljs-comment">% num_da_arr=(num_da_min:num_da_gap:num_da_max);</span><br>    <span class="hljs-comment">% 可根据重点区域进行标志</span><br>    <span class="hljs-comment">% num_da_arr=[(10:2:42),(48:64),(65:73),(74:2:92)];</span><br>    <span class="hljs-comment">% num_da_arr=[(10:2:42),(48:92)];</span><br>    <span class="hljs-comment">% num_da_arr=[(10:2:42),(48:73),(74:2:92)]; % RAE2822</span><br>    <span class="hljs-comment">% num_da_arr=[(18:3:63),(90:2:168)]; % 56 Points Selected for S809 （P = 199）</span><br>    num_da_arr=[(<span class="hljs-number">20</span>:<span class="hljs-number">2</span>:<span class="hljs-number">60</span>),(<span class="hljs-number">94</span>:<span class="hljs-number">2</span>:<span class="hljs-number">166</span>)]; <span class="hljs-comment">% 58 Points Selected for S809 （P = 199）</span><br>    <span class="hljs-comment">% 记录同化数据点个数</span><br>    k=<span class="hljs-built_in">length</span>(num_da_arr);<br><br><span class="hljs-comment">% 若目标观测变量为边界层速度型，则需要指定边界层站位数量、导入各站位观测信息（y/c,u/u_ref）、各站位处边界层同化位置</span><br>    <span class="hljs-comment">% N_BL=4;</span><br>    <span class="hljs-comment">% BL_Type=[1,1,1,1];  % 设置各站位边界层取点模式：0 - 指定起始、终止编号以及间隔；1 - 指定同化点编号</span><br>    <span class="hljs-comment">% BL_S=[]; % 设置各站位计算值起始编号</span><br>    <span class="hljs-comment">% BL_T=[]; % 设置各站位计算值终止编号</span><br>    <span class="hljs-comment">% BL_G=[]; % 设置各站位计算值编号间隔</span><br>    <span class="hljs-comment">% global BL_setting N_BL L_BL BL_num BL_lab BL_dot</span><br>    BL_setting=textread(<span class="hljs-string">&#x27;BL_DA_Setting.dat&#x27;</span>); <span class="hljs-comment">% 导入边界层同化设置文件</span><br>    N_BL=<span class="hljs-built_in">size</span>(BL_setting,<span class="hljs-number">1</span>);<br>    L_BL=<span class="hljs-built_in">size</span>(BL_setting,<span class="hljs-number">2</span>);<br>    <span class="hljs-comment">% BL_dot=(-1)*ones(N_BL,100); % 保存边界层同化位置信息</span><br>    BL_num=<span class="hljs-built_in">zeros</span>(<span class="hljs-number">1</span>,N_BL); <span class="hljs-comment">% 保存各站位边界层同化点数</span><br>    BL_lab=<span class="hljs-built_in">zeros</span>(<span class="hljs-number">1</span>,N_BL); <span class="hljs-comment">% 保存参与同化的边界层编号</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span>=<span class="hljs-number">1</span>:N_BL<br>        BL_lab(<span class="hljs-built_in">i</span>)=BL_setting(<span class="hljs-built_in">i</span>,<span class="hljs-number">1</span>); <span class="hljs-comment">% 保存边界层站位编号</span><br>        BL_type=BL_setting(<span class="hljs-built_in">i</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">% 设置各站位边界层取点模式：0 - 指定起始、终止编号以及间隔；1 - 指定同化点编号</span><br>        <span class="hljs-keyword">if</span> (BL_type==<span class="hljs-number">0</span>)<br>            BL_S=BL_setting(<span class="hljs-built_in">i</span>,<span class="hljs-number">3</span>);<br>            BL_T=BL_setting(<span class="hljs-built_in">i</span>,<span class="hljs-number">4</span>);<br>            BL_G=BL_setting(<span class="hljs-built_in">i</span>,<span class="hljs-number">5</span>);<br>            cnt_dot=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> <span class="hljs-built_in">j</span>=BL_S:BL_G:BL_T<br>                cnt_dot=cnt_dot+<span class="hljs-number">1</span>;<br>                BL_dot(<span class="hljs-built_in">i</span>,cnt_dot)=<span class="hljs-built_in">j</span>;<br>            <span class="hljs-keyword">end</span><br>            BL_num(<span class="hljs-built_in">i</span>)=cnt_dot;<br>        <span class="hljs-keyword">elseif</span> (BL_type==<span class="hljs-number">1</span>)<br>            cnt_dot=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> kkk=<span class="hljs-number">3</span>:L_BL<br>                <span class="hljs-keyword">if</span> (BL_setting(<span class="hljs-built_in">i</span>,kkk)~=<span class="hljs-number">0</span>)<br>                    cnt_dot=cnt_dot+<span class="hljs-number">1</span>;<br>                    BL_dot(<span class="hljs-built_in">i</span>,cnt_dot)=BL_setting(<span class="hljs-built_in">i</span>,kkk);<br>                <span class="hljs-keyword">end</span><br>            <span class="hljs-keyword">end</span><br>            BL_num(<span class="hljs-built_in">i</span>)=cnt_dot;<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <br>    <span class="hljs-comment">% Pos_Obs=(-1)*ones(N_BL,100); % 保存边界层同化位置信息</span><br>    <span class="hljs-comment">% 导入指定边界层的速度型信息（实验数据 + 位置信息）</span><br>    kb=sum(BL_num); <span class="hljs-comment">% 统计参与同化的边界层速度型点数量</span><br>    Exp_Obs_Arr=<span class="hljs-built_in">zeros</span>(<span class="hljs-number">1</span>,kb);<br>    BL_obs_num=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span>=<span class="hljs-number">1</span>:N_BL<br>        Vel_Exp_Data=load([<span class="hljs-string">&#x27;.\Input_Data\Input_Exp_Hump_BL_Vel_&#x27;</span>,num2str(BL_lab(<span class="hljs-built_in">i</span>),<span class="hljs-string">&#x27;%03d&#x27;</span>),<span class="hljs-string">&#x27;.dat&#x27;</span>]);<br>        Vel_Shape_Data=load([<span class="hljs-string">&#x27;.\Input_Data\Input_Hump_BL_Profile_&#x27;</span>,num2str(BL_lab(<span class="hljs-built_in">i</span>),<span class="hljs-string">&#x27;%03d&#x27;</span>),<span class="hljs-string">&#x27;.dat&#x27;</span>]);<br>        <br>        <span class="hljs-comment">% 整理指定编号同化点的位置信息（y/c）</span><br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">j</span>=<span class="hljs-number">1</span>:BL_num(<span class="hljs-built_in">i</span>)<br>            Pos_Obs(<span class="hljs-built_in">i</span>,<span class="hljs-built_in">j</span>)=Vel_Shape_Data(BL_dot(<span class="hljs-built_in">i</span>,<span class="hljs-built_in">j</span>));<br>            <span class="hljs-comment">% 插值得到边界层指定位置的速度实验数据</span><br>            Exp_Obs(<span class="hljs-built_in">i</span>,<span class="hljs-built_in">j</span>)=interp1(Vel_Exp_Data(:,<span class="hljs-number">1</span>),Vel_Exp_Data(:,<span class="hljs-number">2</span>),Pos_Obs(<span class="hljs-built_in">i</span>,<span class="hljs-built_in">j</span>),<span class="hljs-string">&#x27;linear&#x27;</span>,<span class="hljs-string">&#x27;extrap&#x27;</span>);<br>            BL_obs_num=BL_obs_num+<span class="hljs-number">1</span>; <span class="hljs-comment">% 同化观测点 + 1</span><br>            Exp_Obs_Arr(BL_obs_num)=Exp_Obs(<span class="hljs-built_in">i</span>,<span class="hljs-built_in">j</span>); <span class="hljs-comment">% 保存所有插值出的实验观测数据，数量 = k</span><br>        <span class="hljs-keyword">end</span><br>        <br>    <span class="hljs-keyword">end</span><br>    <br><br><span class="hljs-comment">% -----------  指定初始扰动变量、目标同化变量、同化观测变量模块 END ----------- %</span><br><br><span class="hljs-comment">% --------------  设置生成初始集合成员相关参数 END -------------- %</span><br></code></pre></td></tr></table></figure><ul><li><strong><font color="red">设置同化过程主要流场计算参数（共三个阶段）</font></strong></li><li>设置定常求解收敛最大迭代步数（集合生成过程）—— <strong><em>MStepNS_cov</em></strong></li><li>设置内迭代操作最大次数，即同化最大轮数 —— <strong><em>Max_inner_iter</em></strong></li><li>设置内迭代预测迭代计算步数 —— <strong><em>MStepNS_pre</em></strong></li><li>设置每代成员重计算步数（集合重计算过程） —— <strong><em>MStepNS_recal_ensemble</em></strong></li><li>设置集合成员生成、内迭代以及重计算过程的 CFL 数（三元素数组） —— <strong><em>CFL_Setting</em></strong></li><li>设置集合成员生成、内迭代、重计算过程的收敛精度（以 10 为底，三元素数组） —— <strong><em>Resi_target_log</em></strong></li><li>设置各阶段（集合生成、内迭代、重计算）的截断残差水平，即若残差未达到该设置值，则认为此次计算未收敛 —— <strong><em>Resi_target_lev</em></strong></li><li>更新（关闭）续算操纵开关，即设置流场是否续算：0 - 否（从初始流场开始计算）；1 - 是 （从前一轮计算流场开始计算）—— <strong><em>JX_NS</em></strong></li><li>更新（关闭）续算操纵开关，即设置涡粘场是否续算：0 - 否（不固定涡粘，直接采用湍流模型计算）；1 - 是 （固定涡粘进行计算）；3 - 引入 Beta 项进行计算 —— <strong><em>JX_Turb</em></strong></li><li>设置是否进行当前算例与标准算例计算结果的比较（流场各变量 Rho、U、V、P、TMu 的绝对误差场，以及总 MSE、RMSE），需要在Output文件夹中导入基准流场 FlowField_STD.PLT 文件，输出误差云图 FlowField_Err.PLT 和误差信息 FlowField_Err_Info.txt 文件 —— <strong><em>STD_Comp</em></strong></li><li>设置每轮 L2NORM 收敛要求水平，达到即退出当前计算（注：5 - 代表收敛截断水平为 5%；当且仅当湍流续算开关 JX_Turb = 1 时生效） —— <strong><em>L2NORM_Setting</em></strong></li><li><strong><font color="red">设置同化过程主要流程与算法控制参数</font></strong></li><li>设置算例类型（0 - 翼型绕流：需导入上下翼型外形数据以及实验数据，共4个输入文件，并进行插值排序；1 - 单壁内流，如后台阶（Backstep）、驼峰（Hump）等：需导入壁面外形参数以及实验数据，共2个输入文件，并进行插值排序） —— <strong><em>flag_flow_type</em></strong></li><li>设置是否进行初始标准算例：0 - 否；1 - 是 —— <strong><em>flag_std</em></strong></li><li>设置是否进行部分区域数据同化：0 - 否；1 - 是 —— <strong><em>flag_da_part</em></strong></li><li>设置数据同化核心算法：1 - 集合卡尔曼滤波（EnKF）；2 - 集合变换卡尔曼滤波（ETKF） —— <strong><em>flag_da_method</em></strong></li><li>设置数据同化观测值类型：0 - 相对误差，同化目标变为使相对误差变为零；1 - 绝对误差（传统方式） —— <strong><em>flag_da_relative</em></strong></li><li><strong><font color="red">设置区域数据同化参数</font></strong> <strong><font color="blue">（可选用）</font></strong></li><li>设置同化区域节点个数，可为任意多边形（须满足 &gt;= 3），下面输入 NNDA 个坐标（XDA, YDA） —— <strong><em>NNDA</em></strong></li><li>设置同化区域节点横坐标 —— <strong><em>XDA</em></strong></li><li>设置同化区域节点纵坐标 —— <strong><em>YDA</em></strong></li><li><strong><font color="red">设置同化算例外部输入信息</font></strong></li><li><em>[翼型算例]</em> 导入上下翼面的外形数据文件（自动插值） —— <strong><em>shape_upper</em></strong> &amp; <strong><em>shape_lower</em></strong></li><li><em>[翼型算例]</em> 导入上下翼面的实验数据 —— <strong><em>exp_upper_data</em></strong> &amp; <strong><em>exp_lower_data</em></strong></li><li>[非翼型算例] 导入外形数据（自动插值） —— <strong><em>shape_outline</em></strong></li><li>[非翼型算例] 导入实验数据 —— <strong><em>exp_outline</em></strong></li><li>翼型算例：导入上下翼面的实验数据 —— <strong><em>exp_upper_data</em></strong> &amp; <strong><em>exp_lower_data</em></strong></li><li><strong><font color="red">设置数据同化实验值与误差估计参数</font></strong></li><li>设置观测值协方差（方差），并假定这些测量误差不相关；设置是否开启 自适应观测值标准差调节模型 - Adaptive observation standard deviation adjustment model（<strong><em>AOSDAM</em></strong>，否 - 0；固定放缩模式 - 1；区间平均模式 - 2；区间适应模式 - 3）</li><li>模式开关 —— <strong><em>flag_sigma_obs_adapt</em></strong></li><li>放缩因子 —— <strong><em>flag_sigma_obs_coeff</em></strong></li><li>设定初始观测值标准差水平 —— <strong><em>sigma_obs_init</em></strong></li><li>设定观测值标准差下限，即调整前后的标准差均不可低于下限 —— <strong><em>sigma_obs_min</em></strong></li><li>设定观测值标准差上限，即调整前后的标准差均不可高于上限—— <strong><em>sigma_obs_max</em></strong></li></ul><p><em>对应程序段：</em></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% -----------------  设置主要求解迭代参数 START ----------------- %</span><br><br>MStepNS_cov=<span class="hljs-number">50000</span>;   <span class="hljs-comment">% 定常NS求解收敛最大迭代步数（集合生成过程）</span><br>Max_inner_iter=<span class="hljs-number">10</span>;  <span class="hljs-comment">% 设置内迭代操作最大次数</span><br>MStepNS_pre=<span class="hljs-number">50000</span>;   <span class="hljs-comment">% 设置内迭代预测步数</span><br>MStepNS_recal_ensemble=<span class="hljs-number">60000</span>;  <span class="hljs-comment">% 设置每代成员重计算步数（集合重计算过程）</span><br>CFL_Setting=[<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>]; <span class="hljs-comment">% 分别设置集合成员生成、内迭代以及重计算过程的 CFL 数</span><br>Resi_target_log=[<span class="hljs-number">-9.0</span>,<span class="hljs-number">-9.0</span>,<span class="hljs-number">-9.0</span>]; <span class="hljs-comment">% 分别定义集合成员生成、内迭代、重计算过程的收敛精度（以 10 为底）</span><br>Resi_target=<span class="hljs-number">10.</span>^(Resi_target_log);<br>Resi_target_lev=[<span class="hljs-number">-7.5</span>,<span class="hljs-number">-6.0</span>,<span class="hljs-number">-7.0</span>]; <span class="hljs-comment">% 规定各阶段（集合生成、内迭代、重计算）的截断残差水平，以确定集合成员捕捉范围</span><br><span class="hljs-comment">% Resi_target_gen_level=Resi_target_log(1)+1.5; % 规定集合生成截断残差水平为期望残差值 + f ，以扩大集合成员捕捉范围</span><br>JX_NS=[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]; <span class="hljs-comment">% 更新（关闭）JX_NS 续算操纵开关，即设置流场是否续算：0 - 否（从初始流场开始计算）；1 - 是 （从前一轮计算流场开始计算）</span><br><br>JX_Turb=[<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]; <span class="hljs-comment">% 更新（关闭）JX_Turb 续算操纵开关，即设置涡粘场是否续算：0 - 否（不固定涡粘，直接采用湍流模型计算）；1 - 是 （固定涡粘进行计算）；3 - 引入 Beta 项进行计算</span><br>STD_Comp=[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]; <span class="hljs-comment">% 是否进行当前算例与标准算例计算结果的比较（流场各变量 RU、U、V、P、TMu 的绝对误差场，以及总MSE、RMSE）</span><br>                  <span class="hljs-comment">% 需要在Output文件夹中导入 FlowField_STD.PLT 文件，输出 FlowField_Err.PLT 和 FlowField_Err_Info.txt 文件</span><br>L2NORM_Setting=[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]; <span class="hljs-comment">% 设置每轮 L2NORM 收敛要求水平，达到即退出当前计算（注：5 - 代表收敛截断水平为 5%；当且仅当湍流续算开关 JX_Turb = 1 时生效）</span><br><br><br><span class="hljs-comment">% 设置算例类型（0 - 翼型绕流：需导入上下翼型外形数据以及实验数据，共4个输入文件，并进行插值排序）</span><br><span class="hljs-comment">%               1 - 单壁内流，如后台阶（Backstep）、驼峰（Hump）等：需导入壁面外形参数以及实验数据，共2个输入文件，并进行插值排序</span><br>flag_flow_type=<span class="hljs-number">0</span>;<br><br>flag_std=<span class="hljs-number">0</span>;  <span class="hljs-comment">% 设置是否进行初始标准算例：0 - 否；1 - 是</span><br>flag_da_part=<span class="hljs-number">0</span>;  <span class="hljs-comment">% 设置是否进行部分区域数据同化：0 - 否；1 - 是</span><br>flag_da_method=<span class="hljs-number">2</span>; <span class="hljs-comment">% 设置数据同化核心算法：1 - 集合卡尔曼滤波（EnKF）；2 - 集合变换卡尔曼滤波（ETKF）</span><br>flag_da_relative=<span class="hljs-number">1</span>; <span class="hljs-comment">% 设置数据同化观测值类型：0 - 相对误差，同化目标变为使相对误差变为零；1 - 绝对误差（传统方式）</span><br>flag_beta_turb_type=<span class="hljs-number">0</span>; <span class="hljs-comment">% 设置网格取样点规则（对于 Beta修正项 同化情形）：0 - 每次扰动点固定；1 - 每次扰动点随机；</span><br><br><span class="hljs-comment">% 如果初始扰动与同化目标中出现 &quot;Beta&quot; 项，则进行扰动设置</span><br><span class="hljs-keyword">if</span> ((strcmp(char(S_Va_target_Name(<span class="hljs-number">1</span>)),<span class="hljs-string">&#x27;Beta&#x27;</span>)==<span class="hljs-number">1</span>) || (strcmp(char(S_Va_target_Name(<span class="hljs-number">1</span>)),<span class="hljs-string">&#x27;Beta&#x27;</span>)==<span class="hljs-number">1</span>))<br>    flag_da_part=<span class="hljs-number">1</span>; <span class="hljs-comment">% 开启区域数据同化</span><br>    flag_da_beta=<span class="hljs-number">1</span>; <span class="hljs-comment">% 开启扰动项Beta(x)同化</span><br>    flag_Va_init=<span class="hljs-number">1</span>; <span class="hljs-comment">% 开启集合成员导入流场多维工作变量标志</span><br>    flag_sel_dot=<span class="hljs-number">2</span>; <span class="hljs-comment">% 设置扰动Beta(x)的方式</span><br>                    <span class="hljs-comment">% 拟定规则 1 - 直接选取相关编号间隔，即在选取区域内每隔一定编号进行单点采样，选取散点并进行平面插值；</span><br>                    <span class="hljs-comment">% 拟定规则 2 - 精细化采样均匀采样；</span><br>                    <span class="hljs-comment">% 拟定规则 3 - 采样二维光滑函数进行采样（待开发......）；</span><br>    <span class="hljs-comment">% 设置 Beta 扰动规则：方差 sigma_2，满足分布 Beta ~ N(std_beta,sigma_2)</span><br>    <span class="hljs-comment">% 规则①取点间隔信息</span><br>    DA_NG_gap=<span class="hljs-number">200</span>;<br>    <span class="hljs-comment">% 规则①~③取点距离信息</span><br>    std_beta=<span class="hljs-number">1.0</span>;<br>    sigma_beta=<span class="hljs-number">3.0</span>;<br>    dis_ratio=<span class="hljs-number">5.0</span>;<br><span class="hljs-keyword">else</span><br>    <span class="hljs-comment">% 若不进行 Beta扰动项 同化</span><br>    flag_da_beta=<span class="hljs-number">0</span>; <span class="hljs-comment">% 关闭扰动项Beta(x)同化</span><br>    flag_Va_init=<span class="hljs-number">0</span>; <span class="hljs-comment">% 关闭集合成员导入流场多维工作变量，使用普通单变量组合扰动</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">% 区域数据同化设置</span><br>NNDA=<span class="hljs-number">4</span>; <span class="hljs-comment">% NNDA -- 同化区域节点个数，可为任意多边形（须满足&gt;=3），下面输入 NNDA 个坐标（XDA,YDA）</span><br><span class="hljs-comment">% XDA=[1.05,1.2,1.2,1.05]; % XDA(NNDA) -- 同化区域节点横坐标</span><br><span class="hljs-comment">% YDA=[0.1,0.1,0.0,0.0]; % YDA(NNDA) -- 同化区域节点纵坐标</span><br><span class="hljs-comment">% XDA=[0.8,1.5,1.5,0.8]; % XDA(NNDA) -- 同化区域节点横坐标</span><br><span class="hljs-comment">% YDA=[0.1,0.1,0.02,0.02]; % YDA(NNDA) -- 同化区域节点纵坐标</span><br>XDA=[<span class="hljs-number">0.5499846528026755</span>,<span class="hljs-number">1.3977168074273609</span>,<span class="hljs-number">1.3977168074273609</span>,<span class="hljs-number">0.5499846528026755</span>]; <span class="hljs-comment">% XDA(NNDA) -- 同化区域节点横坐标</span><br>YDA=[<span class="hljs-number">0.11283900866252453</span>,<span class="hljs-number">0.16714063248086963</span>,<span class="hljs-number">0.005</span>,<span class="hljs-number">0.005</span>]; <span class="hljs-comment">% YDA(NNDA) -- 同化区域节点纵坐标</span><br><br><span class="hljs-keyword">if</span> (flag_flow_type==<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">% 导入上下翼面的外形数据（自动插值）</span><br>    shape_upper=load(<span class="hljs-string">&#x27;.\Input_Data\Input_Data_Shape_S809_upper.dat&#x27;</span>);<br>    shape_lower=load(<span class="hljs-string">&#x27;.\Input_Data\Input_Data_Shape_S809_lower.dat&#x27;</span>);<br>    <span class="hljs-comment">% 导入上下翼面的实验数据</span><br>    exp_upper_data=load(<span class="hljs-string">&#x27;.\Input_Data\s809_200w_aoa12.2_exp_down.dat&#x27;</span>);<br>    exp_lower_data=load(<span class="hljs-string">&#x27;.\Input_Data\s809_200w_aoa12.2_exp_up.dat&#x27;</span>);<br><span class="hljs-keyword">elseif</span> (flag_flow_type==<span class="hljs-number">1</span>)<br>    <span class="hljs-comment">% 导入外形数据（自动插值）</span><br>    shape_outline=load(<span class="hljs-string">&#x27;.\Input_Data\Input_Data_Shape_Hump.dat&#x27;</span>);<br>    <span class="hljs-comment">% 导入实验数据</span><br>    exp_outline=load(<span class="hljs-string">&#x27;.\Input_Data\Input_Data_Exp_Hump.dat&#x27;</span>);<br><span class="hljs-keyword">end</span><br>    <br><span class="hljs-comment">% ------------------  设置主要求解迭代参数 END ------------------ %</span><br><br><span class="hljs-comment">% -----------  设置数据同化实验值与误差估计参数 START ----------- %</span><br><br><span class="hljs-comment">% 设置观测值协方差（方差），并假定这些测量误差不相关</span><br><span class="hljs-comment">% !!!!!!! 方差具体设置值需要再考虑（大一些？自适应方差调整模型？） !!!!!!!</span><br><span class="hljs-comment">% 2021/04/27 更新模块</span><br><span class="hljs-comment">% 设置是否开启 自适应观测值标准差调节模型 - Adaptive observation standard deviation adjustment model </span><br><span class="hljs-comment">%               abbr. AOSDAM（否 - 0；固定放缩模式 - 1；区间平均模式 - 2；区间适应模式 - 3）</span><br><span class="hljs-comment">% 算法说明：若关闭自适应模型，则设定所有观测值标准差为一固定值 sigma_obs；</span><br><span class="hljs-comment">%           若开启自适应模型（1 - 固定放缩模式）：则每轮同化前所有观测值标准差设置为上一轮标准差乘以放缩因子；</span><br><span class="hljs-comment">%           若开启自适应模型（2 - 区间平均模式），则每轮同化前根据上一轮所有观测值对应的计算值包络区间平均宽度，将所有观测值的标准差调整为平均期望标准差水平（乘以放缩因子）；</span><br><span class="hljs-comment">%           若开启自适应模型（3 - 区间适应模式），则每轮同化前根据上一轮各观测值对应的计算值包络区间宽度，将各观测值的标准差调整为相应期望标准差水平（乘以放缩因子）；</span><br><span class="hljs-comment">% 变量说明：flag_sigma_obs_adapt - 模式开关</span><br><span class="hljs-comment">%           flag_sigma_obs_coeff - 放缩因子</span><br><span class="hljs-comment">%           sigma_obs_init       - 设定初始观测值标准差水平</span><br><span class="hljs-comment">%           sigma_obs_min        - 设定观测值标准差下限，即调整前后的标准差均不可低于下限</span><br><span class="hljs-comment">%           sigma_obs_max        - 设定观测值标准差上限，即调整前后的标准差均不可高于上限</span><br>flag_sigma_obs_adapt=<span class="hljs-number">0</span>;<br>flag_sigma_obs_coeff=<span class="hljs-number">0.80</span>;<br>sigma_obs_ini=<span class="hljs-number">0.15</span>; <span class="hljs-comment">% 设置初始观测标准差水平</span><br>sigma_obs_min=<span class="hljs-number">0.02</span>; <span class="hljs-comment">% 指定观测标准差下限为0.05，对应方差为0.0025</span><br>sigma_obs_max=<span class="hljs-number">0.80</span>; <span class="hljs-comment">% 指定观测标准差上限为0.80，对应方差为0.6400</span><br><br><span class="hljs-comment">% 计算数据同化初始集合分析值误差协方差</span><br><span class="hljs-comment">% C_pp_e_a=cov(S_Va_ana&#x27;);</span><br><br><span class="hljs-comment">% ----------  设置数据同化实验值与误差估计参数 END ---------- %</span><br></code></pre></td></tr></table></figure><p>​ 完成上述所有参数设置后，本程序将在工作区打印主要的输入参数，同时将所有提示信息写入 <strong><em>DA_CompInfo_Brief.dat</em></strong> 文件。 一组参数设置与前处理模块命令行信息提示如图 3-1 所示。</p><p><img src="/2022/06/24/DATF/Comp_Info.png" alt="img" style="zoom: 50%;"></p><center><font size="3.5"> 图 3-1 参数设置与前处理模块命令行信息提示</font></center><p>​ 完成所有参数设置后，程序进行前处理操作，将依次完成以下步骤：</p><ul><li><strong>步骤一：</strong>导入参考实验与首轮计算数据，并进行几何外形插值操作，并保存所有计算参数信息；</li><li><strong>步骤二：</strong>根据设置线程数，复制创建并行程序组。</li></ul><h2 id="同化算法模块">3.2 同化算法模块</h2><p>​ 本模块是整个湍流数据同化程序框架的核心，主要功能是实现同化算法并进行结果分析。在完成前处理模块全部设置后，程序将依次完成初始化、内迭代、重计算三个阶段，主要包括以下步骤：</p><ol type="1"><li>处理外部导入的算例实验数据与模型几何数据；</li><li><strong>同化初始化阶段</strong>：批处理调用外部流体求解器，生成首代集合成员 <span class="math inline">\(\left\{x_{i, 0}\right\}_{i=1}^{N}\)</span> ，初始化状态变量，设时间步 $ k = 1$ ；建立实验观测值与计算值之间的映射关系 $ H_{k+1}$ ；</li><li><strong>同化内迭代阶段</strong>：设置实验观测误差水平，调用滤波算法，首先进行预测步骤得到 <span class="math inline">\(\left\{x_{i, k+1}^{f}\right\}_{i=1}^{N}\)</span> ，再更新状态变量得到 <span class="math inline">\(\left\{x_{i, k+1}^{a}\right\}_{i=1}^{N}\)</span> ；</li><li><strong>同化重计算阶段</strong>：使用新的状态变量 <span class="math inline">\(\overline{\boldsymbol{x}_{k}}\)</span> 重新计算标准状态算例，结果可视化；</li><li>根据当前计算值与实验值的误差，判断同化过程是否达到收敛条件，或 <span class="math inline">\(k\)</span> 是否达到 <span class="math inline">\(k_{max}\)</span> 。若满足收敛条件或者 <span class="math inline">\(k=k_{max}\)</span> ，则程序进入后处理模块；若不收敛或者 <span class="math inline">\(k&lt;k_{max}\)</span> ，则回到步骤4)，迭代步 <span class="math inline">\(k=k+1\)</span> ；</li></ol><p>​ 目前程序可供选择的同化算法包括集合卡尔曼滤波（EnKF）、集合变换卡尔曼滤波（ETKF）。除调用外部的CFD solver求解器之外，上述各个步骤均在数值计算软件环境下进行，程序通过保存数据文件与交叉调用的操作，自动完成所有的数据交互工作，两部分工作结合共同完成数据同化过程。</p><h2 id="后处理模块">3.3 后处理模块</h2><p>​ 本模块主要功能是对同化结果进行可视化与分析。进入后处理模块后，程序将对同化过程中保存的数据进行提取与分析，完成流场可视化，计算涡粘场误差敏感性系数，可供后续的数据处理与物理分析。</p><h1 id="实际算例演示">4 实际算例演示</h1><h2 id="算例一rae2822-翼型跨声速绕流数据同化">4.1 算例一：RAE2822 翼型跨声速绕流数据同化</h2><h3 id="算例介绍">4.1.1 算例介绍</h3><p>​ 最早 Whitcomb 等人提出的超临界翼型（Supercritical Airfoil）能够大幅提升飞机的阻力发散马赫数（Drag Divergence Mach Number），并显著提升跨声速飞行的气动效率，因此被广泛使用在现代民机翼型设计领域。与普通翼型相比，超临界翼型的外形特点是前缘钝圆，上翼面平坦，下翼面在后缘处存在反凹，且后缘较薄并稍向下弯曲。由于上表面平坦，在减缓气流加速的同时，也会降低部分升力。为克服这一缺点，通常采用增加下翼面后缘弯度来弥补前缘的升力不足，因此超临界翼型一般具有显著的“后加载”特征。</p><p>​ RAE2822 翼型跨声速绕流标准算例来流条件如下：马赫数 <span class="math inline">\(Ma=0.729\)</span>，迎角 <span class="math inline">\(\alpha = {2.31}^{\circ}\)</span>，基于单位弦长的雷诺数 <span class="math inline">\(\operatorname{Re}=6.5\times {10}^{6}\)</span>。本文计算网格采用混合网格，边界层内为结构网格，外流区域为非结构网格，网格的总节点数为 23439，总单元数为 29628，翼型表面计算点数为 420，为更精细地捕捉尾迹区的湍流粘性特征，在翼型后缘进行放射状区域网格加密，同时该网格已通过网格收敛性验证。本文采用的流场求解器基于雷诺平均 N-S 方程，选用一方程 S-A 湍流模型，迎风格式选用 AUSM+-up，采用二阶插值精度，CFL 数设为 5。本文采用的非结构混合网格以及计算压力场结果如图 4-1 所示。</p><p><img src="/2022/06/24/DATF/RAE2822_Grid.png" alt="img" style="zoom: 50%;"></p><center><font size="3.5"> 图 4-1 RAE2822跨声速翼型混合网格以及计算压力场结果</font></center><p>​ 图 4-2 展示了不同 CFD solver 计算的翼型表面压力系数分布与实验测量值的对比，其中 NRARC 与 WIND 的数据均来自 NASA 官网，In-house Code 代表本文计算结果。由标准状态计算结果可知，本文测试采用的 CFD 求解器精度与 NRARC、WIND 相当，但是不同求解器在上翼面激波、上翼面前缘吸力峰以及下翼面后缘位置与用空心圆圈代表的实验测量值均存在较大差异。</p><p><img src="/2022/06/24/DATF/RAE2822_Cp_STD.png" alt="img" style="zoom: 30%;"></p><center><font size="3.5"> 图 4-2 不同 CFD 求解器计算的翼型表面压力系数分布与实验测量值对比</font></center><p>​ 根据上面的标准状态计算结果，分析可得由于精细捕捉超临界翼型上缘激波位置与间断特征较难，故在该强间断面附近的表面压力系数分布的计算结果通常与实验测量有较大偏差。因此，对于激波位置附近计算不准的问题，可以应用本文提出的同化思路，结合实验测量数据对在跨声速阶段的翼型绕流计算进行湍流数据同化。首先确定同化状态变量。由文献可知，在跨声速翼型风洞实验中，由于存在动壁干扰及数据修正，故在 CFD 求解器中设置的包括马赫数与迎角在内的边界条件可能和实际实验存在误差，均存在较大的不确定性；同时考虑到 CFD 计算得到的激波后上翼面边界层速度型分布也与实验测量存在差异，而其与跨声速绕流尾迹区湍流涡粘场的特征密切相关。<strong>由上述分析，本算例同化状态变量设为马赫数 <span class="math inline">\(Ma\)</span>、迎角 <span class="math inline">\(\alpha\)</span> 以及全流场涡粘系数 <span class="math inline">\({\mu}_{t}\)</span>，同化目标变量为翼型表面的压力分布 <span class="math inline">\({C}_{p}\)</span>。</strong></p><h3 id="程序设置">4.1.2 程序设置</h3><p>​ 下面对 RAE2822 翼型跨声速绕流数据同化算例的程序设置过程进行说明。 - <strong><font color="red">步骤一：创建并封装标准算例计算程序组</font></strong></p><ul><li><p>首先采用 CFD solver 运行 RAE2822 翼型绕流的标准算例程序组，并将所有结果全部保存至根目录下的 <strong><em>Program_CFD_Base</em></strong> 文件夹下，获取标准计算结果信息，并将该文件夹作为后续创建并行程序组的基础程序组。基础程序组文件夹包括 Input 输入参数文件夹、CFD solver 头文件包、Output 输出结果文件夹、网格转换程序、计算程序以及批处理文件等，需要封装在同一个文件夹下，并重命名。</p></li><li><p><strong>注意：</strong>建议需要更换算例时，仅更改输入文件夹下的 US2D.dat 网格文件以及 InputNS.dat 输入参数文件，然后依次运行网格转换程序以及标准计算程序，其他设置与文件均可保持默认不变。</p><ul><li><strong>注意：</strong>需要对 CFD solver 源代码中的输入输出部分进行一定调整，详细见更新后的 Develop_Version 项目源代码工程。</li><li><strong>注意：</strong>在结果文件夹中，除流场结果外，有一些 .plt 格式的 Tecplot 模板文件（如：Comp_Cp_Exp_Com_DA_Model_New.plt 等），已经调整好大致格式，可方便查看结果。</li></ul></li><li><p><strong><font color="red">步骤二：添加翼型外形以及实验数据文件</font></strong></p><ul><li>在根目录下的 Input_Data 文件夹下，添加描述 RAE2822 翼型的上下翼面外形（<span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>）数据文件，分别命名为 <strong><em>Input_Data_Shape_RAE2822_lower.dat</em></strong> 与 <strong><em>Input_Data_Shape_RAE2822_upper.dat</em></strong> 文件。添加描述 RAE2822 翼型的上下翼面实验测量压力系数分布（<span class="math inline">\(x\)</span>, <span class="math inline">\(C_{p}\)</span>）文件，分别命名为 <strong><em>Input_Data_Exp_RAE2822_lower.dat</em></strong> 与 <strong><em>Input_Data_Exp_RAE2822_upper.dat</em></strong>。</li><li><strong>注意：</strong>上述四个文件均为两列格式，其中外形与实验测点信息均可为稀疏数据点，本程序将自动完成排序、插值以及组合操作。参考格式详见示例程序组。</li></ul></li><li><p><strong><font color="red">步骤三：配置主函数参数设置与前处理模块</font></strong></p><p>​ <strong>按以下子步骤，依次完成参数设置与前处理模块的配置，各参数具体意义详见第三部分的程序说明。</strong></p><ul><li><p>设置全局续算开关；</p></li><li><p>设置主要文件交互与并行相关参数；</p></li><li><p>设置生成初始集合成员相关参数；</p></li><li><p>设置同化过程主要流场计算参数（集合生成、集合内迭代、集合重计算，共三个阶段）；</p></li><li><p>设置同化过程主要流程与算法控制参数；</p></li><li><p>设置区域数据同化参数（可选用）；</p></li><li><p>设置同化算例外部输入信息；</p></li><li><p>设置数据同化实验值与误差估计参数。</p></li></ul><p>​ <strong>特别注意：在上述步骤中，除了设置参与同化过程的翼型数据点编号，即建立同化数据点序号数组</strong> <strong><em>num_da_arr</em></strong> <strong>暂无需设置外，其他参数需完整配置，将在后面进一步确定同化观测点的具体位置。</strong>一组参考设置信息展示如图 4-3 所示。</p></li></ul><p><img src="/2022/06/24/DATF/RAE2822_CommandLine_Output_Info.png" alt="img" style="zoom: 50%;"></p><center><font size="3.5"> 图 4-3 RAE2822翼型绕流数据同化参数设置模块输出示例</font></center><p>​ 当完成所有参数设置后，<strong>需要从程序开始至创建并行程序组之前，截取前处理代码段并在工作区运行（示例程序为第 706 行）</strong>，完成对翼型外形以及压力系数分布的前处理与排序，程序将在 CFD solver 程序组下的 Output 结果文件夹中，写入更新后的 CP_CF_Comp_New.PLT（气动力系数曲线）、CP_New.PLT（压力系数分布曲线）、InputExpData.PLT（插值并排序后的 <span class="math inline">\(C_{p}\)</span> 实验数据），并将流场文件 FlowField.PLT 复制为 FlowField_Ori.PLT，将 FlowField_Info.PLT 文件 复制为 FlowField_STD.PLT，将此作为绘制后续流场误差云图的基准流场信息。</p><ul><li><strong><font color="red">步骤四：确定同化观测数据点位置，设置参与同化过程的翼型数据点编号</font></strong><ul><li><p><strong>首先根据 <span class="math inline">\(C_{p}\)</span> 的计算与实验结果对比，确定观测数据点的主要分布区域以及密集程度：</strong>上翼面前段观测点可以较稀疏，激波位置附近以及后段观测点需要密集；下翼面全段整体可以稀疏，由于后缘网格加密，故靠近后缘位置观测点需要稍密。</p></li><li><p><strong>接着记录参与同化过程的翼型数据点编号：</strong>本程序将稀疏实验数据进行插值，并使得测量位置插值点与计算点一一对应，故仅需要记录计算数据点编号，程序将会自动建立观测与计算位置之间的映射关系。具体操作是用 Tecplot 软件打开 CFD 程序组下的 Output 结果文件夹中的 CP_New.PLT，相比原始曲线，此 <span class="math inline">\(C_{p}\)</span> 曲线上下翼面的计算点均按照坐标顺序进行排序，编号呈现逆时针增大趋势。点击菜单 <strong><em>Plot -- Label Points and Cells...</em></strong> 按钮，页面将会显示压力系数分布曲线上各点的编号。根据前面确定的观测数据点主要分布区域以及密集程度，可以记录相应位置的计算数据点编号并保存至同化数据点序号数组 <strong><em>num_da_arr</em></strong> ，程序将获取对应该计算点的实验插值点数值。本参考算例共确定同化观测点位置81个，在图 4-2 中以黑色实心点表示，对应的序号数组代码行如下：</p></li></ul></li></ul><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">num_da_arr=[(<span class="hljs-number">12</span>:<span class="hljs-number">7</span>:<span class="hljs-number">75</span>),(<span class="hljs-number">76</span>:<span class="hljs-number">5</span>:<span class="hljs-number">186</span>),(<span class="hljs-number">208</span>:<span class="hljs-number">5</span>:<span class="hljs-number">288</span>),(<span class="hljs-number">290</span>:<span class="hljs-number">3</span>:<span class="hljs-number">320</span>),(<span class="hljs-number">321</span>:<span class="hljs-number">5</span>:<span class="hljs-number">376</span>),(<span class="hljs-number">377</span>:<span class="hljs-number">4</span>:<span class="hljs-number">405</span>)]; <span class="hljs-comment">% 81 Points Selected for RAE2822 (P = 420)</span><br></code></pre></td></tr></table></figure><ul><li>步骤五：检查步骤三中的参数设置，再次运行前处理代码段，查看初始目标同化曲线情况</li></ul><p>​ 完成上述五个步骤后，即可启动 MATLAB 湍流数据同化主程序，程序将自动完成所有算法实验与数据交互工作。由于滤波同化流程对集合成员计算量以及内存需求量均较大，故完整版程序的起始运行时间较长（<strong>需 1 ~ 2 天</strong>），需要定时查看运行状态，以防出现程序中断以及内存崩溃问题。</p><h3 id="结果查看">4.1.3 结果查看</h3><p>​ 在程序运行过程中，程序将在指定文件夹下（如本参考算例的 Results_20210709_Case_RAE2822_Nmax_128_P_420_DA_81 文件夹）记录所有的 CFD 计算结果，主要信息将写入 MATLAB 命令行窗口以及 <strong><em>DA_CompInfo_Brief.dat</em></strong> 文本文档。主要结果文件说明如下：</p><ul><li><p><strong><em>Pre_Ensemble_Generation</em></strong> 文件夹：保存初始集合成员的计算结果。</p><ul><li>TMuPData_Post.PLT —— 流场涡粘方差系数云图</li></ul></li><li><p><strong><em>Inner_Iteration_Round_00(k)</em></strong> 文件夹：保存第 <strong><em>k</em></strong> 轮内迭代集合成员的计算结果。</p></li><li><p><strong><em>DA_Final_Results</em></strong> 文件夹：保存每一轮集合成员的重计算结果，即数据同化的最终结果。结果文件的两个重要模板文件结果说明如下：</p><ul><li>Comp_Cp_Exp_Com_DA_Model_New.lay —— 同化前后压力系数曲线对比</li></ul><p><img src="/2022/06/24/DATF/RAE2822_Cp_Comp.png" alt="img" style="zoom: 30%;"></p><ul><li>Flowfield_Model_Err_Observation.lay —— RAE2822翼型绕流同化前后的涡粘场对比云图</li></ul><p><img src="/2022/06/24/DATF/RAE2822_Flowfield_Comp.png" alt="img" style="zoom: 30%;"></p></li><li><p><strong><em>Results_Recal_Covergence_Analysis</em></strong> 文件夹：保存内迭代过程气动力收敛曲线结果。可制作一组模板图如下：</p></li></ul><p><img src="/2022/06/24/DATF/RAE2822_Cl_Cd.png" alt="img" style="zoom: 30%;"></p><ul><li>..._Pre.mat，..._S_Va_init.mat, ..._S_Va_pre_renew_001.mat：程序过程保存文件，用以后续续算。</li><li><em>[根目录]</em> <strong><em>Output_Figures</em></strong> 文件夹：保存初始集合成员与内迭代过程集合成员计算的压力系数曲线分布图片。</li></ul><hr><div class="note note-warning">            <p><font color="red"><strong>本程序测试平台采用 In-house CFD codes，无法开源，故用户需要自己提供主程序端口，本程序仅提供湍流数据同化框架。</strong></font></p><p><font color="red"><strong>本仓库中的所有关于数据同化核心代码全部由作者原创，遵守 MIT License 协议。任何形式的转发引用请务必注意标明出处！请尊重作者劳动成果！</strong></font></p>          </div><hr><div class="note note-info">            <p>^_^ This is the END of the page. Thank you for reading!</p><p>If you think this project is helpful to you, do not hesitate to <em>Light a Star</em> ~ 🌟 or <em>Fork this repository</em> ~ 🍴!</p><p>Uploaded by <strong><em>pkufzh (Small Shrimp)</em></strong> on <strong><em>2022/06/23</em></strong>.</p><p><em>This project is protected by the MIT license. Please obey the open source rules strictly.</em></p>          </div><hr><p><em>Who am I? A happy shrimp from Peking University!</em></p>]]></content>
    
    
    <categories>
      
      <category>Shared Projects</category>
      
      <category>Numerical Simulation</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Open-source</tag>
      
      <tag>Codes</tag>
      
      <tag>Computational Fluid Mechanics (CFD)</tag>
      
      <tag>MATLAB</tag>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Data assimilation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有趣的航空航天小知识（一）——探测器绕天体运行轨道方程推导</title>
    <link href="/2022/03/10/Trajectory%20Derivation/"/>
    <url>/2022/03/10/Trajectory%20Derivation/</url>
    
    <content type="html"><![CDATA[<h1 id="有趣的航空航天小知识一探测器绕天体运行轨道方程推导">有趣的航空航天小知识（一）——探测器绕天体运行轨道方程推导</h1><div class="note note-success">            <p><em>在经典牛顿力学框架下，给出在有心力下探测器绕天体运行轨道方程推导的一种思路~</em></p>          </div><p>假设一个探测器质量为 <span class="math inline">\(m\)</span>，其围绕球形天体质量为 <span class="math inline">\(M\)</span>，探测器与天体中心之间距离为 <span class="math inline">\(r\)</span>，探测器相比天体很小，可认为是质点。</p><p>如图 <a href="#fig1">1</a> 所示，以天体中心为坐标原点，建立极坐标系 <span class="math inline">\((r, \; \theta)\)</span>，其极轴方向假定任意，极角逆时针旋转方向为正，沿极径与极角方向的单位矢量分别为 <span class="math inline">\(\vec{e_{r}}\)</span> 与 <span class="math inline">\(\vec{e_{\theta}}\)</span>。现推导其在天体引力下的运动轨道方程 <span class="math inline">\(r = f(\theta)\)</span>。</p><p><span id="fig1"></span></p><p><img src="/2022/03/10/Trajectory%20Derivation/Fig_1s.png" style="zoom:40%;"></p><center><font size="2.5"> 图 1 探测器绕天体运动示意图 </font></center><p><br></p><p>下面推导探测器所受加速度 <span class="math inline">\(\vec{a}\)</span> 的矢量表达式。探测器的位置矢量 <span class="math inline">\(\vec{r}\)</span> 可表示为 <span class="math display">\[\vec{r} = r \vec{e_{r}}\tag{1}\label{1}\]</span> 注意到，固定极径 <span class="math inline">\(r\)</span> 改变极角 <span class="math inline">\(\theta\)</span> 时， <span class="math inline">\(\vec{e_{r}}\)</span> 变化；而固定极角 <span class="math inline">\(\theta\)</span> 改变极径 <span class="math inline">\(r\)</span> 时，<span class="math inline">\(\vec{e_{r}}\)</span> 不变，故上式中 <span class="math inline">\(\vec{e_{r}}\)</span> 仅为 <span class="math inline">\(\theta\)</span> 的函数，即 <span class="math inline">\(\vec{e_{r}} = \vec{e_{r}}(\theta)\)</span>，类似可得 <span class="math inline">\(\vec{e_{\theta}} = \vec{e_{\theta}}(\theta)\)</span>。</p><p>首先，给出后续推导过程中涉及到的几个矢量关系式。如图 <a href="#fig2">2</a> 所示，由导数与矢量几何性质，容易证明以下两个关系式成立 <span class="math display">\[\frac{\mathrm{d} \vec{e_{r}}}{\mathrm{d} \theta} = \lim_{\Delta \theta \to 0} \frac{\left.\vec{e}_{r}\right|_{\theta + \Delta \theta} - \left.\vec{e}_{r}\right|_{\theta}}{\Delta \theta} = \vec{e_{\theta}}\tag{2}\label{2}\]</span></p><p><span class="math display">\[\frac{\mathrm{d} \vec{e_{\theta}}}{\mathrm{d} \theta} = \lim_{\Delta \theta \to 0} \frac{\left.\vec{e}_{\theta}\right|_{\theta + \Delta \theta} - \left.\vec{e}_{\theta}\right|_{\theta}}{\Delta \theta} = - \vec{e_{r}}\tag{3}\label{3}\]</span> <span id="fig2"></span></p><p><img src="/2022/03/10/Trajectory%20Derivation/Fig_2s.png" style="zoom:40%;"></p><center><font size="2.5"> 图 2 矢量关系式推导示意图 </font></center><p><br></p><p>由求导及链式法则，可得探测器的速度矢量 <span class="math inline">\(\vec{v}\)</span> 为 <span class="math display">\[\vec{v} = \frac{\mathrm{d} \vec{r}}{\mathrm{d} t} = \dot{r} \vec{e_{r}} + r \frac{\mathrm{d} \vec{e_{r}}}{\mathrm{d} t} = \dot{r} \vec{e_{r}} + r \frac{\mathrm{d} \vec{e_{r}}}{\mathrm{d} \theta} \dot{\theta}\tag{4}\label{4}\]</span> 上式中简写符号 <span class="math inline">\(\dot{x}\)</span> 表示将变量 <span class="math inline">\(x\)</span> 对时间 <span class="math inline">\(t\)</span> 求导。将式 <span class="math inline">\(\eqref{2}\)</span> 代入式 <span class="math inline">\(\eqref{4}\)</span> 可得 <span class="math display">\[\vec{v} = \dot{r} \vec{e_{r}} + r \dot{\theta} \vec{e_{\theta}}\tag{5}\label{5}\]</span> 进一步，将上式 <span class="math inline">\(\eqref{5}\)</span> 两边对时间 <span class="math inline">\(t\)</span> 再求一次导数，代入关系式 <span class="math inline">\(\eqref{2}\)</span> <span class="math inline">\(\eqref{3}\)</span>，可得加速度矢量表达式为 <span class="math display">\[\begin{aligned}\vec{a}=\frac{\mathrm{d} \vec{v}}{\mathrm{~d} t} &amp; = \frac{\mathrm{d}}{\mathrm{d} t} \left(\dot{r} \vec{e}_{r}\right) + \frac{\mathrm{d}}{\mathrm{d} t}\left(r \dot{\theta} \vec{e}_{\theta}\right) \\&amp; = \ddot{r} \vec{e}_{r}+\dot{r} \frac{\mathrm{d} \vec{e}_{r}}{\mathrm{~d} t} + \dot{r} \dot{\theta} \vec{e}_{\theta} + r \ddot{\theta} \overrightarrow{e_{\theta}} + r \dot{\theta} \frac{\mathrm{d} \vec{e}_{\theta}}{\mathrm{d} t} \\&amp; = \ddot{r} \vec{e}_{r} + \dot{r} \dot{\theta} \vec{e_{\theta}} + \dot{r} \dot{\theta} \vec{e_{\theta}} + r \ddot{\theta} \vec{e_{\theta}} - r \dot{\theta}^{2} \vec{r_{r}} \\&amp; = \left(\ddot{r} - r \dot{\theta}^2\right) \vec{e_{r}} + \left(2 \dot{r} \dot{\theta} + r \ddot{\theta}\right) \vec{e_{\theta}}\end{aligned}\tag{6}\label{6}\]</span> 由于探测器所受天体的万有引力提供其全部加速度，故由牛顿第二定律可列出方程 <span class="math display">\[\vec{F} = m \vec{a}\tag{7}\label{7}\]</span> 根据万有引力定律 <span class="math display">\[\vec{F} = - \frac{G M m}{r^{2}} \vec{e_{r}}\tag{8}\label{8}\]</span> 其中，<span class="math inline">\(G\)</span> 为引力常量。联立式 <span class="math inline">\(\eqref{7}\)</span> <span class="math inline">\(\eqref{8}\)</span>，并将式 <span class="math inline">\(\eqref{6}\)</span> 代入，可得 <span class="math display">\[- \frac{G M m}{r^{2}} \vec{e_{r}} = m \left[\left(\ddot{r} - r \dot{\theta}^2\right) \vec{e_{r}} + \left(2 \dot{r} \dot{\theta} + r \ddot{\theta}\right) \vec{e_{\theta}}\right]\tag{9}\label{9}\]</span> 整理可得 <span class="math display">\[m \left[\left(\ddot{r} - r \dot{\theta}^2\right) + \frac{G M}{r^{2}}\right] \vec{e_{r}} + m \left(2 \dot{r} \dot{\theta} + r \ddot{\theta}\right) \vec{e_{\theta}} = \vec{0}\tag{10}\label{10}\]</span> 由单位矢量 <span class="math inline">\(\vec{e_{r}}\)</span> 与 <span class="math inline">\(\vec{e_{\theta}}\)</span> 的正交性，可得以下方程组 <span class="math display">\[\begin{align}&amp;\left(\ddot{r} - r \dot{\theta}^2\right) + \frac{G M}{r^{2}} = 0 \quad \tag{11} \label{11}\\&amp;\left(2 \dot{r} \dot{\theta} + r \ddot{\theta}\right) = 0  \quad \tag{12} \label{12}\end{align}\]</span> 观察上述方程组，其中出现 <span class="math inline">\(r\)</span> 与 <span class="math inline">\(\theta\)</span> 对时间 <span class="math inline">\(t\)</span> 的各阶导数，而轨道方程与时间应无关，故考虑将关于时间的导数项转换为 <span class="math inline">\(r\)</span> 与 <span class="math inline">\(\theta\)</span> 之间的关系式。</p><p>将式 <span class="math inline">\(\eqref{12}\)</span> 两边同乘 <span class="math inline">\(r\)</span> ，左边化为全微分，则方程可改写为 <span class="math display">\[\frac{\mathrm{d}}{\mathrm{d} t} \left(r^{2} \dot{\theta}\right) = 2 r \dot{r} \dot{\theta} + r^{2} \ddot{\theta} = 0\tag{13}\label{13}\]</span> 则解得 <span class="math display">\[r^{2} \dot{\theta} = L = \operatorname{const}.\tag{14}\label{14}\]</span> 由此可知，在探测器绕天体运行过程中，<span class="math inline">\(r^{2} \dot{\theta}\)</span> 为一守恒量，被称为<strong>第一守恒量</strong>，采用 <span class="math inline">\(L\)</span> 表示，实际上它是物体在有心力运动下<strong>角动量守恒</strong>的数学体现。</p><p>根据式 <span class="math inline">\(\eqref{14}\)</span>，可得 <span class="math display">\[\dot{\theta} = \frac{L}{r^{2}}\tag{15}\label{15}\]</span> 将上式 <span class="math inline">\(\eqref{15}\)</span> 代入式 <span class="math inline">\(\eqref{11}\)</span>，整理可得 <span class="math display">\[\ddot{r} - r \left(\frac{L}{r^{2}}\right)^{2} + \frac{G M}{r^{2}} = 0\tag{16}\label{16}\]</span> 由上式可得根据守恒量，可以消去 <span class="math inline">\(\theta\)</span> 关于时间 <span class="math inline">\(t\)</span> 的导数，下面尝试消去 <span class="math inline">\(r\)</span> 关于时间 <span class="math inline">\(t\)</span> 的导数。由链式法则可得 <span class="math display">\[\dot{r} = \frac{\mathrm{d} r}{\mathrm{d} t} = \frac{\mathrm{d} r}{\mathrm{d} \theta} \dot{\theta} = r_{\theta} \cdot \frac{L}{r^{2}}\tag{17}\label{17}\]</span> 上式中，<span class="math inline">\(r_{\theta}\)</span> 代表变量 <span class="math inline">\(r\)</span> 对变量 <span class="math inline">\(\theta\)</span> 求导。再将上式两边对时间 <span class="math inline">\(t\)</span> 求导一次，可得 <span class="math display">\[\ddot{r} = \frac{\mathrm{d} \dot{r}}{\mathrm{d} t} = \frac{\mathrm{d}}{\mathrm{d} t} \left(r_{\theta} \frac{L}{r^{2}}\right) = \frac{\mathrm{d}}{\mathrm{d} \theta} \left(r_{\theta} \cdot \frac{L}{r^{2}}\right) \dot{\theta} = \frac{\mathrm{d}}{\mathrm{d} \theta} \left(r_{\theta} \cdot \frac{L}{r^{2}}\right) \cdot \frac{L}{r^{2}}\tag{18}\label{18}\]</span> 将上式 <span class="math inline">\(\eqref{18}\)</span> 代入式 <span class="math inline">\(\eqref{16}\)</span> 可得 <span class="math display">\[\frac{\mathrm{d}}{\mathrm{d} \theta} \left(r_{\theta} \cdot \frac{L}{r^{2}}\right) \cdot \frac{L}{r^{2}} - r \left(\frac{L}{r^{2}}\right)^{2} + \frac{G M}{r^{2}} = 0\tag{19}\label{19}\]</span> 将上式两边同乘 <span class="math inline">\(r^{2} / L\)</span>，化简可得 <span class="math display">\[\frac{\mathrm{d}}{\mathrm{d} \theta} \left(r_{\theta} \cdot \frac{\mathrm{d}}{\mathrm{d} r} \left(\frac{L}{r}\right)\right) + r \cdot \left(\frac{L}{r^{2}}\right) = \frac{G M}{L}\tag{20}\label{20}\]</span> 进一步整理可得 <span class="math display">\[\frac{\mathrm{d}^{2}}{\mathrm{d} \theta^{2}} \left(\frac{L}{r}\right) + \left(\frac{L}{r}\right) = \frac{G M}{L}\tag{21}\label{21}\]</span> 上式可视为变量 <span class="math inline">\((L/r)\)</span> 关于自变量 <span class="math inline">\(\theta\)</span> 的二阶非齐次线性微分方程，其解为齐次微分方程通解与原方程某特解的叠加，具体求解过程从略。得到最终解为 <span class="math display">\[\frac{L}{r} = A \cos(\theta + \psi) + \frac{G M}{L}\tag{22}\label{22}\]</span> 其中，<span class="math inline">\(A,\;\psi\)</span> 为待定系数。将上式 <span class="math inline">\(\eqref{22}\)</span> 变形，可得 <span class="math display">\[r = \frac{\frac{L^{2}}{G M}}{1 + \frac{L A}{G M} \cos(\theta + \psi)}\tag{23}\label{23}\]</span> 上式即为探测器的轨道方程，其形式为极坐标系下的圆锥曲线，但其中仍包含未知系数。下面引入条件来确定待定常数 <span class="math inline">\(A,\;\psi\)</span>，进一步化简轨道方程。</p><ul><li><strong>条件 1：假设选择极轴（即 <span class="math inline">\(\theta = 0\)</span> 的径矢）穿过探测器关于天体的近地点，确定 <span class="math inline">\(\psi\)</span>。</strong></li></ul><p>如图 <a href="#fig3">3</a> 所示，由天体运动物理知识可知，近地点为探测器轨道曲率半径最小的位置，其值设为 <span class="math inline">\(r_{\min}\)</span>。</p><p><span id="fig3"></span></p><p><img src="/2022/03/10/Trajectory%20Derivation/Fig_3s.png" style="zoom:40%;"></p><center><font size="2.5"> 图 3 选择极轴穿过近地点情况下探测器绕天体运动示意图 </font></center><p><br></p><p>若当 <span class="math inline">\(\theta = 0\)</span> 时，有 <span class="math inline">\(r = r_{\min}\)</span>，则须满足轨道方程分母中，<span class="math inline">\(\cos(\theta + \psi)\)</span> 取得极大值，故在一个周期 <span class="math inline">\([0, 2 \pi)\)</span> 内，当且仅当 <span class="math inline">\(\psi = 0\)</span> 时，满足条件，此时有 <span class="math display">\[r_{\min} = \frac{\frac{L^{2}}{G M}}{1 + \frac{L A}{G M}}\tag{24}\label{24}\]</span></p><ul><li><strong>条件 2：假设给定探测器的总能量为 <span class="math inline">\(E_{0}\)</span>，由能量守恒关系确定 <span class="math inline">\(A\)</span>。</strong></li></ul><p>在满足<strong>条件 1</strong> 的约束下，考虑<strong>条件 2</strong>。</p><p>一方面，探测器在近地点满足 <span class="math inline">\(r = r_{\min}\)</span>，且其运行速度达到最大值 <span class="math inline">\(V = V_{\max}\)</span>，且满足速度为轨道切向，法向分量为零，即 <span class="math inline">\(V = V_{\tau}\)</span>。</p><p>另一方面，考虑式 <span class="math inline">\(\eqref{14}\)</span> 角动量守恒量，在近地点满足以下关系</p><p><span class="math display">\[r^{2} \dot{\theta} = r \cdot \left(r \dot{\theta}\right) = r \cdot V_{\tau} = r_{\min} \cdot V_{\max} = L\tag{25}\label{25}\]</span></p><p>故由上式 <span class="math inline">\(\eqref{25}\)</span> 可得关系式 <span class="math display">\[V_{\max} = \frac{L}{r_{\min}}\tag{26}\label{26}\]</span> 探测器的总能量 <span class="math inline">\(E_{0}\)</span> 由动能与势能组成，在近地点有以下守恒方程成立 <span class="math display">\[E_{0} = \frac{1}{2} m V_{\max}^{2} - \frac{G M m}{r_{\min}} = \frac{1}{2} m \cdot \frac{L^{2}}{r_{\min}^{2}} - \frac{G M m}{r_{\min}}\tag{27}\label{27}\]</span> 联立式 <span class="math inline">\(\eqref{24}\)</span> <span class="math inline">\(\eqref{27}\)</span>，可解得 <span class="math display">\[A = \frac{G M}{L} \sqrt{1 + \frac{2 E_{0} L^{2}}{G^{2} M^{2}}}\tag{28}\label{28}\]</span> 故通过引入以上两个条件，已经确定出待定系数 <span class="math inline">\(A,\;\psi\)</span>，将其代入式 <span class="math inline">\(\eqref{23}\)</span> 可得 <span class="math display">\[r = \frac{\frac{L^{2}}{G M}}{1 + \sqrt{1 + \frac{2 E_{0} L^{2}}{G^{2} M^{2}}} \cos \theta}\tag{29}\label{29}\]</span> 上式即为考虑极轴穿过近地点且携带总能量 <span class="math inline">\(E_{0}\)</span> 的探测器绕天体运行的<strong>最终轨道方程</strong>，其为圆锥曲线形式。</p><p>下面对轨道方程 <span class="math inline">\(\eqref{29}\)</span> 进行分析。定义<strong>离心率</strong> <span class="math display">\[e = \sqrt{1 + \frac{2 E_{0} L^{2}}{G^{2} M^{2}}}\tag{30}\label{30}\]</span> 由圆锥曲线知识，不同离心率 <span class="math inline">\(e\)</span> 情况的轨道形状如下： <span class="math display">\[\left\{\begin{array}{c}e = 0, \quad \quad &amp;\text{Circle} \\0 &lt; e &lt; 1, \quad \quad &amp;\text{Ellipse}\\e = 1, \quad \quad &amp;\text{Parabola (escape)}\\e &gt; 1, \quad \quad &amp;\text{Hyperbola (escape)}\end{array}\right.\tag{31}\label{31}\]</span> 由式 <span class="math inline">\(\eqref{30}\)</span> 表达式，可知探测器携带的总能量 <span class="math inline">\(E_{0}\)</span> 与离心率 <span class="math inline">\(e\)</span> 之间相关，也即与轨道形状密切相关，分别讨论如下：</p><ul><li><strong>情形 1：当 <span class="math inline">\(E_{0} \geqslant 0\)</span> 时，<span class="math inline">\(e \geqslant 1\)</span>。</strong></li></ul><p>此时探测器沿开放轨道将作<strong>逃逸运动</strong>，不会被天体捕获。该情形对应最小能量为 <span class="math inline">\(E_{0} = 0\)</span>，轨道为<strong>抛物线（<em>Parabola</em>）</strong>，结合式 <span class="math inline">\(\eqref{27}\)</span> 可解得 <span class="math inline">\(V_{\max}\)</span>，此为探测器绕天体运行的<strong>最小逃逸速度</strong>。对于地球，可计算该速度为 <span class="math display">\[V_{\max} = \sqrt{\frac{2 G M}{r_{\min}}} = \sqrt{\frac{2 \times 6.67 \times 10^{-11} \times 5.97 \times 10^{24}}{6.38 \times 10^{6}}} \approx 11.2 \; \text{km/s}\tag{32}\label{32}\]</span> 此也即探测器脱离地球引力控制所需的<strong>第二宇宙速度</strong>。</p><ul><li><strong>情形 2：当 $ - (G M m)/(2 r) E_{0} &lt; 0$ 时，<span class="math inline">\(0 \leqslant e &lt; 1\)</span>。</strong></li></ul><p>此时探测器沿椭圆轨道，围绕绕天体作周期性运动，被天体捕获。若 <span class="math inline">\(E_{0} = -(G M m)/(2 r)\)</span>，则 <span class="math inline">\(e = 0\)</span>，轨道为<strong>圆（<em>Circle</em>）</strong>，结合式 <span class="math inline">\(\eqref{27}\)</span> <span class="math inline">\(\eqref{29}\)</span> 可解得 <span class="math inline">\(V_{\max}\)</span>，此为探测器绕天体周期运动的最小围绕速度。对于地球，可计算该速度为 <span class="math display">\[V_{\max} = \sqrt{\frac{G M}{r_{\min}}} = \sqrt{\frac{6.67 \times 10^{-11} \times 5.97 \times 10^{24}}{6.38 \times 10^{6}}} \approx 7.9 \; \text{km/s}\tag{33}\label{33}\]</span> 此也即探测器围绕地球旋转所需的<strong>第一宇宙速度</strong>。</p><ul><li><strong>情形 3：当 <span class="math inline">\(E_{0} &lt; - (G M m)/(2 r)\)</span> 时，<span class="math inline">\(e &lt; 0\)</span>。</strong></li></ul><p>此时，探测器的总能量无法将探测器加速至天体的第一宇宙速度，探测器将返回天体表面（<em>crash to earth</em>）而失效。</p><p>另外，还可以在<strong>拉格朗日（<em>Lagrangrian</em>）</strong>或者<strong>哈密顿（<em>Hamiltonian</em>）</strong>力学框架下以更精练的方法对方程进行推导。</p><p>值得一提的是，<em>Hamiltonian</em> 力学框架是量子力学的奠基石。</p><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/03/10</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Theory</tag>
      
      <tag>Aeronautics &amp; Astronautics</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有趣的流体小知识（三）——Lighthill声学比拟</title>
    <link href="/2022/02/19/FM-Lighthill/"/>
    <url>/2022/02/19/FM-Lighthill/</url>
    
    <content type="html"><![CDATA[<h1 id="有趣的流体小知识三lighthill声学比拟">有趣的流体小知识（三）——Lighthill声学比拟</h1><div class="note note-success">            <p><em>「这篇论文是一项杰作，充分利用数学工具对其观点进行了优美的阐述，所有分析都建立在最基础的层次上，他推导出的产生声音的精确理论，完全秉承了几百年来声学大师的传统理念。如果 Rayleigh 或者 Stokes 当时就意识到这个问题的重要性，同样会推导出这些结果。气动声学从此翻开了崭新的一页……」</em></p>          </div><div data-align="right">—— 英国流体力学家，气动声学主要奠基人 John Ffowcs Williams</div><div class="note note-success">            <p><em><strong>「自古英雄出少年」</strong>，Lighthill 在尝试解释射流噪声问题时，并没有运用非常复杂的数学工具或理论，而是结合流体方程，<strong>对流动发声的物理源头</strong>进行数学建模与比拟分析，从而找到了<strong>声场与流场之间的相似关联</strong>，并最终给出<strong>简洁的数学表达形式</strong>。</em></p>          </div><h2 id="如何解释气流噪声传统声学的困境">如何解释气流噪声——传统声学的困境</h2><p>声音传播是自然界中最常见的一种物理现象。风吹过电线会发出奇特的鸣叫，气流吹过竹笛会产生美妙的旋律。从音乐到噪声，从次声波到超声波，从说话鼓掌到喷气式发动机轰鸣……声音传播与我们的生活息息相关。</p><p>声学，作为一门古老的学科，其已经有数百年的发展历史。<strong>经典声学</strong>认为，声音在气体中的传播是基于分子的运动，是由分子碰撞引起的。振动发出的声波在空间内传播，距离声源较近的介质分子首先感受到声波产生的微小的压强与密度的变化，进而通过分子碰撞将这种影响传递给相邻的分子，如图 <a href="#fig1">1</a> 所示。通过这一种类似<strong>「多米诺骨牌」</strong>式的连锁反应，声波由近及远传播，并随着距离与时间的增大而不断衰减。声波传播实质上是对扰动的一种输运。</p><p><span id="fig1"></span></p><p><img src="/2022/02/19/FM-Lighthill/1.jpg" style="zoom:67%;"></p><center><font size="2.5"> 图 1 声波与声音传播示意图 </font></center><p><br></p><p>在20世纪50年代之前，人们对声音产生的机理仍然停留在传统声学的范畴。第二次世界大战之后，航空工业在欧美等工业强国得到迅速发展，喷气式发动机的出现，使得人类突破音障成为可能。然而，<strong>严重的气流噪声制约着喷气式发动机的商业化应用，解决流动噪声问题成为难题</strong>。当时的工程师或研究人员仍倾向将这类发动机噪声、射流噪声、螺旋桨噪声等流动发声现象理解为流体冲击壁面振动发声。但在50年代，<em>Lilley</em> 用将铅笔放进射流中扰动流场来改变噪声模态的实验否定了这种说法。<strong>人们逐渐意识到，过去几百年的经典声学理论与认识尚无法解决具有实际工程意义的流动发声问题，亟待新的理论与学科出现。</strong></p><h2 id="伟大的妙想lighthill的声学比拟">伟大的妙想——Lighthill的声学比拟</h2><p>1949年的英国，在一趟从曼彻斯特到伦敦的列车上，一位时年25岁的年轻人在信封背面推导公式，相应思想与结果经三年几易其稿，以<em>《<strong>On sound generated aerodynamically I. General theory</strong>》</em>为题，在英国皇家学会会刊（<em>Proceedings of the Royal Society of London</em>）上正式发表。英国流体力学家、气动声学主要奠基人，也是后来为<strong>「协和号」</strong>（Concorde）超声速客机的研制做出突出贡献的 <em>John Ffowcs Williams</em> 教授曾这样评价这项工作：</p><blockquote><p><em>「这篇论文是一项杰作，充分利用数学工具对其观点进行了优美的阐述，所有分析都建立在最基础的层次上，他推导出的产生声音的精确理论，完全秉承了几百年来声学大师的传统理念。如果 Rayleigh 或者 Stokes 当时就意识到这个问题的重要性，同样会推导出这些结果。<strong>气动声学</strong>从此翻开了崭新的一页……」</em></p></blockquote><p><strong>「自古英雄出少年」</strong>，这位年轻人就是气动声学领域的奠基人与先驱者，英国著名的应用数学家，<strong>詹姆斯·莱特希尔</strong>（<em>James Lighthill</em>, 1924 ~ 1998），这项工作的核心便是提出了 <font color="red"><strong>声学比拟</strong></font> 这一重要概念，<font color="blue"><strong>是对传统声学的一次开拓性的贡献，并标志着气动声学这一交叉学科的诞生，成为一座连接流体力学与声学的桥梁。</strong></font></p><p><em>Lighthill</em> 的比拟核心思想在于，<font color="blue"><strong>将有旋的流动区域（如图 <a href="#fig2">2</a> 所示）类比为一个四极子声源，从而将由流动引起的声波传播问题，等效为经典的有源声学问题。</strong></font>这种思想充分继承了声波传播的传统理念，并对流动发声的物理现象给出合理的解释，是对声音产生机理的丰富与拓展，具有深刻的物理内涵。</p><p><span id="fig2"></span></p><p><img src="/2022/02/19/FM-Lighthill/2.png" style="zoom:67%;"></p><center><font size="2.5"> 图 2 由有旋流动引起的声波传播示意图 </font></center><p><br></p><h2 id="优美的阐述应用数学与物理内涵">优美的阐述——应用数学与物理内涵</h2><p>在对科学问题与物理现象具有深刻理解后，应用数学的下一个重要步骤便是建立严谨的数学模型来描述现象。而 <em>Lighthill</em> 正是采用这样的思想<a href="#refer-anchor-1"><sup>[1]</sup></a><a href="#refer-anchor-2"><sup>[2]</sup></a>，从最基本的流动运动 <strong><em>Navier-Stokes（N-S）</em></strong>方程出发，推导声学比拟方程，得到流体发声现象的数学阐述。下面对这一过程涉及的应用数学方法与物理内涵进行说明。</p><p>考虑无界区域内由局部有旋流动区域所引起的扰动传播问题。在无穷远处流体处于静止状态，相应的流体压强、密度和声速分别记为 <span class="math inline">\(p_{0} \, , \rho_{0} \,\)</span> 和 <span class="math inline">\(c_{0}\)</span>。忽略体积力，写出流体运动的基本控制方程为 <span class="math display">\[\frac{\partial\rho}{\partial t}+\frac{\partial\left(\rho u_i\right)}{\partial x_i}=0\tag{1}\label{1}\]</span></p><p><span class="math display">\[\frac{\partial\left(\rho u_i\right)}{\partial t}+\frac{\partial\left(\rho u_iu_j\right)}{\partial x_i}=-\frac{\partial p}{\partial x_i}+\frac{\partial\tau_{ij}}{\partial x_j}\tag{2}\label{2}\]</span></p><p>其中，<span class="math inline">\(p, \,\rho\)</span> 和 <span class="math inline">\(u_{i}\,(i = 1,2,3)\)</span> 分别代表气体压强、密度和速度。<span class="math inline">\(\tau_{ij}\)</span> 为黏性应力项（忽略雷诺应力），其形式为 <span class="math display">\[\tau_{ij}=2\mu S_{ij}-\frac{2}{3}\delta_{ij}\nabla\cdot\mathbf{u}=\mu\left(\frac{\partial u_i}{\partial x_j}+\frac{\partial u_j}{\partial x_i}-\frac{2}{3}\delta_{ij}\frac{\partial u_k}{\partial x_k}\right)\tag{3}\label{3}\]</span> 则动量方程可进一步写成 <span class="math display">\[\frac{\partial\left(\rho u_i\right)}{\partial t}=-\frac{\partial\pi_{ij}}{\partial x_j}\tag{4}\label{4}\]</span> 其中<strong>定义<font color="red">动量通量张量</font></strong>为 <span class="math display">\[\pi_{ij}=\rho u_iu_j+\left(p-p_0\right)\delta_{ij}-\tau_{ij}\tag{5}\label{5}\]</span> 在经典声学理论中（理想可压缩流体中线性小扰动引起的流动），<span class="math inline">\(\pi_{ij}\)</span> 可以退化为 <span class="math display">\[\pi_{ij}^0=\left(p-p_0\right)\delta_{ij}=c_0^2\left(\rho-\rho_0\right)\delta_{ij}\tag{6}\label{6}\]</span> 利用上式，动量方程可化为 <span class="math display">\[\frac{\partial\left(\rho u_i\right)}{\partial t}+\frac{\partial}{\partial x_i}\left[c_0^2\left(\rho-\rho_0\right)\right]=0\tag{7}\label{7}\]</span> 在连续方程中引入 <span class="math inline">\(\rho_{0}\)</span> ，可以得到 <span class="math display">\[\frac{\partial}{\partial t}\left(\rho-\rho_0\right)+\frac{\partial\left(\rho u_i\right)}{\partial x_i}=0\tag{8}\label{8}\]</span> 由以上两式联立，可消去 <span class="math inline">\(\rho u_{i}\)</span> 项，即得 <span class="math display">\[\left(\frac{1}{c_0^2}\frac{\partial^2}{\partial t^2}-\nabla^2\right)\left[c_0^2\left(\rho-\rho_0\right)\right]=0\tag{9}\label{9}\]</span> 上式即为经典声学的<strong>无源齐次双曲波动方程</strong>，是传统声学理论的奠基性方程，注意引入了理想无黏和线性化假设。<font color="blue"><strong><em>Lighthill</em> 的过人之处在于，利用比拟思想，考虑不对动量通量张量进行简化，即舍去理想化假设，来刻画控制流动的物理项对经典声学波动方程的影响。</strong></font>对于一般黏性流动，<strong>引入 <em>Lighthill</em> 张量</strong> <span class="math display">\[T_{ij}=\pi_{ij}-\pi_{ij}^0=\rho u_iu_j+\left[\left(p-p_0\right)-c_0^2\left(\rho-\rho_0\right)\right]\delta_{ij}-\tau_{ij}\tag{10}\label{10}\]</span> 则动量方程可化为 <span class="math display">\[\frac{\partial\left(\rho u_i\right)}{\partial t}+\frac{\partial\pi_{ij}^0}{\partial x_j}=-\frac{\partial T_{ij}}{\partial x_j}\tag{11}\label{11}\]</span> 类似地，将动量通量张量代入可得 <span class="math display">\[\frac{\partial\left(\rho u_i\right)}{\partial t}+\frac{\partial}{\partial x_j}\left[c_0^2\left(\rho-\rho_0\right)\right]=-\frac{\partial T_{ij}}{\partial x_j}\tag{12}\label{12}\]</span> 最终消去 <span class="math inline">\(\rho u_{i}\)</span> 项，可以得到 <span class="math display">\[\left(\frac{1}{c_0^2}\frac{\partial^2}{\partial t^2}-\nabla^2\right)\left[c_0^2\left(\rho-\rho_0\right)\right]=\frac{\partial^2T_{ij}}{\partial x_i\partial x_j}\tag{13}\label{13}\]</span> 这就是著名的 <font color="blue"><strong><em>Lighthill</em> 方程</strong></font>，也是<font color="red"><strong>气动声学领域的奠基性方程</strong></font>。由上述推导可以看出，<em>Lighthill</em> 方程由流体控制 <em>N-S</em> 方程直接推出，没有添加任何其他假设或者参量，是一个「精确」的方程。同时，对比 <em>Lighthill</em> 方程与经典声学双曲波动方程，两者仅在右端源项存在差异，其中流动发声声源为由 <em>Lighthill</em> 张量的空间二阶梯度组成的四极子声源。整个推导过程中，数学演算严谨、干净、优美，物理内涵清晰易懂，依赖概念虽异常基础，获得结论却十分震撼。</p><p>作为一名流体力学研究者，<em>Lighthill</em> 对流体性质首先拥有敏锐的直觉与认知，但他又不仅仅局限于流体领域的探索，而是大胆迈出去，汲取传统声学的理论精华，充分发挥类比与想象，寻找运动流体与发声声源这本不相关的二者内在的相似性，并运用数学工具，成功建立精准简洁的数学描述。这种由学科交叉促生的比拟思想，不仅拥有非凡的理论与实际应用价值，更具有拓展与延伸的生命力。</p><p>历史上，<em>Lighthill</em> 的声学比拟理论经由 <em>Curle</em> 的推广<a href="#refer-anchor-3"><sup>[3]</sup></a>用于解释固壁发声问题。一般形式的声学比拟方程（<strong><em>Ffowcs Williams and Hawkings equation, FW-H</em></strong><a href="#refer-anchor-4"><sup>[4]</sup></a>）在物理上清晰解释了运动物体的三个气动声源（如图 <a href="#fig3">3</a> 所示）：厚度噪声（单极子噪声）、载荷噪声（偶极子噪声）以及湍流噪声（四极子噪声），推动了气动声学学科的深入发展。</p><p><span id="fig3"></span></p><p><img src="/2022/02/19/FM-Lighthill/3.png" style="zoom:120%;"></p><center><font size="2.5"> 图 3 气动声源的三种类型示意图 </font></center><p><br></p><h2 id="有趣的故事lighthill的著名预测">有趣的故事——Lighthill的著名预测</h2><p><strong>有趣的是，</strong>正是这样一位应用数学大师与交叉学科的先行者，<em>Lighthill</em> 在1973年提交给英国科学与工程研究委员会的名为《<em>Artificial Intelligence: A General Survey</em>》的一篇评论中，对当时尚在襁褓的人工智能（Artificial Intelligence, AI），表达了对这一领域许多核心研究方面的非常悲观的预测，称<strong>「该领域迄今为止的发现尚未产生当时承诺的重大影响」</strong>（<em>「In no part of the field have the discoveries made so far produced the major impact that was then promised」</em>），并直接导致当时英国政府对大学的人工智能研究停止拨款。而在21世纪的今天，人工智能技术作为前沿交叉学科的代表，其各个研究方向已经成为炙手可热。<em>Lighthill</em> 的预测似乎是错误的，这不禁引发我们思考，应如何看待应用数学与学科交叉的未来？</p><p><strong><em>Lighthill</em> 的传奇已经谢幕，但气动声学与人工智能的发展正欣欣向荣。他的人生故事依旧启发我们思考：当充满风险的新事物、新机遇出现时，我们应该固守成规，还是开拓进取？</strong></p><hr><p>以上就是本文全部内容，如有疑问，敬请大家批评指正！</p><p>相应文章也将发布在我的 <a href="https://space.bilibili.com/167343763/article">B站空间</a> 、<a href="https://www.zhihu.com/column/c_1477306597446213634">知乎专栏</a> 上。后续我会不定期更新本博客与专栏，欢迎大家关注！</p><hr><h2 id="参考文献">参考文献</h2><div id="refer-anchor-1"></div><ul><li>[1] Lighthill, M. J. (1952). On sound generated aerodynamically I. General theory. <em>Proceedings of the Royal Society of London. Series A. Mathematical and Physical Sciences</em>, 211(1107), 564-587.</li></ul><div id="refer-anchor-2"></div><ul><li>[2] Lighthill, M. J. (1954). On sound generated aerodynamically II. Turbulence as a source of sound. <em>Proceedings of the Royal Society of London. Series A. Mathematical and Physical Sciences</em>, 222(1148), 1-32.</li></ul><div id="refer-anchor-3"></div><ul><li>[3] Curle, N. (1955). The influence of solid boundaries upon aerodynamic sound. <em>Proceedings of the Royal Society of London. Series A. Mathematical and Physical Sciences</em>, 231(1187), 505-514.</li></ul><div id="refer-anchor-4"></div><ul><li>[4] Williams, J. F., &amp; Hawkings, D. L. (1969). Sound generation by turbulence and surfaces in arbitrary motion. <em>Philosophical Transactions for the Royal Society of London. Series A, Mathematical and Physical Sciences</em>, 321-342.</li></ul><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/02/19</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有趣的流体小知识（二）——神奇的卡门涡街</title>
    <link href="/2022/02/13/FM-Note-Karman-Vortex-Street/"/>
    <url>/2022/02/13/FM-Note-Karman-Vortex-Street/</url>
    
    <content type="html"><![CDATA[<h1 id="有趣的流体小知识二神奇的卡门涡街">有趣的流体小知识（二）——神奇的卡门涡街</h1><div class="note note-success">            <p><em><strong>天才通常拥有比常人敏锐的洞察力。</strong>实验中的这种反常现象<strong>引起了冯·卡门的注意</strong>，他想「也许振动不是偶然的，而是由内在原因决定的」。于是卡门从理论上进行思考，起初他设想圆柱体后的水流形成两道对称排列但反方向的旋涡，但发现这种状态不能维持，很快不稳定。于是他<font color="red"><strong>假设两道旋涡交错排列</strong></font>，计算结果表明这种状态在一定条件下能够维持。卡门将计算结果向导师普朗特报告。随即普朗特命卡门写出论文发表。这是卡门的第一篇论文，也是他的<strong>成名之作</strong>。这个关于涡街的理论被后来众多实验证实。<strong>「卡门涡街」的名称，也沿用至今</strong>。</em></p>          </div><h2 id="历史注记">历史注记</h2><p align="left"><i> <b>摘自 Wikipedia</b> <a href="https://en.wikipedia.org/wiki/K%C3%A1rm%C3%A1n_vortex_street" style="text-decoration: none">"Kármán vortex street" </a></i></p><h3 id="什么是卡门涡街">什么是卡门涡街</h3><blockquote><p><em>In fluid dynamics, a <strong>Kármán vortex street</strong> (or a <strong>von Kármán vortex street</strong>) is a repeating pattern of swirling vortices, caused by a process known as vortex shedding, which is responsible for the unsteady separation of flow of a fluid around blunt bodies.</em></p></blockquote><p>在流体动力学中，<strong>卡门涡街</strong> (或 <strong>冯·卡门涡街</strong>)是一种重复的旋涡模式，由一个被称作旋涡脱落的过程引起，该过程是钝体周围的流体流动产生非定常分离的原因之一。</p><blockquote><p><em>It is named after the engineer and fluid dynamicist <strong>Theodore von Kármán</strong> and is responsible for such phenomena as the "singing" of suspended telephone or power lines and the vibration of a car antenna at certain speeds. Mathematical modeling of von Kármán vortex street can be performed using different techniques including but not limited to solving the full Navier-Stokes equations with k-epsilon, SST, k-omega and Reynolds stress, and large eddy simulation (LES) turbulence models, or by numerically solving some dynamic equations such as the Ginzburg-Landau equation.</em></p></blockquote><p>它以工程师兼流体动力学家 <strong>西奥多·冯·卡门</strong> 的名字命名。<strong>悬挂在空中的电话或电力线会发出「嗡鸣」，汽车天线在特定风速下会振动，卫星图片上岛群后面出现的尾迹</strong>（如图 <a href="#fig1">1</a> 所示）……这些现象都是由卡门涡街造成的。卡门涡街有多种数学建模方式，比如求解应用 <em>k-epsilon</em>, <em>SST</em>, <em>k-omega</em>, 雷诺应力和大涡模拟 (<em>LES</em>) 湍流模型的完整 <em>Navier-Stokes</em> 方程，或数值求解 <em>Ginzburg-Landau</em> 方程等动力学方程。</p><p><span id="fig1"></span></p><p><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/4.jpg" label="001" style="zoom:50%;"></p><center><font size="2.5"> 图 1  卫星拍摄的群岛后出现的卡门涡街 </font></center><p><br></p><h3 id="流体力学大师航空航天奇才">流体力学大师，航空航天奇才</h3><p><strong>西奥多·冯·卡门</strong>（1881年5月11日 ~ 1963年5月6日），匈牙利犹太人，1936年入美国籍，是20世纪最伟大的航天工程学家，开创了数学和基础科学在航空航天和其他技术领域的应用，被誉为「航空航天时代的科学奇才」。 卡门师从有「现代流体力学之父」「空气动力学之父」之称的普朗特（我国著名流体力学家 <strong>陆士嘉先生</strong> 是普朗特的唯一亲传女弟子）。 他所在的加利福尼亚理工学院实验室后来成为美国国家航空和航天喷气实验室（<em>NASA JPL</em>），我国著名科学家<strong>钱伟长、钱学森、郭永怀、林家翘</strong>都是他的亲传弟子。同时，卡门在我国老百姓中知名度也很高。</p><p>冯·卡门在航空事业上的卓越成就是无可辩驳的。航空学和航天学上一些最光辉的理论、概念都是以他的名字命名，月球上也有一个名为冯·卡门的陨石坑。而航空史上令人瞩目的里程碑，如齐柏林飞艇、风洞，滑翔机和火箭…… 可以说20世纪的一切实际飞行和模拟飞行的成功都与他有着密切联系。卡门特别的贡献包括非弹性弯曲，环筒流的非定常尾迹，层流稳定性，紊流，定常和非定常流中的翼型，边界层以及超音速空气动力学。在其他领域他也有贡献，包括弹性，振动，传热和结晶学等。</p><h3 id="卡门涡街的发现">卡门涡街的发现</h3><blockquote><p>Although named after Theodore von Kármán, he acknowledged that the vortex street had been studied earlier by Arnulph Mallock and Henri Bénard. Kármán tells the story in his book Aerodynamics:</p></blockquote><p>虽然以冯·卡门的名字命名，卡门本人指出 <strong>阿努夫·马洛克</strong> 和 <strong>亨利·伯纳德</strong> 早前就对漩涡街进行过研究。卡门在他的《<em>Aerodynamics</em>》（空气动力学）著作中讲述了这样一个有趣的故事：</p><blockquote><p><em>...Prandtl had a doctoral candidate, Karl Hiemenz, to whom he gave the task of constructing a water channel in which he could observe the separation of the flow behind a cylinder. The object was to check experimentally the separation point calculated by means of the boundary-layer theory. For this purpose, it was first necessary to know the pressure distribution around the cylinder in a steady flow. Much to his surprise, Hiemenz found that the flow in his channel oscillated violently. When he reported this to Prandtl, the latter told him: 'Obviously your cylinder is not circular.' However, even after very careful machining of the cylinder, the flow continued to oscillate. Then Hiemenz was told that possibly the channel was not symmetric, and he started to adjust it. I was not concerned with this problem, but every morning when I came in the laboratory I asked him, 'Herr Hiemenz, is the flow steady now?' He answered very sadly, 'It always oscillates.'</em></p></blockquote><p>1911年，<strong>路德维希·普朗特</strong><a href="#note-anchor-1"><sup>1</sup></a> 给了他的一个博士生，<strong>卡尔·希门兹</strong><a href="#note-anchor-2"><sup>2</sup></a> 一个任务：建造一个可以观察到圆柱体后面的水流分离的水道，以通过实验来检验利用边界层理论计算出的流动分离点的正确性。为此，首先需要知道在稳定流动中圆柱体周围的压力分布。令希门兹吃惊的是，他发现管道中的流动振荡十分剧烈。当他将这一情况报告给普朗特时，导师告诉他：「很明显，你的圆柱体不是准确的圆形。」然而，即使在对圆柱进行了非常仔细的打磨之后，流动仍然在振荡。接着，普朗特又告诉希门兹可能由于槽道不对称，希门兹又开始调整它。我不是很关心这个问题，但每天早上我一进实验室就问他：「希门兹先生，现在流量稳定了吗?」他非常悲伤地回答说:「它总是振荡的。」</p><div id="note-anchor-1"></div><ul><li>注 1：近代力学奠基人之一，被誉为空气动力学之父和现代流体力学之父，冯·卡门的恩师。</li></ul><div id="note-anchor-2"></div><ul><li>注 2 ：普朗特与卡门的学生，驻点流（Plane stagnation point flow）提出与最早研究者。</li></ul><p><strong>天才通常拥有比常人敏锐的洞察力。</strong>实验中的这种反常现象<strong>立刻引起了冯·卡门的注意</strong>，他想「也许振动不是偶然的，而是由内在原因决定的」。于是卡门从理论上进行思考，起初他设想圆柱体后的水流形成两道对称排列但反方向的旋涡，但发现这种状态不能维持，很快不稳定。于是他<font color="red"><strong>假设两道旋涡交错排列</strong></font>，计算结果表明这种状态在一定条件下能够维持。卡门将计算结果向导师普朗特报告。随即普朗特命卡门写出论文发表。这是卡门的第一篇论文，也是他的成名之作。这个关于涡街的理论被后来众多实验证实。<strong>「卡门涡街」的名称，也沿用至今</strong>。</p><p>谦虚的卡门认为他在1911~1912年，对这一问题研究的贡献主要在两个方面：</p><ul><li>一是发现涡街只有当涡旋是反对称排列，且仅当行列的距离对同行列内相邻两涡旋的间隔有一定的比值时才稳定；</li><li>二是将涡系所携带的动量与阻力联系了起来。</li></ul><p>不过，这一开创性贡献足以写进后辈们的教科书了~</p><p>下面，就让我们回到1911年，感悟大师的直觉，享受物理的奇妙，体验科学的魅力。</p><h2 id="卡门的建模思路">卡门的建模思路</h2><p>物理的直觉告诉卡门，流动稳定的振荡与组合旋涡，即点涡系的稳定性有关。但是，两道对称排列但反方向的旋涡的互相诱导明显不稳定。那么如果两道旋涡交错排列呢？这样又能诞生怎样的流体之美呢？</p><p>现在构建一个按图 <a href="#fig2">2</a> 所示排列的点涡系，其由两排强度相同、符号相反，水平间距相同 (均为 <span class="math inline">\(a\)</span>)，错位排列的点涡列组成，考虑无粘情形。两排点涡位于 <span class="math inline">\(y = \pm \frac{b}{2}\)</span> 直线上。</p><p><span id="fig2"></span></p><p><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/1.png" label="001" style="zoom:67%;"></p><center><font size="2.5"> 图 2 双列交错点涡系示意图 </font></center><p><br></p><p>试解答以下问题：</p><ol type="1"><li>求 <span class="math inline">\(z = \frac{a}{2} - \mathrm{i} \frac{b}{2}\)</span> 处的点涡 <span class="math inline">\(\alpha\)</span> 速度；</li><li>绘制点涡系诱导流场的流线。并思考：<strong>当两列点涡满足什么位置关系时，点涡系能够保持无粘中性稳定</strong>？</li></ol><h2 id="模型的数学解答">模型的数学解答</h2><p>我们知道，在复平面上，考虑二维、不可压、势流情形，点涡诱导速度的复位势可以表达为<a href="#refer-anchor-1"><sup>[1]</sup></a> <span class="math display">\[W(z) = \frac{\Gamma}{2 \pi \mathrm{i}} \ln(z - z_{0})\tag{1}\label{eq1}\]</span> 其中，<span class="math inline">\(z=x + \mathrm{i} y = re^{i \theta}\)</span> 为复平面坐标，<span class="math inline">\(z_{0}\)</span> 为点涡位置。复位势可表达为 <span class="math display">\[W(z) = \phi + \mathrm{i} \psi\tag{2}\label{eq2}\]</span> 其中，<span class="math inline">\(\phi\)</span> 为速度势，<span class="math inline">\(\psi\)</span> 为流函数。</p><p>如图 <a href="#fig3">3</a> 所示，考虑放置在 <span class="math inline">\(x\)</span> 轴上，关于 <span class="math inline">\(y\)</span> 轴对称（原点布置一个点涡），强度相同，间距相同为 <span class="math inline">\(a\)</span> 的一排无穷多个点涡。</p><p><span id="fig3"></span></p><p><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/2.jpg" label="002" style="zoom:67%;"></p><center><font size="2.5"> 图 3 单列点涡系示意图 </font></center><p><br></p><p>由叠加原理，其复位势可表示为<a href="#refer-anchor-2"><sup>[2]</sup></a> <span class="math display">\[W(z)=\frac{\Gamma}{2 \pi i} \sum_{n = -\infty}^{\infty} \ln (z-n a)=\frac{\Gamma}{2 \pi i} \ln \left[\frac{\pi z}{a} \prod_{n=1}^{\infty}\left(1-\frac{z^{2}}{n^{2} a^{2}}\right)\right]+\left(\frac{\Gamma}{2 \pi i} \ln \left[\frac{a}{\pi}\left(-a^{2} )(-4 a^{2}\right) \cdots\left(-n^{2} a^{2}\right)\right]\right)\tag{3}\label{eq3}\]</span> 由正弦三角函数展开式 <span class="math display">\[\sin x = x \prod_{n=1}^{\infty}\left(1-\frac{x^{2}}{n^{2} \pi^{2}}\right)\tag{4}\label{eq4}\]</span> 则式 <span class="math inline">\(\eqref{eq3}\)</span> 可进一步简化为 <span class="math display">\[W(z)=\frac{\Gamma}{2 \pi i} \ln \left(\sin \frac{\pi z}{a}\right)\tag{5}\label{eq5}\]</span> 进而由坐标平移，写出点涡系的总复位势为 <span class="math display">\[\begin{aligned}W(z)=\frac{\Gamma}{2 \pi \mathrm{i}} \ln \frac{\sin \left[\frac{\pi}{\alpha}\left(z-\frac{b}{2} \mathrm{i}\right)\right]}{\sin \left[\frac{\pi}{\alpha}\left(z+\frac{b}{2} \mathrm{i} -\frac{a}{2}\right)\right]}\end{aligned}\tag{6}\label{eq6}\]</span> 则位于 <span class="math inline">\(\mathbf{z} = \frac{a}{2} - \mathrm{i} \frac{b}{2}\)</span> 处的点涡 <span class="math inline">\(\alpha\)</span> 被其他点涡诱导的复位势为 <span class="math display">\[\begin{aligned}W_{\alpha}(z) = W(z) + \frac{\Gamma}{2 \pi \mathrm{i}} \ln \left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\end{aligned}\tag{7}\label{eq7}\]</span> 结合以上两式，可得在点涡 <span class="math inline">\(\alpha\)</span> 处的诱导共轭复速度为 <span class="math display">\[\begin{aligned}V_{\alpha}^{*}=U_{\alpha}-\mathrm{i} V_{\alpha}=\left.\frac{\mathrm{d}}{\mathrm{d} z}\left[W(z)+\frac{\Gamma}{2 z \mathrm{i}} \ln \left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\right]\right|_{z=-\frac{b}{2} \mathrm{i}+\frac{a}{2}}\end{aligned}\tag{8}\label{eq8}\]</span> 进一步化简可得 <span class="math display">\[\begin{aligned}\begin{split}V_{\alpha}^{*} =U_{\alpha}-\mathrm{i} V_{\alpha} = &amp; \left.\frac{\mathrm{d}}{\mathrm{d} z}\left[\frac{\Gamma}{2 \pi \mathrm{i}} \ln \frac{\sin \left[\frac{\pi}{\alpha}\left(z-\frac{b}{2} \mathrm{i}\right)\right]}{\sin \left[\frac{\pi}{\alpha}\left(z+\frac{b}{2} \mathrm{i} -\frac{a}{2}\right)\right]}+\frac{\Gamma}{2 z \mathrm{i}} \ln \left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\right]\right|_{z=-\frac{b}{2} \mathrm{i}+\frac{a}{2}} \\= &amp; \frac{\Gamma}{2 \pi \mathrm{i}}\left.\left\{\frac{\pi}{a} \cdot \frac{1}{\tan \left[\frac{\pi}{a}\left(z-\frac{b}{2} \mathrm{i}\right)\right]}-\frac{\pi}{a} \cdot \frac{1}{\tan \left[\frac{\pi}{a}\left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\right]}+\frac{1}{z+\frac{b}{2} \mathrm{i}-\frac{a}{2}}\right\}\right|_{z=-\frac{b}{2} \mathrm{i}+\frac{a}{2}}\end{split}\end{aligned}\tag{9}\label{eq9}\]</span> 由 <span class="math inline">\(z \to -\frac{b}{2} \mathrm{i}+\frac{a}{2}\)</span> 时，有 <span class="math inline">\(\tan \left[\frac{\pi}{a}\left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\right] \approx \frac{\pi}{a}\left(z+\frac{b}{2} \mathrm{i}-\frac{a}{2}\right)\)</span>，代入上式 <span class="math inline">\(\eqref{eq9}\)</span>，整理有 <span class="math display">\[\begin{aligned}\begin{split}V_{\alpha}^{*} = U_{\alpha}-\mathrm{i} V_{\alpha} &amp; = \frac{\Gamma}{2 \pi \mathrm{i}}\left.\left\{\frac{\pi}{a} \cdot \frac{1}{\tan \left[\frac{\pi}{a}\left(z-\frac{b}{2} \mathrm{i}\right)\right]}\right\}\right|_{z=-\frac{b}{2} \mathrm{i}+\frac{a}{2}} \\&amp; = \frac{\Gamma}{2 \pi \mathrm{i}}\left\{\frac{\pi}{a} \cdot \frac{1}{\tan \left[\frac{\pi}{a}\left(\frac{a}{2} - b \mathrm{i} \right)\right]}\right\} \\&amp; = \frac{\Gamma}{2 \pi \mathrm{i}}\left\{\frac{\pi}{a} \cdot \frac{1}{\tan \left(\frac{\pi}{2} - \frac{\pi b \mathrm{i}}{a}\right)}\right\} \\&amp; = \frac{\Gamma}{2 a \mathrm{i}} \cdot \tan\left(\frac{\pi b \mathrm{i}}{a}\right) \\&amp; = \frac{\Gamma}{2 a \mathrm{i}} \cdot \frac{1}{- \mathrm{i}} \tanh \left(\frac{\pi b}{a}\right) \\&amp; = \frac{\Gamma}{2 a} \tanh \left(\frac{\pi b}{a}\right)\end{split}\end{aligned}\tag{10}\label{eq10}\]</span> 故在点涡 <span class="math inline">\(\alpha\)</span> 处的诱导速度为 <span class="math display">\[\begin{aligned}V_{\alpha} = U_{\alpha} = \frac{\Gamma}{2 a} \tanh \left(\frac{\pi b}{a}\right).\end{aligned}\tag{11}\label{eq11}\]</span> 事实上，式 <span class="math inline">\(\eqref{eq10}\)</span> 的推导可根据<strong>「单排点列对该列任意点涡诱导合速度为零」</strong>而更加简化，这一结论容易由对称性得到。</p><p>进一步考虑上图 <a href="#fig3">3</a> 所示单排点涡，流函数为 <span class="math display">\[\begin{aligned}\psi_{0} = \frac{1}{2 \mathrm{i}} \left[W_{0}(z) - W_{0}^{*}(z)\right] = - \frac{\Gamma}{4 \pi} \ln \frac{1}{2} \left(\cosh\frac{2 \pi y}{a} - \cos \frac{2 \pi x}{a}\right)\end{aligned}\tag{12}\label{eq12}\]</span> 由坐标平移可得，上下两排点涡分别产生的流函数为 <span class="math display">\[\begin{aligned}\psi_{1} =-\frac{\Gamma}{4 \pi} \ln \frac{1}{2}\left\{\cosh \left[\frac{2 \pi}{a}\left(y-\frac{b}{2}\right)\right]-\cos \left(\frac{2 \pi x}{a}\right)\right\}\end{aligned}\tag{13}\label{eq13}\]</span></p><p><span class="math display">\[\begin{aligned}\psi_{2} =\frac{\Gamma}{4 \pi} \ln \frac{1}{2}\left\{\cosh \left[\frac{2 \pi}{a}\left(y+\frac{b}{2}\right)\right]-\cos \left[\frac{2 \pi}{a}\left(x-\frac{a}{2}\right)\right]\right\}\end{aligned}\tag{14}\label{eq14}\]</span></p><p>由线性性质，叠加可得原点涡系的流函数最终形式为 <span class="math display">\[\begin{aligned}    \begin{split}        \psi &amp;=\psi_{1}+\psi_{2} =-\frac{\Gamma}{4 \pi} \cdot \ln \left\{\frac{\cosh \left[\frac{2 \pi}{a}\left(y-\frac{b}{2}\right)\right]-\cos \left(\frac{2 \pi x}{a}\right)}{\cosh \left[\frac{2 \pi}{a}\left(y+\frac{b}{2}\right)\right]-\cos \left[\frac{2 \pi}{a}\left(x-\frac{a}{2}\right)\right]}\right\}.        \end{split}\end{aligned}\tag{15}\label{eq15}\]</span> 以上流函数定义在笛卡尔坐标系 <span class="math inline">\((x,y)\)</span> 下。令其为常数 <span class="math inline">\(\text{const}\)</span>，则可根据不同 <span class="math inline">\(b / a\)</span> 大小的情形，来绘制一系列流线簇。</p><p>下面采用 <strong><em>Mathematica 12.3</em></strong> 软件分别绘制 <span class="math inline">\(b/a = 0.00, \;0.05, \;0.15, \;0.2806, \;0.35, \;0.50, \;1.00, \;1.50\)</span> 六种情形下的流线分布，并设置 <span class="math inline">\(a = 1, \; \Gamma = 1\)</span>，如图 <a href="#fig4">4</a> 所示，源代码见<a href="#附录">附录</a>。</p><p>可以观察到，该点涡系流线呈现在上下两排点涡间交替穿插的特点。随着 <span class="math inline">\(b/a\)</span> 增加，两排点涡间的流线扭曲程度逐渐趋缓。当 <span class="math inline">\(b/a = 0\)</span> 时，该点涡系退化为单排点涡系。</p><p>值得注意的是，当 <span class="math inline">\(b/a = 0.2806\)</span> 时，该点涡系正是由冯·卡门提出的<strong>唯一能够保持无粘中性稳定</strong>的情形，即为著名的<strong>卡门涡街 (von Kármán Vortex Street)</strong>。这里有关点涡系稳定性的推导这里从略，详细请参考相关文献，不再列出。</p><p><span id="fig4"></span></p><table><thead><tr class="header"><th style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_1.png" style="zoom: 67%;"></th><th style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_2.png" style="zoom: 67%;"></th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">(<em>a</em>) <em>b/a</em> = 0.00</td><td style="text-align: center;">(<em>b</em>) <em>b/a</em> = 0.05</td></tr><tr class="even"><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_3.png" style="zoom: 67%;"></td><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_4.png" style="zoom: 67%;"></td></tr><tr class="odd"><td style="text-align: center;">(<em>c</em>) <em>b/a</em> = 0.15</td><td style="text-align: center;">(<em>d</em>) <em>b/a</em> = 0.2806</td></tr><tr class="even"><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_5.png" style="zoom: 67%;"></td><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_6.png" style="zoom: 67%;"></td></tr><tr class="odd"><td style="text-align: center;">(<em>e</em>) <em>b/a</em> = 0.35</td><td style="text-align: center;">(<em>f</em>) <em>b/a</em> = 0.50</td></tr><tr class="even"><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_7.png" style="zoom: 67%;"></td><td style="text-align: center;"><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/AdFM_hw_2_2_8.png" style="zoom: 67%;"></td></tr><tr class="odd"><td style="text-align: center;">(<em>g</em>) <em>b/a</em> = 1.00</td><td style="text-align: center;">(<em>h</em>) <em>b/a</em> = 1.50</td></tr></tbody></table><center><font size="2.5"> 图 4 不同 <i>b/a</i> 情形下点涡系诱导的流线簇示意图 </font></center><p><br></p><p><font color="blue"><strong>由一个看似基本的点涡系稳定性问题，便获得了卡门涡街优美的数学模型</strong></font>，是不是很奇妙呢？</p><p>后来，在卡门基础上，进一步研究发现，圆柱绕流卡门涡街（如图 <a href="#fig5">5</a>, <a href="#fig6">6</a> 所示）的形成，<strong>其来流必须满足一定条件</strong>。</p><p><span id="fig5"></span></p><p><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/3.jpg" label="003" style="zoom: 150%;"></p><center><font size="2.5"> 图 5 圆柱绕流形成卡门涡街实际图 </font></center><p><span id="fig6"></span></p><p><img src="/2022/02/13/FM-Note-Karman-Vortex-Street/5.png" label="003" style="zoom: 60%;"></p><center><font size="2.5"> 图 6 圆柱绕流形成卡门涡街示意图 </font></center><p><br></p><p>由 <font color="red"><strong>量纲分析</strong></font> （相应推导从略）可知，主导涡街形态的两个无量纲数为 <strong>斯特劳哈尔数</strong> <span class="math inline">\(\operatorname{St}\)</span> <strong>(Strouhal number)</strong> 和 <strong>雷诺数</strong> <span class="math inline">\(\operatorname{Re}\)</span> <strong>(Reynolds number)</strong>，其定义分别如下： <span class="math display">\[\operatorname{St} = \frac{f L}{U}\tag{16}\label{eq16}\]</span> 其中 <span class="math inline">\(f\)</span> 为涡脱频率，<span class="math inline">\(L\)</span> 为特征长度，<span class="math inline">\(U\)</span> 为来流速度。<span class="math inline">\(\operatorname{St}\)</span> 的物理意义是非定常运动惯性力与惯性力之比，是表征流动非定常性的相似准则，也是是非定常空气动力实验中要模拟的相似准则。 <span class="math display">\[\operatorname{Re}_{L} = \frac{U L}{\nu}\tag{17}\label{eq17}\]</span> 其中，<span class="math inline">\(\nu\)</span> 为运动粘性系数。<span class="math inline">\(\operatorname{Re}_{L}\)</span> 的物理意义是定常运惯性力与粘性力之比，是流体力学中<strong>最基本、最重要</strong>的无量纲数。</p><p>关于卡门涡街中扰流圆柱涡的脱落频率 <span class="math inline">\(f\)</span>，<strong>泰勒（<em>F. Taylor</em>）</strong>和 <strong>瑞利（<em>L. Rayleigh</em>）</strong>给出了下列经验公式<a href="#refer-anchor-3"><sup>[3]</sup></a> <span class="math display">\[f = 0.198\frac{U}{d}(1 - \frac{19.7}{\operatorname{Re}_{d}})\tag{18}\label{eq18}\]</span> 该式适用于 <span class="math inline">\(250&lt;\operatorname{Re}_{d}= \frac{U d}{\nu}&lt;2 \times 10^{5}\)</span> 。其中 <span class="math inline">\(d\)</span> 为圆柱直径。由此看出，扰流圆柱卡门涡街中涡脱落频率 <span class="math inline">\(f\)</span> 与流速 <span class="math inline">\(U\)</span> 成正比，即流速越大，涡脱落的越快；而与圆柱直径 <span class="math inline">\(d\)</span> 成反比，即圆柱直径越大，涡脱落的越慢。</p><p>通过上述经验式我们还可以定量分析一些现象：比如在风吹电线嗡鸣发声的现象中，假设已知风速和电线的直径，那么就可以获得风嗡鸣的频率。反之，我们测得了声音频率就可以获得风速！<a href="#refer-anchor-4"><sup>[4]</sup></a></p><p>当然，卡门涡街的理论与应用不止于此，感兴趣的小伙伴可以去参考相关资料哦！</p><p><strong>神奇的卡门涡街，不朽的探索精神，伟大的物理直觉，无穷的科学灵感！</strong></p><hr><p>以上就是本文全部内容，如有疑问，敬请大家批评指正！</p><p>相应文章也将发布在我的 <a href="https://www.bilibili.com/read/cv15262815">B站空间</a> 、<a href="https://zhuanlan.zhihu.com/p/468074536">知乎专栏</a> 上。后续我会不定期更新本博客与专栏，欢迎大家关注！</p><hr><h2 id="参考资料">参考资料</h2><div id="refer-anchor-1"></div><ul><li>[1] 吴望一. 流体力学.下册[M]. 北京大学出版社, 1983.</li></ul><div id="refer-anchor-2"></div><ul><li>[2] 朱克勤，彭杰. 高等流体力学[M]. 科学出版社, 2017.</li></ul><div id="refer-anchor-3"></div><ul><li>[3] Wikipedia contributors. "<a href="https://en.wikipedia.org/wiki/K%C3%A1rm%C3%A1n_vortex_street">Kármán vortex street</a>." <em>Wikipedia, The Free Encyclopedia</em>.</li></ul><div id="refer-anchor-4"></div><ul><li>[4] <a href="https://www.zhihu.com/people/sheng-ren-mo-shi-24">流川疯</a>, <a href="https://zhuanlan.zhihu.com/p/129273764">「流体那些事儿之卡门涡街」</a>, 知乎</li></ul><h2 id="附录">附录</h2><p>本文采用的 <strong><em>Mathematica</em></strong> 代码如下：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span><br><span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.2806</span><span class="hljs-operator">;</span><br><span class="hljs-variable">Gamma0</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span><br><span class="hljs-variable">Phi</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">-</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Gamma0</span><span class="hljs-operator">/</span><span class="hljs-punctuation">(</span><span class="hljs-number">4</span> <span class="hljs-operator">*</span> <span class="hljs-built_in">Pi</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-operator">*</span><br><span class="hljs-built_in">Log</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">Cosh</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-operator">*</span><span class="hljs-built_in">Pi</span><span class="hljs-punctuation">)</span><span class="hljs-operator">/</span><span class="hljs-variable">a</span><span class="hljs-operator">*</span><span class="hljs-punctuation">(</span><span class="hljs-variable">y</span> <span class="hljs-operator">-</span> <span class="hljs-variable">b</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span> <span class="hljs-built_in">Cos</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-operator">*</span><span class="hljs-built_in">Pi</span><span class="hljs-operator">*</span><span class="hljs-variable">x</span><span class="hljs-punctuation">)</span><span class="hljs-operator">/</span><span class="hljs-variable">a</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-operator">/</span><span class="hljs-punctuation">(</span><br><span class="hljs-built_in">Cosh</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-operator">*</span><span class="hljs-built_in">Pi</span><span class="hljs-punctuation">)</span><span class="hljs-operator">/</span><span class="hljs-variable">a</span><span class="hljs-operator">*</span><span class="hljs-punctuation">(</span><span class="hljs-variable">y</span> <span class="hljs-operator">+</span> <span class="hljs-variable">b</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">-</span> <span class="hljs-built_in">Cos</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-operator">*</span><span class="hljs-built_in">Pi</span><span class="hljs-punctuation">)</span><span class="hljs-operator">/</span><span class="hljs-variable">a</span><span class="hljs-operator">*</span><span class="hljs-punctuation">(</span><span class="hljs-variable">x</span> <span class="hljs-operator">-</span> <span class="hljs-variable">a</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br><span class="hljs-variable">graph1</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">ContourPlot</span><span class="hljs-punctuation">[</span><span class="hljs-variable">Phi</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-operator">-</span><span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">y</span><span class="hljs-operator">,</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">PlotTheme</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-string">&quot;Detailed&quot;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">AspectRatio</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">Automatic</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Contours</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-number">42</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">FrameLabel</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">PerformanceGoal</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-string">&quot;Quality&quot;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">ImageSize</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-number">500</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">Export</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;Karman_Vortex_Street_Sample.pdf&quot;</span><span class="hljs-operator">,</span> <span class="hljs-variable">graph1</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/02/14</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有趣的流体小知识（一）——只凭观察，如何快速估计出湖的深度？</title>
    <link href="/2022/02/07/CFD-Note-Wave-of-water/"/>
    <url>/2022/02/07/CFD-Note-Wave-of-water/</url>
    
    <content type="html"><![CDATA[<h1 id="有趣的流体小知识一只凭观察如何快速估计出湖的深度">有趣的流体小知识（一）——只凭观察，如何快速估计出湖的深度？</h1><div class="note note-success">            <p>风拂湖面，波光粼粼，美轮美奂。</p><p>现在思考这样一个看似不可能的问题：<strong>我们只凭观察，没有测量，如何快速估计出湖的深度？</strong></p><p>流体动力学告诉我们，<font color="red"><strong>在一定条件下，通过观察湖面波浪的行进速度，就可以快速估计水深！</strong></font></p><p>是不是很神奇？生活小技巧 Get！</p><p>下面我将从基本流体力学方程出发，给出详细的<a href="#理论推导环节"><font color="green"><strong>理论推导过程</strong></font></a> ~</p><p>公式预警，不感兴趣的小伙伴们也可以跳转最后的<a href="#答案揭晓环节"><font color="green"><strong>答案揭晓环节</strong></font></a>，直接查看答案！</p>          </div><h2 id="理论推导环节">理论推导环节</h2>如图 1 所示，简化湖面为二维情形，建立平面直角坐标系 $ (z, \,x) $。<p><img src="/2022/02/07/CFD-Note-Wave-of-water/1.png" style="zoom:67%;"></p><center><font size="2.5"> 图 1 对湖面水波建立平面直角坐标系 </font></center><p>对于湖水，考虑 <strong>无粘、不可压、原始静止、小扰动</strong> 情况下的 <strong><em>Navier-Stokes (N-S)</em> 方程</strong>，即 <strong><em>Euler</em> 方程</strong> <span class="math display">\[\frac{\partial \vec{u}}{\partial t} + \left(\vec{u} \cdot \nabla\right) \vec{u} = - \frac{1}{\rho} \nabla p + \vec{g} \tag{1} \label{eq1}\]</span> 其中，$ \vec{u} $ 为速度，$ \rho $ 为密度，$ p $ 为压强，$ \vec{g} $ 为重力加速度矢量。</p><p>由原始静止、小扰动条件，可假设扰动速度与压强为 <span class="math display">\[\vec{u} = \vec{u}_{0} + \vec{u}^{\prime} = \vec{u}^{\prime} , \quad p = p_{0} + p^{\prime} \tag{2} \label{eq2}\]</span> 其中，满足 $ \vec{u} $ 为趋于零的小量，且 $ p^{\prime} \ll p_{0} $。</p><p>将式 <span class="math inline">\(\eqref{eq2}\)</span> 代入式 <span class="math inline">\(\eqref{eq1}\)</span> ，忽略高阶小对流项 $ \left(\vec{u} \cdot \nabla\right) \vec{u} $ ，得到 <strong>线性化 <em>Euler</em> 方程</strong> <span class="math display">\[\frac{\partial \vec{u}^{\prime}}{\partial t} = - \frac{1}{\rho} \nabla p + \vec{g} \tag{3} \label{eq3}\]</span> 首先对上式两边取旋度，由于重力有势，故有$$\frac{\partial \vec{\omega}^{\prime}}{\partial t} \equiv 0 \tag{4} \label{eq4}$$其中 $ \vec{\omega}^{\prime} = \nabla \times \vec{u}^{\prime} $ 为扰动速度旋度，故扰动速度无旋。由无旋场与有势场的等价性，可引入扰动速度势 $ \varphi $，满足$$\vec{u}^{\prime} = \nabla \varphi \tag{5} \label{eq5}$$ 将上式代入不可压连续性方程 $ \nabla \cdot \vec{u}^{\prime} = 0 $，可得$$\nabla^{2} \varphi = \Delta \varphi = \frac{\partial^{2} \varphi}{\partial z^{2}} + \frac{\partial^{2} \varphi}{\partial x^{2}} = 0 \tag{6} \label{eq6}$$</p><p>即扰动速度势满足 <strong><em>Laplace</em> 方程</strong>。又将式 <span class="math inline">\(\eqref{eq5}\)</span> 代入式 <span class="math inline">\(\eqref{eq3}\)</span> 左式，可得 <span class="math display">\[\frac{\partial}{\partial t} \nabla \varphi = - \nabla \left(\frac{p}{\rho} + g z\right) \tag{7} \label{eq7}\]</span> 其中，$ z $ 为水深。另外，由流体静力学知识，有$$p = p_{a} - \rho g z + p^{\prime} \tag{8} \label{eq8}$$其中，$ p_{a} $ 为湖面上方大气压强，假设保持恒定。将式 $\eqref{eq8}$ 代入式 $\eqref{eq7}$，可得$$\frac{\partial}{\partial t} \nabla \varphi = - \nabla \left(\frac{p}{\rho} + g z\right) = - \nabla \left(\frac{p_{a} + p^{\prime}}{\rho}\right) = - \nabla \left(\frac{p^{\prime}}{\rho}\right) \tag{9} \label{eq9}$$上式可进一步化为$$\frac{\partial \varphi}{\partial t} = - \frac{p^{\prime}}{\rho} \tag{10} \label{eq10}$$假设水波自由面方程为 $ z = \zeta \left(x, t\right) $，$ \zeta $ 为偏离平衡位置的位移小量，在该界面上满足 $ p = p_{a} $，代入式 $\eqref{eq8}$ 可得$$p^{\prime} = \rho g \zeta \tag{11} \label{eq11}$$</p><p>将式 <span class="math inline">\(\eqref{eq11}\)</span> 代入式 <span class="math inline">\(\eqref{eq10}\)</span> 可得水波的 <font color="red"><strong>动力学边界条件</strong></font> <span class="math display">\[\left.\frac{\partial \varphi}{\partial t}\right|_{z=\zeta}=-g \zeta \tag{12} \label{eq12}\]</span> 另外，考虑水波自由面作为物质面的运动过程 <span class="math display">\[V_{z} = \left.\frac{\partial \varphi}{\partial z}\right|_{z=\zeta}=\frac{\mathrm{d} \zeta}{\mathrm{d} t} = \frac{\partial \zeta}{\partial t}+\frac{\partial \zeta}{\partial x} \frac{\mathrm{d} x}{\mathrm{d} t} = \frac{\partial \zeta}{\partial t}+\frac{\partial \zeta}{\partial x} u^{\prime} \tag{13} \label{eq13}\]</span> 对上式略去高阶小量，进行线性化，得到水波的 <font color="red"><strong>运动学边界条件</strong></font> <span class="math display">\[\left.\frac{\partial \varphi}{\partial z}\right|_{z=\zeta}=\frac{\partial \zeta}{\partial t} \tag{14} \label{eq14}\]</span> 结合式 <span class="math inline">\(\eqref{eq12}\)</span> 与 <span class="math inline">\(\eqref{eq14}\)</span>，可得 <span class="math display">\[\left.\left(\frac{\partial^{2} \varphi}{\partial t^{2}}+g \frac{\partial \varphi}{\partial z}\right)\right|_{z = \zeta} = 0 \tag{15} \label{eq15}\]</span> 下面应用两个边界条件，再通过引入壁面边界条件，求解扰动速度势满足的 <strong><em>Laplace</em> 方程</strong>。</p><p>引入波长为 $ \lambda $，周期为 $ T $，波数为 $ k = \frac{2 \pi}{\lambda} $，频率为 $ \omega = \frac{2 \pi}{T} $，波速为 $ c = \frac{\omega}{k} = \frac{\lambda}{T} $ 的扰动速度势<strong>主模态 (Normal mode)</strong> <span class="math display">\[\varphi=\Phi(z) e^{i(k x-\omega t)} \tag{16} \label{eq16}\]</span> 其满足 <strong><em>Laplace</em> 方程</strong> <span class="math inline">\(\eqref{eq6}\)</span> 的通解为 <span class="math display">\[\Phi(z)=\phi_{1} e^{k z}+\phi_{2} e^{-k z} \tag{17} \label{eq17}\]</span> 其中，$ \phi_{1}, \, \phi_{2} $ 为常数。</p><ul><li>考虑<strong>有限水深</strong>情况，水深 $ h $。</li></ul><p><img src="/2022/02/07/CFD-Note-Wave-of-water/2.png" style="zoom:67%;"></p><center><font size="2.5"> 图 2 有限水深几何坐标系示意图 </font></center><p>如图 2 所示，考虑水底无穿透边界条件为 <span class="math display">\[\left.\frac{\partial \varphi}{\partial z}\right|_{z = - h} = 0 \tag{18} \label{eq18}\]</span> 将式 <span class="math inline">\(\eqref{eq16}\)</span> <span class="math inline">\(\eqref{eq17}\)</span> 代入上式，可令 <span class="math display">\[\phi_{1} e^{-k h}=\phi_{2} e^{k h}=\frac{1}{2} \phi_{0} \tag{19} \label{eq19}\]</span> 进一步可得 <span class="math display">\[\Phi(z)=\phi_{0} \cosh \left[k(z+h)\right] \tag{20} \label{eq20}\]</span> 故扰动速度势 $ \varphi $ 解为 <span class="math display">\[\varphi=\phi_{0} \cosh \left[k(z+h)\right] e^{i(k x-\omega t)} \tag{21} \label{eq21}\]</span> 将上式解代入式 <span class="math inline">\(\eqref{eq15}\)</span>，可得水波色散关系式 <span class="math display">\[\omega^{2} = gk \tanh (kh) \tag{22} \label{eq22}\]</span> 注意到，当 $ kh \ll 1 $，即 $ h \ll \frac{1}{k} = \frac{\lambda}{2 \pi} $ 时，有 <span class="math display">\[\tanh (kh) = kh - \frac{1}{3} (kh)^{3} + O((kh)^{5}) \approx kh \tag{23} \label{eq23}\]</span> 将上式代入式 <span class="math inline">\(\eqref{eq22}\)</span>，可得 <span class="math display">\[\omega^{2} = gk \left[kh - \frac{1}{3} (kh)^{3} + O((kh)^{5})\right] = g h k^{2} \left[1 - \frac{1}{3} (k h)^{2} + O ((kh)^{4})\right] \tag{24} \label{eq24}\]</span> 故水波波速 $ c $ 为 <span class="math display">\[c = \frac{\omega}{k} = \frac{\lambda}{T} = \sqrt{g h \left[1 - \frac{1}{3} (k h)^{2} + O ((kh)^{4})\right]} \approx \sqrt{g h} \tag{25} \label{eq25}\]</span> 观察上式可得，若<strong>水深 $ h $ 远小于波长 $ \lambda $</strong> 时，此时称该界面波为<strong>浅水波</strong>，具有<strong>非色散</strong>特性，特征是波速 <span class="math inline">\(c\)</span> 仅与以及水深 $ h $ 有关。</p><h2 id="答案揭晓环节">答案揭晓环节</h2><p>有了上面的波速关系式，我们就可以回到最初的问题，即<font color="blue"><strong>如何仅通过观察波浪行进速度就能估计出湖的深度？</strong></font></p><p><em>若我们观察到一列行进速度较为稳定的大波浪，其<strong>波长 $ \lambda $</strong> 很长，可近似满足远大于<strong>水深 $ h $</strong> 的条件，即<font color="red"><strong>浅水波</strong></font>，即可快速估计水深</em> <span class="math display">\[h = \frac{c^{2}}{g} \tag{26} \label{eq26}\]</span> <em>其中，$ c $ 为水波行进速度， $ g \approx 9.81 \, \text{m} / \text{s}^{2} $  为重力加速度。</em></p><p>事实上，该关系式在 $ \frac{\lambda}{20} < h < \frac{\lambda}{2} $ 情况下均适用。当然，这只是根据水波动力学推导出的理论关系式，其中包含众多假设条件，实际上只是一种粗略的估计。</p><p>最后，值得注意的是，若满足水波波长 $ \lambda $较短，水深 $ h $ 较大，即 $ h > \frac{\lambda}{2} $ 时，通常认为该水波为<font color="red"><strong>深水波</strong></font>（或表面波），此时界面波为负色散波，其色散关系式为 <span class="math display">\[c = \sqrt{\frac{g}{k}} \tag{27} \label{eq27}\]</span> 即波长越长，波数越小，波速越大。此时波速与水深无关，这也就意味着我们也就不能根据波速来估计湖的水深啦~</p><p><strong>想象一下，站在湖面，欣赏美景，观看浪潮，顺便还能估算出湖的深度，是不是非常神奇呢？（手动狗头 doge）</strong></p><h2 id="参考资料">参考资料</h2><p>以上就是本期全部内容，参考朱克勤、彭杰老师的《高等流体力学》。</p><p>公式推导不够细致，排版也不够美观，还请大家谅解。如有疑问，敬请大家批评指正！</p><p>相应文章也发布在我的B站空间专栏上。后续我会不定期更新本博客与专栏，也正在构思相似内容的科普短视频创作，欢迎大家关注！</p><hr><div class="note note-info">            <p><font size="2.5">^_^ This is the END of the article. Thank you for reading! </font></p><p><font size="2.5">If you think this article is helpful to you, do not hesitate to leave your comments!</font></p><p><font size="2.5">Finished by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/02/07</b></i> .</font></p>          </div><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Notes</category>
      
      <category>Articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluid Mechanics</tag>
      
      <tag>Theory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一维 Sod 激波管的数值模拟</title>
    <link href="/2022/01/31/CFD-1D-Sod-Shock-Tube/"/>
    <url>/2022/01/31/CFD-1D-Sod-Shock-Tube/</url>
    
    <content type="html"><![CDATA[<h1 id="table-of-content">Table of Content</h1><ul><li><a href="#numerical-simulation-of-1-d-sod-shock-tube">Numerical Simulation of 1-D Sod Shock Tube</a><ul><li><a href="#information">Information</a></li><li><a href="#description">Description</a><ul><li><a href="#main-program">Main Program</a></li><li><a href="#attached-function-modules">Attached Function Modules</a></li><li><a href="#exact-riemann-solution-referred-functions-by-gogol-2021">Exact Riemann Solution: Referred Functions by Gogol (2021)</a></li></ul></li><li><a href="#reference">Reference</a></li></ul></li></ul><h1 id="numerical-simulation-of-1-d-sod-shock-tube">Numerical Simulation of 1-D Sod Shock Tube</h1><p><strong>The MATLAB codes for the realization of the numerical simulation of 1-D Sod Shock Tube (v1.0)</strong></p><h2 id="information">Information</h2><p><strong><em>Author:</em></strong> pkufzh (Small Shrimp)</p><p><strong><em>Course:</em></strong> Fundamentals of Computational Fluid Dynamics (CFD)</p><p><strong><em>Submit:</em></strong> 2021/12/28</p><p><strong><em>Version:</em></strong> v1.0</p><p><strong><em>Open-source Repository:</em></strong> <a href="https://github.com/pkufzh/CFD_1D_Sod_Shock_Tube">Click this link</a></p><h2 id="description">Description</h2><p>All the developed <em>MATLAB</em> codes are saved under the <strong><em>Codes</em></strong> folder.</p><h3 id="main-program">Main Program</h3><ul><li><font color="red"><strong>Program_Sod_Shock_Tube_Main</strong></font><ul><li><strong>Main Program:</strong> Numerical simulation of 1-D compressible flow (Sod Shock Tube)</li></ul></li></ul><h3 id="attached-function-modules">Attached Function Modules</h3><p><strong><em>Important Note:</em></strong> Please ensure the following files are placed in the same folder with the main program!</p><ul><li><p><font color="blue"><strong>Flux_Vect_Split_Common.m</strong></font></p><ul><li><strong>Flux Vector Splitting (FVS)</strong> with different methods <em>(Optional)</em><ul><li><strong>Steger-Warming (S-W)</strong></li><li><strong>Lax-Friedrichs (L-F)</strong></li><li><strong>van Leer</strong></li><li><strong>Liou-Steffen (Advection Upstream Splitting Method, AUSM)</strong></li></ul></li></ul></li><li><p><font color="blue"><strong>Flux_Diff_Split_Common.m</strong></font></p><ul><li><strong>Flux Difference Splitting (FDS)</strong> with different methods <em>(Optional)</em><ul><li><strong><em>Roe</em></strong> Scheme</li></ul></li></ul></li><li><p><font color="blue"><strong>Diff_Cons_Common.m</strong></font></p></li><li><p>Calculate the flux difference $  $ from positive flux $  $ and negative flux $  $ with the conservation form through <strong>FVS</strong> or <strong>FDS</strong>, <em>i.e.</em></p></li></ul><p><span class="math display">\[\mathbf{F}_{j + \frac{1}{2}} = \mathbf{F}_{j + \frac{1}{2} L}^{+} + \mathbf{F}_{j + \frac{1}{2} R}^{-}\]</span></p><ul><li><p><strong>Shock Capturing Methods</strong> <em>(Optional)</em></p><ul><li><strong>(TVD) <em>Total Variation Diminishing</em></strong> Scheme with <strong>van Leer Limiter</strong></li><li><strong>(NND, <em>H. X. Zhang</em>) <em>Non-oscillatory, Non-free-parameters Dissipative Difference</em></strong> Scheme</li><li><strong>(Original WENO, 5 order, <em>Jiang &amp; Shu</em>) <em>Weighted Essentially Non-oscillatory Scheme</em></strong> Scheme</li></ul></li><li><p><strong>First Level Upwind Schemes</strong> <em>(Optional)</em></p><ul><li><strong>1 order</strong> (2 points)</li><li><strong>2 order</strong> (3 points)</li><li><strong>3 order</strong> (4 points with <em>bias</em>)</li><li><strong>5 order</strong> (6 points with <em>bias</em>)</li></ul></li><li><p><strong><em>Note:</em></strong> All the <strong>upwind schemes</strong> used in this program had been converted into the conservative form.</p></li><li><p><font color="blue"><strong>Cal_Minmod.m</strong></font></p><ul><li><strong>Calculate minmod(a, b)</strong></li><li><em>Sign Definition</em></li></ul><p><span class="math display">\[\operatorname{minmod}(a,b) = \frac{1}{2}\left[\operatorname{sgn}(a) + \operatorname{sgn}(b)\right]\cdot\operatorname{min}\left(\left|a\right|, \left|b\right|\right)\]</span></p></li></ul><p>​ where $ a $, $ b $ is 1-Dimensional array with same length.</p><ul><li><font color="blue"><strong>Plot_Props.m</strong></font><ul><li>Plot the properties of fluid with preset and uniform axis coordinates</li></ul></li></ul><h3 id="exact-riemann-solution-referred-functions-by-gogol-2021">Exact Riemann Solution: Referred Functions by Gogol (2021)</h3><p><strong><em>Reference:</em></strong> <em>Gogol</em> (2021). Sod Shock Tube Problem Solver <a href="https://www.mathworks.com/matlabcentral/fileexchange/46311-sod-shock-tube-problem-solver">Click to the Website</a>, From MATLAB Central File Exchange. Retrieved December 28, 2021. The main codes were developed by the original author.</p><ul><li><font color="blue"><strong>analytic_sod.m</strong></font><ul><li>Solve Sod's Shock Tube problem using exact Riemann solution</li><li><a href="http://www.phys.lsu.edu/~tohline/PHYS7412/sod.html">Reference Page</a></li></ul></li><li><font color="blue"><strong>sod_func.m</strong></font><ul><li>Define functions to be used in <em>analytic_sod.m</em></li><li>Initial conditions</li></ul></li><li><font color="blue"><strong>sod_demo.m</strong></font><ul><li>A demo script file to show the use of <em>analytic_sod.m</em></li></ul></li></ul><p><strong><em>Note:</em></strong></p><ul><li>The above <em>MATLAB</em> codes were tested and passed on <em>MATLAB R2021b</em>, Windows 64-bit system.</li><li>For the vector images saved in the <strong><em>Paper.pdf</em></strong> are large, loading may be slow. Thanks for your patient waiting!!!</li></ul><h2 id="reference">Reference</h2><ol type="1"><li>Gogol (2021). Sod Shock Tube Problem Solver (<a href="https://www.mathworks.com/matlabcentral/fileexchange/46311-sod-shock-tube-problem-solver">Click to the Website</a>), <em>MATLAB Central File Exchange.</em> Retrieved December 28, 2021.</li><li>Steger, J. L., &amp; Warming, R. F. (1981). Flux vector splitting of the inviscid gasdynamic equations with application to finite-difference methods. <em>Journal of computational physics</em>, 40(2), 263-293.</li><li>Van Leer, B. (1997). Flux-vector splitting for the Euler equation. In Upwind and high-resolution schemes (pp. 80-89). <em>Springer</em>, Berlin, Heidelberg.</li><li>Liou, M. S., &amp; Steffen Jr, C. J. (1993). A new flux splitting scheme. <em>Journal of Computational physics</em>, 107(1), 23-39.</li><li>Roe, P. L. (1981). Approximate Riemann solvers, parameter vectors, and difference schemes. <em>Journal of computational physics</em>, 43(2), 357-372.</li><li>Godunov, S., &amp; Bohachevsky, I. (1959). Finite difference method for numerical computation of discontinuous solutions of the equations of fluid dynamics. <em>Matematičeskij sbornik</em>, 47(3), 271-306.</li><li>Jennings, G. (1974). Discrete shocks. <em>Communications on pure and applied mathematics</em>, 27(1), 25-37.</li><li>Van Leer, B. (1979). Towards the ultimate conservative difference scheme. V. A second-order sequel to Godunov's method. <em>Journal of computational Physics</em>, 32(1), 101-136.</li><li>Yee, H. C., Warming, R. F., &amp; Harten, A. (1985). Implicit total variation diminishing (TVD) schemes for steady-state calculations. <em>Journal of Computational Physics</em>, 57(3), 327-360.</li><li>Sweby, P. K. (1984). High resolution schemes using flux limiters for hyperbolic conservation laws. <em>SIAM journal on numerical analysis</em>, 21(5), 995-1011.</li><li>Fu, D., &amp; Ma, Y. (1997). A high order accurate difference scheme for complex flow fields. <em>Journal of Computational physics</em>, 134(1), 1-15.</li><li>马延文, &amp; 傅德薰. (1992). 计算空气动力学中一个新的激波捕捉法——耗散比拟法. <em>中国科学(A辑 数学 物理学 天文学 技术科学)</em>, 35(3), 263-271.</li><li>张涵信. (1984). 差分计算中激波上、下游解出现波动的探讨. <em>空气动力学学报</em>(01), 14-21.</li><li>张涵信. (1988). 无波动,无自由参数的耗散差分格式. <em>空气动力学学报</em>(2).</li><li>ZHUANG, F., &amp; ZHANG, H. (1987). Computational fluid dynamics in China. <em>In 8th Computational Fluid Dynamics Conference</em> (p. 1134).</li><li>Harten, A., Engquist, B., Osher, S., &amp; Chakravarthy, S. R. (1987). Uniformly high order accurate essentially non-oscillatory schemes, III. In Upwind and high-resolution schemes (pp. 218-290). <em>Springer</em>, Berlin, Heidelberg.</li><li>Shu, C. W., &amp; Osher, S. (1988). Efficient implementation of essentially non-oscillatory shock-capturing schemes. <em>Journal of computational physics</em>, 77(2), 439-471.</li><li>Chakravarthy, S. R. (1990). Some Aspects of Essentially Nonoscillatory (ENO) Formulations for the Euler Equations. <em>National Aeronautics and Space Administration, Office of Management, Scientific and Technical Information Division.</em></li><li>Jiang, G. S., &amp; Shu, C. W. (1996). Efficient implementation of weighted ENO schemes. <em>Journal of computational physics</em>, 126(1), 202-228.</li><li>刘儒勋, &amp; 舒其望. (2003). 计算流体力学的若干新方法. <em>科学出版社</em>.</li><li>吴望一,蔡庆东.(2000).时间空间均为二阶的新型NND差分格式. <em>应用数学和力学</em> (06),561-572.</li><li>Liu, X. D., Osher, S., &amp; Chan, T. (1994). Weighted essentially non-oscillatory schemes. <em>Journal of computational physics</em>, 115(1), 200-212.</li></ol><hr><p><font size="2.5">^_^ This is the END of the page / document. Thank you for reading! </font></p><p><font size="2.5">If you think this project is helpful to you, do not hesitate to light up the 'Star' or 'Fork' in my <a href="https://github.com/pkufzh/CFD_1D_Sod_Shock_Tube">Github Repository</a>!</font></p><p><font size="2.5">Developed by <i><b>pkufzh (Small Shrimp)</b></i> on <i><b>2022/01/20</b></i> .</font></p><hr><p><font size="2.5"><em>This project is protected by the MIT license. Please obey the open source rules strictly .</em></font></p><hr><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Shared Projects</category>
      
      <category>Numerical Simulation</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Open-source</tag>
      
      <tag>Codes</tag>
      
      <tag>Computational Fluid Mechanics (CFD)</tag>
      
      <tag>MATLAB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git 学习笔记</title>
    <link href="/2022/01/19/Git_Learning_Note/"/>
    <url>/2022/01/19/Git_Learning_Note/</url>
    
    <content type="html"><![CDATA[<h1 id="git-学习笔记">Git 学习笔记</h1><p><strong><em>整理作者：pkufzh (Small Shrimp)</em></strong></p><p><em>本浓缩版 Git 学习笔记全部来自 <strong>廖雪峰老师</strong> 的官方网站：<a href="https://www.liaoxuefeng.com/wiki/896043488029600">点击跳转</a></em></p><p><em>非常感谢廖老师生动有趣的 Git 教程！在此膜拜 Linus 大神！</em></p><h2 id="git-简介">Git 简介</h2><p>Git 是什么？What is Git?</p><p>Git 是<strong>目前世界上最先进</strong>的<strong>分布式版本控制系统</strong>（没有之一！）。</p><p>Git 有什么特点？简单来说就是：<strong>高端大气上档次！</strong></p><h2 id="安装-git">安装 Git</h2><p>最早 Git 是在 <strong><em>Linux</em></strong> 上开发的，很长一段时间内，Git 也只能在 Linux 和 Unix 系统上跑。不过，慢慢地有人把它移植到了 Windows 上。现在，Git 可以在 Linux、Unix、Mac 和 Windows 这几大平台上正常运行了。</p><p>要使用 Git ，第一步当然是安装 Git 了。根据你当前使用的平台进行安装：</p><p>具体步骤参考：<a href="https://www.liaoxuefeng.com/wiki/896043488029600/896067074338496">Git 安装教程</a></p><p>最新发布版本：<a href="https://git-scm.com/">Git Newest Release</a></p><p>下面正式开始教程内容~</p><h2 id="创建版本库">1 创建版本库</h2><p>什么是版本库呢？版本库又名<strong>仓库</strong>，英文名 <strong>repository</strong>，你可以简单理解成一个目录，这个目录里面的所有文件都可以被 Git 管理起来，每个文件的修改、删除，Git 都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。</p><p>所以，创建一个版本库非常简单：</p><ul><li>首先，选择一个合适的地方，创建一个空目录：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">mkdir</span> learngit<br>$ <span class="hljs-built_in">cd</span> learngit<br>$ <span class="hljs-built_in">pwd</span><br>/Users/michael/learngit<br></code></pre></td></tr></table></figure><p><code>pwd</code> 命令用于显示当前目录。</p><p>如果你使用 Windows 系统，为了避免遇到各种莫名其妙的问题，<strong>请确保目录名（包括父目录）不包含中文</strong>。</p><ul><li>第二步，通过<code>git init</code>命令把这个目录变成Git可以管理的仓库：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git init<br>Initialized empty Git repository <span class="hljs-keyword">in</span> /Users/michael/learngit/.git/<br></code></pre></td></tr></table></figure><p>瞬间 Git 就把仓库建好了，而且告诉你是一个空的仓库（empty Git repository），细心的读者可以发现当前目录下多了一个<code>.git</code>的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把 Git 仓库给破坏了。</p><p>如果你没有看到<code>.git</code>目录，那是因为这个目录默认是<strong>隐藏</strong>的，用<code>ls -ah</code>命令就可以看见。</p><h3 id="把文件添加到版本库">把文件添加到版本库</h3><p><strong>使用Windows的童鞋要特别注意：</strong></p><p>千万不要使用Windows自带的 <strong>记事本</strong> 编辑任何文本文件。原因是 Microsoft 开发记事本的团队使用了一个非常弱智的行为来保存 <em>UTF-8</em> 编码的文件，他们自作聪明地在每个文件开头添加了 <strong>0xefbbbf（十六进制）</strong>的字符，你会遇到很多不可思议的问题，比如，网页第一行可能会显示一个“?”，明明正确的程序一编译就报语法错误，等等，都是由记事本的弱智行为带来的。建议你下载 <strong><a href="https://code.visualstudio.com/">Visual Studio Code</a></strong> 代替记事本，不但功能强大，而且免费！</p><p><strong>两个步骤：</strong></p><ul><li><p>初始化一个Git仓库，使用<code>git init</code>命令。</p></li><li><p>添加文件到Git仓库，分两步：</p><ul><li>使用命令<code>git add</code>，注意，可反复多次使用，添加多个文件；</li><li>使用命令<code>git commit -m</code>，完成。</li></ul></li></ul><h2 id="时光机穿梭">2 时光机穿梭</h2><ul><li>要随时掌握工作区的状态，使用<code>git status</code>命令。</li><li>如果<code>git status</code>告诉你有文件被修改过，用<code>git diff</code>可以查看修改内容。</li></ul><h3 id="版本回退">版本回退</h3><ul><li><code>HEAD</code>指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令<code>git reset --hard commit_id</code>。</li><li>穿梭前，用<code>git log</code>可以查看提交历史，以便确定要回退到哪个版本。</li><li>要重返未来，用<code>git reflog</code>查看命令历史，以便确定要回到未来的哪个版本。</li></ul><h3 id="工作区和暂存区">工作区和暂存区</h3><p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p><p><strong>工作区（Working Directory）</strong></p><p>就是你在电脑里能看到的目录，比如我的<code>learngit</code>文件夹就是一个工作区：</p><p><strong>版本库（Repository）</strong></p><p>工作区有一个隐藏目录<code>.git</code>，这个不算工作区，而是 Git 的版本库。</p><p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage（或者叫 index）的暂存区，还有Git为我们自动创建的第一个分支<code>master</code>，以及指向<code>master</code>的一个指针叫<code>HEAD</code>。</p><p>分支和<code>HEAD</code>的概念我们以后再讲。</p><p>前面讲了我们把文件往 Git 版本库里添加的时候，是分两步执行的：</p><ul><li><p>第一步是用<code>git add</code>把文件添加进去，实际上就是把文件修改添加到暂存区；</p></li><li><p>第二步是用<code>git commit</code>提交更改，实际上就是把暂存区的所有内容提交到当前分支。</p></li></ul><p>因为我们创建 Git 版本库时，Git 自动为我们创建了唯一一个<code>master</code>分支，所以，现在，<code>git commit</code>就是往<code>master</code>分支上提交更改。</p><p>你可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p><p><img src="/2022/01/19/Git_Learning_Note/1.png"></p><h3 id="管理修改">管理修改</h3><p>怎么提交第二次修改呢？你可以继续<code>git add</code>再<code>git commit</code>，也可以别着急提交第一次修改，先<code>git add</code>第二次修改，再<code>git commit</code>，就相当于把两次修改合并后一块提交了：</p><ul><li>第一次修改 -&gt; <code>git add</code> -&gt; 第二次修改 -&gt; <code>git add</code> -&gt; <code>git commit</code></li></ul><p>现在，你又理解了Git是如何跟踪修改的，每次修改，如果不用<code>git add</code>到暂存区，那就不会加入到<code>commit</code>中。</p><h3 id="撤销修改">撤销修改</h3><ul><li><p><strong>场景1：</strong>当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code>。</p></li><li><p><strong>场景2：</strong>当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD</code>，就回到了场景1，第二步按场景1操作。</p></li><li><p><strong>场景3：</strong>已经提交了不合适的修改到版本库时，想要撤销本次提交，参考<a href="#版本回退">版本回退</a>一节，不过前提是没有推送到远程库。</p></li></ul><h3 id="删除文件">删除文件</h3><ul><li>命令<code>git rm</code>用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失<strong>最近一次提交后你修改的内容</strong>。</li></ul><h2 id="远程仓库">3 远程仓库</h2><ul><li><strong>第1步：</strong>创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有<code>id_rsa</code>和<code>id_rsa.pub</code>这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ssh-keygen -t rsa -C <span class="hljs-string">&quot;youremail@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</p><p>如果一切顺利的话，可以在用户主目录里找到<code>.ssh</code>目录，里面有<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，这两个就是SSH Key的秘钥对，<code>id_rsa</code>是私钥，不能泄露出去，<code>id_rsa.pub</code>是公钥，可以放心地告诉任何人。</p><ul><li><strong>第2步：</strong>登陆 GitHub，打开 “Account settings”，“SSH Keys” 页面：</li></ul><p>然后，点 “Add SSH Key”，填上任意 Title，在 Key 文本框里粘贴<code>id_rsa.pub</code>文件的内容即可。</p><p>为什么 GitHub 需要SSH Key呢？因为 GitHub 需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub 只要知道了你的公钥，就可以确认只有你自己才能推送。</p><p>当然，GitHub 允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到 GitHub，就可以在每台电脑上往 GitHub 推送了。</p><p>最后友情提示，在 GitHub 上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。</p><p>如果你不想让别人看到Git库，有两个办法，一个是交点保护费，让 GitHub 把公开的仓库变成私有的，这样别人就看不见了（不可读更不可写）。另一个办法是自己动手，搭一个Git服务器，因为是你自己的Git服务器，所以别人也是看不见的。这个方法我们后面会讲到的，相当简单，公司内部开发必备。</p><p><em>“有了远程仓库，妈妈再也不用担心我的硬盘了。”——Git点读机</em></p><h3 id="添加远程库">添加远程库</h3><ul><li><p>要关联一个远程库，使用命令<code>git remote add origin git@server-name:path/repo-name.git</code>；</p></li><li><p>关联一个远程库时<strong>必须给远程库指定一个名字</strong>，<code>origin</code>是默认习惯命名；</p></li><li><p>关联后，使用命令<code>git push -u origin master</code>第一次推送 master 分支的所有内容；</p></li><li><p>此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；</p></li></ul><p>分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而 SVN 在没有联网的时候是拒绝干活的！当有网络时，再把本地提交推送一下就完成了同步，真是太方便了！</p><h3 id="从远程库克隆">从远程库克隆</h3><p>要克隆一个仓库，首先必须知道仓库的地址，然后使用<code>git clone</code>命令克隆。</p><p>当然，Git 支持多种协议，包括<code>https</code>，但<code>ssh</code>协议速度最快！</p><h2 id="分支管理">4 分支管理</h2><p><em>分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习 Git 的时候，另一个你正在另一个平行宇宙里努力学习 SVN 。如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了 Git 又学会了 SVN！</em></p><p><img src="/2022/01/19/Git_Learning_Note/2.png"></p><p>分支在实际中有什么用呢？假设你准备开发一个新功能，但是需要两周才能完成，第一周你写了50%的代码，如果立刻提交，由于代码还没写完，不完整的代码库会导致别人不能干活了。如果等代码全部写完再一次提交，又存在丢失每天进度的巨大风险。</p><p>现在有了分支，就不用怕了。你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作。</p><h3 id="创建与合并分支">创建与合并分支</h3><p>Git 鼓励<strong>大量使用</strong>分支：</p><ul><li><p>查看分支：<code>git branch</code></p></li><li><p>创建分支：<code>git branch</code></p></li><li><p>切换分支：<code>git checkout</code>或者<code>git switch</code></p></li><li><p>创建+切换分支：<code>git checkout -b</code>或者<code>git switch -c</code></p></li><li><p>合并某分支到当前分支：<code>git merge</code></p></li><li><p>删除分支：<code>git branch -d</code></p></li></ul><h3 id="解决冲突">解决冲突</h3><p>当 Git 无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</p><p>解决冲突就是把 Git 合并失败的文件手动编辑为我们希望的内容，再提交。</p><p>用<code>git log --graph --pretty=oneline --abbrev-commit</code>命令可以看到分支合并图。</p><h3 id="分支管理策略">分支管理策略</h3><p><strong>合并分支 &amp; 记录分支信息</strong></p><p>通常，合并分支时，如果可能，Git 会用<code>Fast forward</code>模式，但这种模式下，删除分支后，会丢掉分支信息。</p><p>如果要强制禁用<code>Fast forward</code>模式，Git 就会在 merge 时生成一个新的 commit，这样，从分支历史上就可以看出分支信息。</p><p>准备合并<code>dev</code>分支，请注意<code>--no-ff</code>参数，表示禁用<code>Fast forward</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git merge --no-ff -m <span class="hljs-string">&quot;merge with no-ff&quot;</span> dev<br>Merge made by the <span class="hljs-string">&#x27;recursive&#x27;</span> strategy.<br>readme.txt | 1 +<br>1 file changed, 1 insertion(+)<br></code></pre></td></tr></table></figure><p>因为本次合并要创建一个新的 commit，所以加上<code>-m</code>参数，把 commit 描述写进去。</p><p>合并后，我们用<code>git log</code>看看分支历史：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">log</span> --graph --pretty=oneline --abbrev-commit<br>*   e1e9c68 (HEAD -&gt; master) merge with no-ff<br>|\  <br>| * f52c633 (dev) add merge<br>|/  <br>*   cf810e4 conflict fixed<br>...<br></code></pre></td></tr></table></figure><p>可以看到，不使用<code>Fast forward</code>模式，merge 后就像这样：</p><p><img src="/2022/01/19/Git_Learning_Note/3.png"></p><p><strong>分支策略</strong></p><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p><p>首先，<code>master</code>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；</p><p>那在哪干活呢？干活都在<code>dev</code>分支上，也就是说，<code>dev</code>分支是不稳定的，到某个时候，比如 1.0 版本发布时，再把<code>dev</code>分支合并到<code>master</code>上，在<code>master</code>分支发布 1.0 版本；</p><p>你和你的小伙伴们每个人都在<code>dev</code>分支上干活，每个人都有自己的分支，时不时地往<code>dev</code>分支上合并就可以了。</p><p>所以，团队合作的分支看起来就像这样：</p><p><img src="/2022/01/19/Git_Learning_Note/4.png"></p><p>Git 分支十分强大，在团队开发中应该充分应用。</p><p>合并分支时，加上<code>--no-ff</code>参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而<code>fast forward</code>合并就看不出来曾经做过合并。</p><h3 id="bug-分支">Bug 分支</h3><p>修复 bug 时，我们会通过创建新的 bug 分支进行修复，然后合并，最后删除；</p><p>当手头工作没有完成时，先把工作现场<code>git stash</code>一下，然后去修复 bug，修复后，再<code>git stash pop</code>，回到工作现场；</p><p>在 master 分支上修复的 bug，想要合并到当前 dev 分支，可以用<code>git cherry-pick</code>命令，把bug提交的修改“复制”到当前分支，避免重复劳动。</p><h3 id="feature-分支">Feature 分支</h3><p>开发一个新 feature，最好新建一个分支；</p><p>如果要丢弃一个没有被合并过的分支，可以通过<code>git branch -D</code>强行删除。</p><h3 id="多人协作">多人协作</h3><ul><li>查看远程库信息，使用<code>git remote -v</code>；</li><li>本地新建的分支如果不推送到远程，对其他人就是不可见的；</li><li>从本地推送分支，使用<code>git push origin branch-name</code>，如果推送失败，先用<code>git pull</code>抓取远程的新提交；</li><li>在本地创建和远程分支对应的分支，使用<code>git checkout -b branch-name origin/branch-name</code>，本地和远程分支的名称最好一致；</li><li>建立本地分支和远程分支的关联，使用<code>git branch --set-upstream branch-name origin/branch-name</code>；</li><li>从远程抓取分支，使用<code>git pull</code>，如果有冲突，要先处理冲突。</li></ul><h3 id="rebase-操作">Rebase 操作</h3><ul><li>rebase 操作可以把本地未push的分叉提交历史整理成直线；</li><li>rebase 的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</li></ul><h2 id="标签管理">5 标签管理</h2><p><strong>tag</strong> 就是一个让人容易记住的有意义的名字，它跟某个 commit 绑在一起。</p><h3 id="创建标签">创建标签</h3><ul><li>命令<code>git tag</code>用于新建一个标签，默认为<code>HEAD</code>，也可以指定一个 commit id；</li><li>命令<code>git tag -a  -m "blablabla..."</code>可以指定标签信息；</li><li>命令<code>git tag</code>可以查看所有标签。</li></ul><h3 id="操作标签">操作标签</h3><ul><li>命令<code>git push origin</code>可以推送一个本地标签；</li><li>命令<code>git push origin --tags</code>可以推送全部未推送过的本地标签；</li><li>命令<code>git tag -d</code>可以删除一个本地标签；</li><li>命令<code>git push origin :refs/tags/</code>可以删除一个远程标签。</li></ul><h2 id="使用-github">6 使用 Github</h2><ul><li>在 GitHub 上，可以任意 Fork 开源仓库；</li><li>自己拥有 Fork 后的仓库的读写权限；</li><li>可以推送 pull request 给官方仓库来贡献代码。</li></ul><h2 id="自定义-git">7 自定义 Git</h2><p>在<a href="#安装 Git">安装 Git</a>一节中，我们已经配置了<code>user.name</code>和<code>user.email</code>，实际上，Git还有很多可配置项。</p><p>比如，让 Git 显示颜色，会让命令输出看起来更醒目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global color.ui <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="忽略特定文件">忽略特定文件</h3><p>在 Git 工作区的根目录下创建一个特殊的<code>.gitignore</code>文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。</p><p>不需要从头写<code>.gitignore</code>文件，<strong>GitHub 已经为我们准备了各种配置文件</strong>，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：https://github.com/github/gitignore</p><ul><li>忽略某些文件时，需要编写<code>.gitignore</code>；</li><li>把指定文件排除在<code>.gitignore</code>规则外的写法就是<code>!</code>+文件名，所以，只需把例外文件添加进去即可。</li><li><code>.gitignore</code>文件本身要放到版本库里，并且可以对<code>.gitignore</code>做版本管理！</li></ul><h3 id="配置别名">配置别名</h3><p>给 Git 配置好别名，就可以输入命令时偷个懒。我们鼓励偷懒。</p><ul><li>每个仓库的 Git 配置文件都放在<code>.git/config</code>文件中：</li><li>当前用户的 Git 配置文件放在用户主目录下的一个隐藏文件<code>.gitconfig</code>中：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> .gitconfig<br>[<span class="hljs-built_in">alias</span>]<br>    co = checkout<br>    ci = commit<br>    br = branch<br>    st = status<br>[user]<br>    name = Your Name<br>    email = your@email.com<br></code></pre></td></tr></table></figure><p>配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置。</p><h3 id="搭建-git-服务器">搭建 Git 服务器</h3><ul><li>搭建Git服务器非常简单，通常10分钟即可完成；</li><li>要方便管理公钥，用<a href="https://github.com/res0nat0r/gitosis">Gitosis</a>；</li><li>要像SVN那样变态地控制权限，用<a href="https://github.com/sitaramc/gitolite">Gitolite</a>。</li></ul><h2 id="使用-sourcetree">8 使用 SourceTree</h2><p>使用 SourceTree 可以以<strong>图形界面（GUI界面）</strong>操作 Git，省去了敲命令的过程，对于常用的提交、分支、推送等操作来说非常方便。</p><p>注意：SourceTree 使用 Git 命令执行操作，出错时，仍然需要阅读 Git 命令返回的错误信息。</p><h2 id="拓展资料">拓展资料</h2><p>下面是一些与 Git 相关的学习教程：</p><ul><li><p><a href="https://backlog.com/git-tutorial/cn/">猴子都能懂的 Git 入门</a></p><p>内容全面，图文并茂，涵盖初级、中级、高级。</p></li><li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰 Git 教程</a>（本文参考）</p><p>浅显易懂，适合初学者~</p></li><li><p><a href="http://git-scm.com/">Git 官方网站</a>，有纯正的英文<a href="https://git-scm.com/book/zh/v2">官网教程</a>可供参考哟~</p></li><li><p><a href="https://learngitbranching.js.org/?locale=zh_CN">Learn Git Branching</a></p><p>一个在线 Git 学习网站，通过可视化交互方式学习 Git 相关操作。动画做的很棒！但适合有一定基础的同学。</p></li></ul><p>其他有趣的 Git &amp; Github 学习资料：</p><ul><li><p><a href="https://www.githubs.cn/">Github 中文社区</a></p></li><li><p><a href="https://docs.github.com/en/get-started/quickstart/hello-world">GitHub官方10分钟入门教程</a></p><p>GitHub 官方出品~教学内容包含：新建仓库、新建分支、修改提交 (Commit) 以及请求拉取 (Pull Request)。 原文为英文版，中文翻译可以点击<a href="https://www.jianshu.com/p/3a81cab0cae7">此处</a></p></li><li><p><a href="https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.zh-cn.md">GitHub秘籍</a></p><p>主要包含<code>git</code>和<code>github</code>常用技巧，适合有一定基础的同学想要进一步掌握一些高级技巧~</p></li></ul><hr><p><font size="2.5">^_^ This is the END of the page / document. Thank you for reading!</font></p><p><font size="2.5"><em>Finished by <strong>pkufzh (Small Shrimp)</strong> on</em> <strong>2022/01/19</strong>.</font></p><hr><center><i> Who am I? A happy shrimp from Peking University! </i></center>]]></content>
    
    
    <categories>
      
      <category>Learning Notes</category>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Learning Resources</tag>
      
      <tag>Git</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
